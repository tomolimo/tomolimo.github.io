<!DOCTYPE html>

<!-- Mirrored from wiki.processmaker.com/node/136 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Feb 2024 09:53:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta name="keywords" content="BPM, business process management, workflow, processmaker, business, BPM Windows, BPM Linux, wiki, BPM documentation, BPM FAQ, task documentation, BPM PHP, BPM Open Source, BPM Variables, BPM Installation, BPM Programming, BPM Elements, BPM Concepts, BPM Frequently Asked Questions, BPM 3.0, BPM News, Release notes, DynaForms, BPM Community, BPM Enterprise, BPM Mobile, BPM Responsive Web Design, User Manual, BPM Resources" />
<link rel="alternate" hreflang="en" href="../index.html" />
<link rel="shortcut icon" href="../themes/thecompany_responsive_theme/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="description" content="ProcessMaker is commercial open source workflow and business process management software." />
<meta name="viewport" content="width=device-width" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="../index.php/ProcessMaker_Functions.html" />
<link rel="shortlink" href="136.html" />
<title>2.0 - ProcessMaker Functions | Documentation@ProcessMaker</title>
<style type="text/css" media="all">
@import url("../modules/system/system.base2af9.css?s743n7");
@import url("../modules/system/system.menus2af9.css?s743n7");
@import url("../modules/system/system.messages2af9.css?s743n7");
@import url("../modules/system/system.theme2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../modules/aggregator/aggregator2af9.css?s743n7");
@import url("../modules/comment/comment2af9.css?s743n7");
@import url("../modules/field/theme/field2af9.css?s743n7");
@import url("../modules/node/node2af9.css?s743n7");
@import url("../modules/search/search2af9.css?s743n7");
@import url("../modules/toc_filter/toc_filter2af9.css?s743n7");
@import url("../modules/user/user2af9.css?s743n7");
@import url("../modules/views/css/views2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../sites/all/modules/colorbox/styles/default/colorbox_style2af9.css?s743n7");
@import url("../modules/ctools/css/ctools2af9.css?s743n7");
@import url("../sites/all/modules/geshifilter/geshifilter2af9.css?s743n7");
@import url("../modules/panels/css/panels2af9.css?s743n7");
@import url("../modules/nice_menus/css/nice_menus2af9.css?s743n7");
@import url("../modules/nice_menus/css/nice_menus_default2af9.css?s743n7");
@import url("../modules/fivestar/css/fivestar2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../themes/thecompany_responsive_theme/css/style2af9.css?s743n7");
@import url("../themes/thecompany_responsive_theme/css/media2af9.css?s743n7");
</style>
<script type="text/javascript" src="../modules/jquery_update/replace/jquery/1.9/jquery.min4b17.js?v=1.9.1"></script>
<script type="text/javascript" src="../misc/jquery.once7839.js?v=1.2"></script>
<script type="text/javascript" src="../misc/drupal2af9.js?s743n7"></script>
<script type="text/javascript" src="../modules/nice_menus/js/jquery.bgiframef195.js?v=2.1"></script>
<script type="text/javascript" src="../modules/nice_menus/js/jquery.hoverIntent1f6b.js?v=0.5"></script>
<script type="text/javascript" src="../modules/nice_menus/js/superfish099d.js?v=1.4.8"></script>
<script type="text/javascript" src="../modules/nice_menus/js/nice_menusc619.js?v=1.0"></script>
<script type="text/javascript" src="../modules/jquery_update/replace/ui/external/jquery.cookie1683.js?v=67fb34f6a866c40d0570"></script>
<script type="text/javascript" src="../modules/jquery_update/replace/misc/jquery.form.min97e5.js?v=2.69"></script>
<script type="text/javascript" src="../misc/ajax2347.js?v=7.34"></script>
<script type="text/javascript" src="../modules/jquery_update/js/jquery_update241d.js?v=0.0.1"></script>
<script type="text/javascript" src="../modules/toc_filter/toc_filter2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/js/colorbox2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/styles/default/colorbox_style2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/google_analytics/googleanalytics2af9.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","../../www.google-analytics.com/analytics.js","ga");ga("create", "UA-3380652-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript" src="../misc/progress2347.js?v=7.34"></script>
<script type="text/javascript" src="../modules/fivestar/js/fivestar.ajax2af9.js?s743n7"></script>
<script type="text/javascript" src="../modules/fivestar/js/fivestar2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-1.10.2.min2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-ui2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-ui.min2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/custom2af9.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"thecompany_responsive_theme","theme_token":"NTb22wJLMaM0GxQ2ewJ5_DQjslJqChtZSQ3fLQOBqkk","jquery_version":"1.9","js":{"modules\/jquery_update\/replace\/jquery\/1.9\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"modules\/nice_menus\/js\/jquery.bgiframe.js":1,"modules\/nice_menus\/js\/jquery.hoverIntent.js":1,"modules\/nice_menus\/js\/superfish.js":1,"modules\/nice_menus\/js\/nice_menus.js":1,"modules\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"modules\/jquery_update\/replace\/misc\/jquery.form.min.js":1,"misc\/ajax.js":1,"modules\/jquery_update\/js\/jquery_update.js":1,"modules\/toc_filter\/toc_filter.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox.js":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"misc\/progress.js":1,"modules\/fivestar\/js\/fivestar.ajax.js":1,"modules\/fivestar\/js\/fivestar.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-1.10.2.min.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.min.js":1,"themes\/thecompany_responsive_theme\/js\/custom.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/toc_filter\/toc_filter.css":1,"modules\/user\/user.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"modules\/panels\/css\/panels.css":1,"modules\/nice_menus\/css\/nice_menus.css":1,"modules\/nice_menus\/css\/nice_menus_default.css":1,"modules\/fivestar\/css\/fivestar.css":1,"themes\/thecompany_responsive_theme\/css\/style.css":1,"themes\/thecompany_responsive_theme\/css\/media.css":1}},"colorbox":{"opacity":"0.85","current":"{current} of {total}","previous":"\u00ab Prev","next":"Next \u00bb","close":"Close","maxWidth":"98%","maxHeight":"98%","fixed":true,"mobiledetect":true,"mobiledevicewidth":"480px","specificPagesDefaultValue":"admin*\nimagebrowser*\nimg_assist*\nimce*\nnode\/add\/*\nnode\/*\/edit\nprint\/*\nprintpdf\/*\nsystem\/ajax\nsystem\/ajax\/*"},"toc_filter_smooth_scroll_duration":"","googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip","trackColorbox":1},"nice_menus_options":{"delay":"800","speed":"slow"},"ajax":{"edit-vote--2":{"callback":"fivestar_ajax_submit","event":"change","url":"\/system\/ajax","submit":{"_triggering_element_name":"vote"}}}});
//--><!]]>
</script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','../../connect.facebook.net/en_US/fbevents.js');
// Insert Your Facebook Pixel ID below.
fbq('init', '735235999992228');
fbq('track', 'PageView');
</script>
<!-- Insert Your Facebook Pixel ID below. -->
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=735235999992228&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-136 node-type-community-edition">
    
<div class="wrap">

<div id="header_wrapper">
  <div id="inner_header_wrapper">

    <header id="header" role="banner">
      
      <div class="header_inner_wrapper">
        <div class="header_left">
                      <div id="logo">
              <a href="../index.html" title="Home"><img src="../sites/default/files/full-logo.png"/></a>
            </div>
                            <!--  <h1 id="site-title">
            <a href="/" title="Home">Documentation@ProcessMaker</a>
            <div id="site-description"></div>
          </h1> -->
            
        </div>
      </div>
      <div class="header_right">
          <div class="region region-search">
  <div id="block-search-form" class="block block-search">

        <h2 >_</h2>
    
  <div class="content">
    <form action="https://wiki.processmaker.com/node/136" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." placeholder="Search" type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-NsAwfURMtKOE6ZkDQq9yrRamOyo-6yV-OMOT0cecdxk" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
                  <h1 class="page-title">2.0 - ProcessMaker Functions</h1>                <p class="page-title-suffix"></p>
                 <div style="margin-top: 5px;"></div>
      </div>
    </header>
    <div class="region-version">
      <span>Version: </span><ul><li><a href="../3.7/ProcessMaker_Functions/User_Functions.html" class="">3.8</a></li><li><a href="../3.7/ProcessMaker_Functions/User_Functions.html" class="">3.7</a></li><li><a href="../3.2/ProcessMaker_Functions.html" class="">3.6</a></li><li><a href="../3.2/ProcessMaker_Functions.html" class="">3.5</a></li><li><a href="../3.2/ProcessMaker_Functions.html" class="">3.4</a></li><li><a href="../3.2/ProcessMaker_Functions.html" class="">3.3</a></li><li><a href="../3.2/ProcessMaker_Functions.html" class="">3.2</a></li><li><a href="../3.1/ProcessMaker_Functions.html" class="">3.1</a></li><li><a href="../3.0/ProcessMaker_Functions.html" class="">3.0</a></li><li><a  class="active-version">2.x</a></li></ul>    </div>
  </div>
</div>
<!-- <ul class="nice-menu nice-menu-down nice-menu-main-menu" id="nice-menu-0"><li class="menu-506 menu-path-node-1078 first odd "><a href="/PM_Classic" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="menu-319 menu-path-processmakercom-tutorials  even "><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="menu-320 menu-path-node-571  odd "><a href="/3.1/user_guide">User Guide</a></li>
<li class="menu-1138 menu-path-node-572  even "><a href="/3.1/developer_info">Developer Info</a></li>
<li class="menu-1197 menu-path-node-876  odd "><a href="/3.2/sys_administration">Sys Administration</a></li>
<li class="menu-1140 menu-path-node-236  even "><a href="/3.1/resources">Helpful Resources</a></li>
<li class="menu-1141 menu-path-node-554  odd "><a href="/Sitemap">Sitemap</a></li>
<li class="menu-1213 menu-path-sprocessmakergitbookio-processmaker-  even last"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>
-->
  
  <div id="container">
    
    <div class="content-sidebar-wrap">

    <div id="content">

              <!-- <div id="breadcrumbs">
        <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="/">Home</a></div></div> -->
      
      <section id="post-content" role="main">
                                        <div class="region region-content">
  <div id="block-system-main" class="block block-system">

      
  <div class="content">
                          <span property="dc:title" content="2.0 - ProcessMaker Functions" class="rdf-meta element-hidden"></span>  
      
    
  <div class="content node-community-edition">
    <div class="field field-name-field-how-useful field-type-fivestar field-label-above"><div class="field-label">Please rate how useful you found this document:&nbsp;</div><div class="field-items"><div class="field-item even"><form class="fivestar-widget" action="https://wiki.processmaker.com/node/136" method="post" id="fivestar-custom-widget" accept-charset="UTF-8"><div><div  class="clearfix fivestar-average-text fivestar-average-stars fivestar-form-item fivestar-default"><div class="form-item form-type-fivestar form-item-vote">
 <div class="form-item form-type-select form-item-vote">
 <select id="edit-vote--2" name="vote" class="form-select"><option value="-">Select rating</option><option value="20">Give 2.0 - ProcessMaker Functions 1/5</option><option value="40">Give 2.0 - ProcessMaker Functions 2/5</option><option value="60" selected="selected">Give 2.0 - ProcessMaker Functions 3/5</option><option value="80">Give 2.0 - ProcessMaker Functions 4/5</option><option value="100">Give 2.0 - ProcessMaker Functions 5/5</option></select>
<div class="description"><div class="fivestar-summary fivestar-summary-average-count"><span class="average-rating">Average: <span >2.8</span></span> <span class="total-votes">(<span >5</span> votes)</span></div></div>
</div>

</div>
</div><input class="fivestar-submit form-submit" type="submit" id="edit-fivestar-submit" name="op" value="Rate" /><input type="hidden" name="form_build_id" value="form-UTgWy9VyVnislEbG9-gCWMc7oltFwMaU2gCbDZkZrBs" />
<input type="hidden" name="form_id" value="fivestar_custom_widget" />
</div></form></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><div style="float: right; margin-left: 5px; background-color: #f9f9f9; border: 1px solid #aaaaaa; padding: 5px;"><center><strong>Contents:</strong> [<a href="#" onclick="var el = document.getElementById('toc');
        var txt = ('innerText' in el)? 'innerText' : 'textContent';
        if (el.style.display=='none') { 
           el.style.display = '';
           document.getElementById('hideLabel')[txt] = 'hide';
        }
        else {
	        el.style.display = 'none';
           document.getElementById('hideLabel')[txt] = 'show';
        }"><span id="hideLabel">hide</span></a>]</b></center><div id="toc" ><ol class="toc">
<li class="toc"><a href="#Overview">Overview</a></li>
<li class="toc"><a href="#Date_Functions">Date Functions</a></li>
<ol class="toc">
<li class="toc"><a href="#formatDate.28.29">formatDate()</a></li>
<li class="toc"><a href="#getCurrentDate.28.29">getCurrentDate()</a></li>
<li class="toc"><a href="#getCurrentTime.28.29">getCurrentTime()</a></li>
<li class="toc"><a href="#literalDate.28.29">literalDate()</a></li>
</ol>
<li class="toc"><a href="#String_Functions">String Functions</a></li>
<ol class="toc">
<li class="toc"><a href="#capitalize.28.29">capitalize()</a></li>
<li class="toc"><a href="#lowerCase.28.29">lowerCase()</a></li>
<li class="toc"><a href="#upperCase.28.29">upperCase()</a></li>
</ol>
<li class="toc"><a href="#Database_Functions">Database Functions</a></li>
<ol class="toc">
<li class="toc"><a href="#userInfo.28.29">userInfo()</a></li>
<li class="toc"><a href="#executeQuery.28.29">executeQuery()</a></li>
</ol>
<li class="toc"><a href="#Grid_Functions">Grid Functions</a></li>
<ol class="toc">
<li class="toc"><a href="#orderGrid.28.29">orderGrid()</a></li>
<li class="toc"><a href="#evaluateFunction.28.29">evaluateFunction()</a></li>
</ol>
<li class="toc"><a href="#ProcessMaker_Functions">ProcessMaker Functions</a></li>
<ol class="toc">
<li class="toc"><a href="#PMFTaskCase.28.29">PMFTaskCase()</a></li>
<li class="toc"><a href="#PMFTaskList.28.29">PMFTaskList()</a></li>
<li class="toc"><a href="#PMFUserList.28.29">PMFUserList()</a></li>
<li class="toc"><a href="#PMFGroupList.28.29">PMFGroupList()</a></li>
<li class="toc"><a href="#PMFRoleList.28.29">PMFRoleList()</a></li>
<li class="toc"><a href="#PMFCaseList.28.29">PMFCaseList()</a></li>
<li class="toc"><a href="#PMFProcessList.28.29">PMFProcessList()</a></li>
<li class="toc"><a href="#PMFSendVariables.28.29">PMFSendVariables()</a></li>
<li class="toc"><a href="#PMFDerivateCase.28.29">PMFDerivateCase()</a></li>
<li class="toc"><a href="#PMFNewCaseImpersonate.28.29">PMFNewCaseImpersonate()</a></li>
<li class="toc"><a href="#PMFNewCase.28.29">PMFNewCase()</a></li>
<li class="toc"><a href="#PMFPauseCase.28.29">PMFPauseCase()</a></li>
<li class="toc"><a href="#PMFUnpauseCase.28.29">PMFUnpauseCase()</a></li>
<li class="toc"><a href="#PMFAssignUserToGroup.28.29">PMFAssignUserToGroup()</a></li>
<li class="toc"><a href="#PMFCreateUser.28.29">PMFCreateUser()</a></li>
<li class="toc"><a href="#PMFUpdateUser.28.29">PMFUpdateUser()</a></li>
<li class="toc"><a href="#generateCode.28.29">generateCode()</a></li>
<li class="toc"><a href="#getEmailConfiguration.28.29">getEmailConfiguration()</a></li>
<li class="toc"><a href="#setCaseTrackerCode.28.29">setCaseTrackerCode()</a></li>
<li class="toc"><a href="#jumping.28.29">jumping()</a></li>
<li class="toc"><a href="#PMFRedirectToStep.28.29">PMFRedirectToStep()</a></li>
<li class="toc"><a href="#PMFSendMessage.28.29">PMFSendMessage()</a></li>
<li class="toc"><a href="#PMFAddAttachmentToArray.28.29">PMFAddAttachmentToArray()</a></li>
<li class="toc"><a href="#PMFgetLabelOption.28.29">PMFgetLabelOption()</a></li>
<li class="toc"><a href="#PMFGenerateOutputDocument.28.29">PMFGenerateOutputDocument()</a></li>
<li class="toc"><a href="#PMFGetUserEmailAddress.28.29">PMFGetUserEmailAddress()</a></li>
<li class="toc"><a href="#PMFGetNextAssignedUser.28.29">PMFGetNextAssignedUser()</a></li>
<li class="toc"><a href="#PMFDeleteCase.28.29">PMFDeleteCase()</a></li>
<li class="toc"><a href="#PMFCancelCase.28.29">PMFCancelCase()</a></li>
<li class="toc"><a href="#PMFAddInputDocument.28.29">PMFAddInputDocument()</a></li>
<li class="toc"><a href="#PMFAddCaseNote.28.29">PMFAddCaseNote()</a></li>
<li class="toc"><a href="#PMFGetCaseNotes.28.29">PMFGetCaseNotes()</a></li>
<ol class="toc">
<li class="toc"><a href="#Showing_Case_Notes_in_a_Grid">Showing Case Notes in a Grid</a></li>
<li class="toc"><a href="#Showing_Case_Notes_in_a_TextBox">Showing Case Notes in a TextBox</a></li>
</ol>
<li class="toc"><a href="#PMFInformationUser.28.29">PMFInformationUser()</a></li>
<li class="toc"><a href="#PMFRemoveMask.28.29">PMFRemoveMask()</a></li>
</ol>
</div></div>


<h2><span id="Overview">Overview</span></h2><p>ProcessMaker has made a number of its PHP functions available be used in <a href="../index.php/2.0/Triggers.html" title="Triggers">triggers</a> and <a href="../index.php/Using_Conditions.html" title="Using Conditions">conditions</a>. These functions are defined in the file <strong><tt>workflow/engine/classes/class.pmFunctions.php</tt></strong>. Many of these functions are wrappers for internal class methods used by ProcessMaker or in <a href="#Gulliver_Functions">Gulliver</a>, which is the development framework used by ProcessMaker. <!--To call ProcessMaker's internal functions and classes in triggers and plugins, see <a href="/index.php/Internal_Functions_and_Classes" title="Internal Functions and Classes">Internal Functions and Classes</a>.--></p>

<h2><span id="Date_Functions">Date Functions</span></h2>
<h3><span id="formatDate.28.29">formatDate()</span></h3><p><code>formatDate()</code> formats a date string according to a given date format and given language. Note that ProcessMaker stores the input in <a href="../index.php/2.0/Dates.html" title="2.0/Dates">date</a> fields in DynaForms as strings.</p>
<codeblock><i>string</i> <strong>formatDate</strong>(<i>string</i> date, <i>string</i> format, <i>string</i> language='en')
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>date</strong>: The input date to be reformatted. The input date must be a string in the format <code>'yyyy-mm-dd'</code> or <code>'yyyy-mm-dd h:i:s'</code>, such as <code>'2015-12-31'</code> or <code>'1998-02-07 22:50:08'</code>. This is the same format used to store dates and datetimes by the MySQL database and <a href="../3.0/Datetime_Control.html">datetime</a> fields in DynaForms.</li>
<li><i>string</i> <strong>format</strong>: The format of the date which will be returned. It can contain the following codes:
<ul>
<li><code>yyyy</code> - shows the year with four numbers (e.g. it shows the year 2008 as <code>2008</code>)
<li><code>yy</code> - shows the year with two numbers (e.g. it shows the year 2008 as <code>08</code>)
<li><code>mm</code> - shows the month with two numbers (e.g. it shows June as <code>06</code>)
<li><code>m</code> - shows the month with a simple number (e.g. it shows June as <code>6</code>)
<li><code>M</code> - shows the word for the month in the selected language (e.g. if the month is June, it shows <code>June</code> in English and <code>junio</code> in Spanish)
<li><code>dd</code> - shows the month with two numbers (e.g. the first day of the month is <code>01</code>)
<li><code>d</code> - shows the month with a simple number (e.g. the first day of the month is <code>1</code>)
<li><code>h</code> - shows the hours with two numbers in a 24 hour clock (e.g. 2pm is <code>14</code>)
<li><code>i</code> - shows the minutes with two numbers (e.g. first minute is <code>01</code>)
<li><code>s</code> - shows the seconds with two numbers (e.g. first second is <code>01</code>)
</ul>
</li>
<li><i>string</i> <strong>language</strong>: The language in which to reformat the date. It can be <code>'en'</code> (English), <code>'es'</code> (Spanish) or <code>'fa'</code> (Persian). If not included, English is set as a default language.</li></ul>
<p><strong>Return value:</strong></p>

<ul><li><i>string</i></code>: It returns the passed date according to the given date format.</li></ul>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> For other languages, use PHP's <a  href="http://www.php.net/manual/en/function.strftime.php">strftime()</a> function. See <a href="../index.php/2.0/Dates.html#Formatting_Dates_in_Other_Locales" title="2.0/Dates">Formatting Dates in Other Locales</a>.</font></p>
<p><strong>Examples:</strong></p>
<p>The value of @@textBox will be <code>'June 11, 2008'</code>:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>textBox <span style="color: #339933;">=</span> formatDate<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'2008-06-11'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'M dd,yyyy'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'en'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>The value of @@textBox will be <code>'7 de Junio del 2008'</code>:</p>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">@@textBox = formatDate('2008-06-07', 'd de M del 2008', 'es');</div></div>

<p>The value of @@textBox will be <code>'07/06/08 06:45:04'</code>:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>textBox <span style="color: #339933;">=</span> formatDate<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'2008-06-07 06:45:04'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'dd/mm/yy h:i:s'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>(in this example, the language parameter is omitted and English is used by default)</p>


<h3><span id="getCurrentDate.28.29">getCurrentDate()</span></h3>
<p><code>getCurrentDate()</code> retrieves the current date in the format "yyyy-mm-dd", with leading zeros in the month and day if less than 10. This function is equivalent to PHP's <code>date("Y-m-d")</code>.</p>

<codeblock><i>string</i> <strong>getCurrentDate</strong>()
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li>This function does not need any parameter.</li></ul>
<p><strong>Return value:</strong></p>
<ul><li><i>string</i></code>: It returns the current date as a string value.</li></ul>
<p><strong>Example:</strong></p>
<p>If the current date is December 16, 2009:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>myTextBox <span style="color: #339933;">=</span> getCurrentDate<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>The value of <code>@@mytextBox</code> will be <code>'2009-12-16'</code>.</p>

<h3><span id="getCurrentTime.28.29">getCurrentTime()</span></h3>
<p><code>getCurrentTime()</code> returns a string with the current time in the format "hh:mm:ss" with leading zeros when the hours, minutes or seconds are less than 10. The hour is expressed in the 24 hour format (military time) and is a number between 00 and 23. This function is equivalent to PHP's <span class="geshifilter"><code class="php geshifilter-php"><a href="http://php.net/date"><span style="color: #990000;">date</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'H:i:s'</span><span style="color: #009900;">&#41;</span></code></span>.</p>

<codeblock><i>string</i> <strong>getCurrentTime</strong>(<i>void</i>)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li>This function does not need any parameters.</li></ul>
<p><strong>Return value:</strong></p>
<ul><li><strong>string</strong>: The function returns the current time as a string.</li></ul>
<p><strong>Example:</strong></p>
<p>If the current time is 9:13 am, then:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>curTime <span style="color: #339933;">=</span> getCurrentTime<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>The value of the <code>@@curTime</code> will be <code>'09:13:23'</code>.</p>

<h3><span id="literalDate.28.29">literalDate()</span></h3>
<p><code>literalDate()</code> returns a specified date written out in a given language, (e.g, English: <code>"2008-06-11"</code> returns <code>"June 11, 2008"</code>, Spanish: <code>"2008-06-11"</code> returns <code>"11 de Junio de 2008"</code>).</p>

<codeblock><i>string</i> <strong>literalDate</strong>(<i>string</i> date, <i>string</i> Language='en')
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>date</strong>: The input date in standard format (yyyy-mm-dd) that is a string.</li>
<li><i>string</i> <strong>Language</strong>: The language to display, which can be 'en' (English) or 'es' (Spanish). If not included, then it will be English by default.</li></ul>
<p><strong>Return value:</strong></p>
<p>The literal date is returned as a string.</p>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> For other languages, use PHP's <a  href="http://www.php.net/manual/en/function.strftime.php">strftime()</a> function. See <a href="../index.php/2.0/Dates.html#Formatting_Dates_in_Other_Locales" title="2.0/Dates">Formatting Dates in Other Locales</a>.</font></p>

<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>textBox <span style="color: #339933;">=</span> literalDate<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;2009-12-17&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;en&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>The returned value stored in <code>@@textBox</code> will be <code>'December 17, 2009'</code>.</p>

<h2><span id="String_Functions">String Functions</span></h2>
<h3><span id="capitalize.28.29">capitalize()</span></h3>
<p><code>capitalize()</code> converts the first letter in each word into an uppercase letter. Subsequent letters in each word are changed into lowercase letters.</p>

<codeblock> <i>string</i> <strong>capitalize</strong>(<i>string</i> textToConvert)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>textToConvert</strong>: The string to capitalize.</li></ul>
<p><strong>Return value:</strong></p>
<ul><li><i>string</i></code>: It returns the introduced text with the first letter capitalized in each word and the subsequent letters into lowercase letters.</li></ul>
<p><strong>Example:</strong></p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>phrase1 <span style="color: #339933;">=</span> capitalize<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;hello world&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>phrase2 <span style="color: #339933;">=</span> capitalize<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;hElLo wOrLd&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>Both <code>@@phrase1</code> and <code>@@phrase2</code> will be set to <code>"Hello World"</code>.</p>

<h3><span id="lowerCase.28.29">lowerCase()</span></h3>
<p><code>lowerCase()</code> returns a string with all the letters converted into lower case letters.</p>

<codeblock><i>string</i> <strong>lowerCase</strong>(<i>string</i> textToConvert)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><code><i>string</i> <b>textToConvert</b></code>: A string to convert to lower case letters.</li></ul>

<p><strong>Return value:</strong></p>
<ul><li>The function returns a string with the text converted into lower case letters.</li></ul>

<p><strong>Example:</strong></p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>phrase1 <span style="color: #339933;">=</span> lowerCase<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'HELLO WORLD'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>phrase2 <span style="color: #339933;">=</span> lowerCase<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'HeLlO WoRlD'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>Both <code>@@phrase1</code> and <code>@@phrase2</code> will be set to <code>"hello world"</code>.</p>

<h3><span id="upperCase.28.29">upperCase()</span></h3>
<p><code>upperCase()</code> returns a string converted into all UPPERCASE letters.</p>

<codeblock><i>string</i> <strong>upperCase</strong>(<i>string</i> textToConvert)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>textToConvert</strong>: A string to convert to UPPERCASE letters.</li></ul>
<p><strong>Return value:</strong><br>A string converted into UPPERCASE letters.</p>

<p><strong>Example:</strong></p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>phrase1 <span style="color: #339933;">=</span> upperCase<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'hello world'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>phrase2 <span style="color: #339933;">=</span> upperCase<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'helLO WORld'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>Both <code>@@phrase1</code> and <code>@@phrase2</code> will be set to <code>"HELLO WORLD"</code>.</p>

<h2><span id="Database_Functions">Database Functions</span></h2>

<h3><span id="userInfo.28.29">userInfo()</span></h3>
<p><code>userInfo()</code> returns an array with the information about a particular registered user in ProcessMaker. This information is stored in the <strong><tt>wf_&lt;WORKFLOW&gt;.USERS</tt></strong> table.</p>

<codeblock><i>array</i> <strong>userInfo</strong>(<i>string</i> USER_ID)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>USER_ID</strong>: The user's unique ID, which can be found in the following ways:
<ul><li>Get the UID of the currently logged-in user with the <code>@@USER_LOGGED</code> system variable or <span class="re0" style="color: rgb(0, 0, 136);">$_SESSION</span>[</span><span class="st_h" style="color: rgb(0, 0, 255);">'USER_LOGGED'</span>]</span></span>.</li>
<li>Use the <a href="#PMFUserList.28.29">PMFUserList()</a> or <a href="../index.php/Simple_Trigger_Web_Services.html#WSUserList.28.29" title="Simple Trigger Web Services">WSUserList()</a> functions, or the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#userList.28.29" title="ProcessMaker WSDL Web Services">userList()</a> web service.</li>
<li>Query the <strong><tt>wf_&lt;WORKSPACE&gt;.USERS.USR_UID</tt></strong> field in the database with <a href="#executeQuery.28.29">executeQuery()</a>.</li></ul></li></ul>
<p><strong>Return Value:</strong><br>An associative array with the following keys:<br></p> 

<table class="codecolumn">
<tr><td>array( </td><td></td></tr>
<tr><td>   "username", </td><td>The user's username, which is used to login to ProcessMaker.</td></tr>
<tr><td>
   "firstname", </td><td>The user's first name.</td></tr>
<tr><td>
   "lastname", </td><td>The user's last name.</td></tr>
<tr><td>   "mail", </td><td>The user's email address.</td></tr>
<tr><td>   "status", </td><td>The user's status, which can be 'ACTIVE', 'INACTIVE', or 'VACATION'. Only users with 'ACTIVE' status are allowed to login.</td></tr>
<tr><td>   "address", </td><td>The user's address. If more than one line long, this will contain "\n" (new line characters).</td></tr>
<tr><td>   "phone", </td><td> The user's telephone number.</td></tr>
<tr><td>   "fax", </td><td>The user's fax number.</td></tr>
<tr><td>   "cellular", </td><td>The user's cellular telephone number.</td></tr>
<tr><td>   "birthday", </td><td>The user's birthdate in "YYYY-MM-DD" format.</td></tr>
<tr><td>   "country", </td><td>The user's country.</td></tr>
<tr><td>   "city" </td><td>The user's city.</td></tr>
<tr><td>)         </td><td></td></tr>
</table>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> It is recommended to use the <a href="#PMFInformationUser.28.29">PMFInformationUser()</a> function which returns more complete information than the <code>userInfo()</code> function.</font></p>

<p><strong>Examples:</strong></p>
<p>1. Look up the phone number of the currently logged in user and assign it to a case variable named @@Phone which will be displayed in a subsequent DynaForm field:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">&nbsp;<span style="color: #000088;">$arrayUser</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<span style="color: #339933;">@@</span>Phone <span style="color: #339933;">=</span> <span style="color: #000088;">$arrayUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'phone'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></div>

<p>2. Look up the address and city of user whose username is "jdoe":</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">&nbsp;<span style="color: #000088;">$username</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'jdoe'</span><span style="color: #339933;">;</span> <br />
&nbsp;<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;select USR_UID from USERS where USR_USERNAME='<span style="color: #006699; font-weight: bold;">$username</span>'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<span style="color: #000088;">$arrayUser</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'USR_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<span style="color: #339933;">@@</span>Address <span style="color: #339933;">=</span> <span style="color: #000088;">$arrayUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'address'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$arrayUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'city'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></div>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> The <code>userInfo()</code> function does not return information</a> about the user's region, photo, resume, role, calendar, replacedby, supervisor or department. This information can be looked up <!--with the <a href="/index.php/Internal_Functions_and_Classes#Users::Load.28.29" title="Internal Functions and Classes">Users::Load()</a> method or -->by querying the <strong><tt>wf_&lt;WORKSPACE&gt;.USERS</tt></strong> table with the <a href="#executeQuery.28.29">executeQuery()</a> function, as shown in the example below:</font></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$userID</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$lang</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>SYS_LANG<span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>userDepartment <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>userSupervisor <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>userRegion <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>userReplacedBy <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>userRole <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">//look up department name in the current system language:</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT C.CON_VALUE AS DEPT FROM CONTENT C, USERS U WHERE U.USR_UID='<span style="color: #006699; font-weight: bold;">$userID</span>' AND <br />
&nbsp; &nbsp;U.DEP_UID = C.CON_ID AND C.CON_CATEGORY='DEPO_TITLE' AND C.CON_LANG='<span style="color: #006699; font-weight: bold;">$lang</span>'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&amp;&amp;</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>userDepartment <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'DEPT'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #666666; font-style: italic;">//Look up the user's role, supervisor and who replaces the user</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT USR_ROLE, USR_REPORTS_TO, USR_REPLACED_BY FROM USERS WHERE USR_UID = '<span style="color: #006699; font-weight: bold;">$userID</span>'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&amp;&amp;</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>userRole <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'ROL_CODE'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$aInfo</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'USR_REPORTS_TO'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>userSupervisor <span style="color: #339933;">=</span> <span style="color: #000088;">$aInfo</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'firstname'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">' '</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$aInfo</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'firstname'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">' ('</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$aInfo</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'username'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">')'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><a href="http://php.net/empty"><span style="color: #990000;">empty</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'USR_REPLACED_BY'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$aReplace</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'USR_REPLACED_BY'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">@@</span>userReplacedBy <span style="color: #339933;">=</span> <span style="color: #000088;">$aReplace</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'firstname'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">' '</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$aReplace</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'firstname'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">' ('</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$aReplace</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'username'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">')'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span> &nbsp;<br />
<span style="color: #666666; font-style: italic;">//Look up the user's region (or state):</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT S.IS_NAME FROM USERS U, ISO_SUBDIVISION S WHERE U.USR_UID='<span style="color: #006699; font-weight: bold;">$userID</span>' AND U.USR_COUNTRY=S.IC_UID <br />
&nbsp; &nbsp;AND U.USR_CITY=S.IS_UID&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&amp;&amp;</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>userRegion <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'IS_NAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="executeQuery.28.29">executeQuery()</span></h3>
<p><code>executeQuery()</code> executes a <a  href="http://en.wikipedia.org/wiki/SQL">SQL</a> statement in a <a href="../index.php/Database_Connections.html" title="Database Connections">database connection</a> or in one of ProcessMaker's <a href="../index.php/ProcessMaker_Database_Model.html" title="ProcessMaker Database Model">internal databases</a>.</p>

<codeblock><i>variant</i> <strong>executeQuery</strong>(<i>string</i> SqlStatement, <i>string</i> DBConnectionUID='workflow')
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><code><i>string</i> <strong>SqlStatement</strong></i></code>: The SQL statement to be executed, which must begin with SELECT, INSERT, UPDATE, DELETE, EXECUTE, EXEC, SHOW, DESCRIBE, EXPLAIN or BEGIN. To learn basic SQL syntax, see <a  href="http://www.w3schools.com/SQl/default.asp">this tutorial</a>.<br>Do NOT include the database name in the SQL statement. For example, use <code>"SELECT * FROM USERS"</code>, instead of <code>"SELECT * FROM wf_workflow.USERS"</code>. SQL key words such are "SELECT" and "WHERE" are <i>case insensitive</i> and can be written as "select" and "Where". If ProcessMaker is installed in Windows, the table and field names in its MySQL databases are also <i>case insensitive</i> by default, but in UNIX/Linux they are <i>case sensitive</i> by default (although this can be changed with the <a  href="http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_lower_case_table_names%7C"><tt>lower_case_table_names</tt></a> setting). If consulting ProcessMaker databases, it is recommended that all table and field names be in UPPERCASE in the SQL statement, so the processes will be exportable between Windows and UNIX/Linux.</li>
<li><code><i>string</i> <strong>DBConnectionUID</strong></code>: <i>Optional.</i> The unique ID of the database connection where the SQL statement will be executed. The unique ID is a string of 32 hexadecimal numbers to uniquely identify database connections, which can be found by opening a process, going to <strong>DATABASE CONNECTIONS</strong>, and clicking on its <strong>Show ID</strong> button in the list.<br><br>
If this parameter is not included, the SQL statement will execute by default in the <strong><tt>wf_&lt;WORKSPACE&gt;</tt></strong> database of the current workspace, which is named <b><tt>wf_workflow</tt></b> by default. In ProcessMaker 3, each workspace has only 1 database by default, but each workspace upgraded from version 2 will have three databases by default, which can be accessed:
<ul>
<li><code>'workflow'</code> for the <strong><tt>wf_&lt;WORKSPACE&gt;</tt></strong> database.
<li><code>'rbac'</code> for the <strong><tt>rb_&lt;WORKSPACE&gt;</tt></strong> database.
<li><code>'rp'</code> for the <strong><tt>rp_&lt;WORKSPACE&gt;</tt></strong> database.
</ul>
To access a ProcessMaker database in a workspace which is not the current workspace, create a Database Connection to the database and use its UID.</li>
</ul>

<p><strong>Return value:</strong></p>
<p>If executing a SELECT, EXECUTE, EXEC, SHOW, DESCRIBE, EXPLAIN or BEGIN statement, it returns an associative array of associative arrays in the format:</p>

<codeblock>array(
  '1' => array(
     '<i>FIELD1</i>' => '<i>VALUE1</i>', 
     '<i>FIELD2</i>' => '<i>VALUE2</i>', 
     ...     
   ),
   '2' => array(
     '<i>FIELD1</i>' => '<i>VALUE1</i>', 
     '<i>FIELD2</i>' => '<i>VALUE2</i>', 
     ...     
   ),
   ...
)
</codeblock>

<p>The counting of the outer array starts from <strong>1</strong> (not <strong>0</strong> like a normal PHP array). All field values returned by <code>SELECT</code> statements will be strings, regardless of their original type in the database. In most cases, it is not necessary to explicitly convert the values with type casting, because PHP will gracefully convert integers and floating point numbers automatically if a field value is used in a mathematical operation. <a href="../3.0/Datetime_Control.html">Datetime</a> controls in DynaForms treat dates as strings, so date values generally do not need to be converted either.</p>
<p>For <code>INSERT</code> statements, the function returns <code>1</code> if the operation was successful; otherwise it returns <code>0</code>.</p>
<p>For <code>UPDATE</code> and <code>DELETE</code> statements, will return the number of affected rows.</p>
<p>If an error occurs in the database query, it returns a string containing the error message. If an error occurs, subsequent <code>executeQuery()</code> function calls to the same database in the same trigger will not execute correctly.</p>
<p>If the SQL statement starts with unrecognized SQL command, then <code>executeQuery()</code> will return <code>FALSE</code>.</p>

<div style="margin-left:25px;"><p><font color=green><b>Note:</b></font> <font color=dimgrey>If an error occurred in the SQL query, ProcessMaker will add an  <code>@@__ERROR__</code> variable to the case with the contents <code>"It is not possible to execute the query. Please contact your system administrator"</code>, which can be viewed when <a href="../3.0/Triggers.html#Enabling_Debug_Mode">Debug Mode</a> is enabled.</p>
<p>MySQL's error message will be placed in the <code>@@__ERROR__</code> variable. Do <b>NOT</b> enable <code>debug_sql</code> in the <b><tt>env.ini</tt></b> file, since it will suppress MySQL error messages.</font></p></div>  

<p><strong>Example 1:</strong></p>
<p>Lookup information about the logged-in ProcessMaker user:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$uid</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">;</span> &nbsp; <span style="color: #666666; font-style: italic;">#assign to normal PHP variable to insert in string <br />
</span><span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT * FROM USERS WHERE USR_UID='<span style="color: #006699; font-weight: bold;">$uid</span>'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>UserFirstName <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'USR_FIRSTNAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>UserLastName <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'USR_LASTNAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span> </div></div>

<p><span style="color: green;"><strong>Note 1:</strong></span></p>
<div style="margin-left: 25px;"><p><font color=dimgrey>ProcessMaker system and case variables can NOT be inserted in double quoted strings, like this:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT * FROM USERS WHERE USR_UID='@@USER_LOGGED'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> </div></div>

<p>Instead, ProcessMaker system and case variables need to be first assigned to normal PHP variables in order to be inserted inside a double quoted string, like this:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$uid</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">;</span> &nbsp; <span style="color: #666666; font-style: italic;">#assign to normal PHP variable to insert in string <br />
</span><span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT * FROM USERS WHERE USR_UID='<span style="color: #006699; font-weight: bold;">$uid</span>'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> </div></div>

<p>Also note that single quoted strings are treated as literal strings, so PHP variables can <b>NOT</b> be inserted in a single quoted string like this:</font></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'SELECT * USERS WHERE USR_UID=\'$uid\''</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
</div>

<p><span style="color: green;"><strong>Note 2:</strong></span></p>
<div style="margin-left: 25px;"><p><font color=dimgrey>String, date and datetime values in SQL queries should be enclosed within single quoted strings, while integer and floating-point values should NOT be enclosed within single quotes. If needing to insert an apostrophe in a string, escape it with a backslash. For example:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT FIRSTNAME, LASTNAME FROM CLIENTS WHERE ID=8734 AND STATUS='Don\'t wait'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>Some databases like MySQL will accept double quotation marks in place of single quotation marks around strings and dates, but they are not recommended because it is not part of the SQL standard.</font></p></div>

<p><strong>Example 2:</strong></p>
<p>Lookup all the users in a ProcessMaker group named "accounting":</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT U.USR_FIRSTNAME AS FNAME, U.USR_LASTNAME AS LNAME &quot;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;FROM USERS U, CONTENT C, GROUP_USER GU WHERE &quot;</span> <span style="color: #339933;">.</span> <br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;U.USR_UID = GU.USR_UID AND GU.GRP_UID = C.CON_ID AND &quot;</span> <span style="color: #339933;">.</span> <br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;CON_VALUE = 'accounting'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'workflow'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">#loop to extract the returned rows<br />
</span> &nbsp; <span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$row</span><span style="color: #009900;">&#41;</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">@@</span>GroupMembers<span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$row</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FNAME'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">' '</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$row</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'LNAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p><strong>Example 3:</strong></p>
<p>The Unique ID for the database connection is different in each process. If planning to reuse the same same code in multiple processes, this code shows how to look up the unique ID for a database connection external database named "company_data" with the table "clients" at 192.168.2.100. This example also shows how to insert, update and delete records in the database:

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">#first look up the UID of the database connection<br />
</span><span style="color: #000088;">$proc</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>PROCESS<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT DBS_UID FROM DB_SOURCE WHERE PRO_UID='<span style="color: #006699; font-weight: bold;">$proc</span>' &quot;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;AND DBS_DATABASE_NAME='company_data' AND DBS_SERVER='192.168.2.100'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> or <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <br />
&nbsp; &nbsp;<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Error: Unable to lookup UID for database 'company_data'!&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
<span style="color: #000088;">$db</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'DBS_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;INSERT INTO CLIENTS (FNAME, LNAME, COMPANY) VALUES ('Jane', 'Doe', NULL)&quot;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span>executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #339933;">,</span> <span style="color: #000088;">$db</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>dbError <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;Unable to insert record into company_data.client table&quot;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;UPDATE CLIENTS SET COMPANY='Acme Inc.' WHERE FNAME='Jane' AND LNAME='Doe'&quot;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span>executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #339933;">,</span> <span style="color: #000088;">$db</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>dbError <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;Unable to update the company_data.CLIENTS table&quot;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;DELETE FROM CLIENTS WHERE FNAME='Jane' AND LNAME='Doe'&quot;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span>executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #339933;">,</span> <span style="color: #000088;">$db</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #339933;">@@</span>dbError <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;Unable to delete record in company_data.client table&quot;</span><span style="color: #339933;">;</span></div></div>

<p><strong>Example 4:</strong></p>
<p>In this example, <code>executeQuery()</code> is used to look up the next available case to which the logged in user is assigned. If a case is found, then the web browser will automatically be redirected to that case with the <tt><b>G::header()</b></tt> function, otherwise the browser will be redirected to the Case List page. Before redirecting the browser, the current task is automatically routed to the next task in the process with <a href="#PMFDerivateCase.28.29">PMFDerivateCase()</a>. This trigger code can be added after the last step in the task, to avoid the user having to see the screen which displays the next assigned user and clicking "Continue".</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$userId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> &nbsp;<span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT APP_UID, DEL_INDEX FROM APP_DELEGATION &quot;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;WHERE USR_UID = '<span style="color: #006699; font-weight: bold;">$userId</span>' AND DEL_THREAD_STATUS = 'OPEN' &quot;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;ORDER BY DEL_DELEGATE_DATE DESC&quot;</span><span style="color: #339933;">;</span> <br />
<span style="color: #000088;">$queryResult</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$queryResult</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&amp;&amp;</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$queryResult</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$caseURL</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'cases_Open?APP_UID='</span> <span style="color: #339933;">.</span> &nbsp;<span style="color: #000088;">$queryResult</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_UID'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">'&amp;DEL_INDEX='</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$queryResult</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'DEL_INDEX'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$caseURL</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'cases_List'</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
<span style="color: #666666; font-style: italic;">//Route the current case to the next task in process:</span><br />
PMFDerivateCase<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #339933;">@%</span>INDEX<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">//Redirect the web browser to a new location: &nbsp;</span><br />
G<span style="color: #339933;">::</span><a href="http://php.net/header"><span style="color: #990000;">header</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;location: <span style="color: #006699; font-weight: bold;">$caseURL</span>&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <br />
<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p><strong>Other examples:</strong></p>
<p>For an example using <code>executeQuery()</code> to access information about DynaForm file objects and write files to a database, see <a href="../index.php/2.5.X/DynaForms%23The_DynaForm_Editor_Toolbar.html#Accessing_Files_with_PHP" title="DynaForm Fields">Accessing Files with PHP</a>. For an example using <code>executeQuery()</code> to populate a grid, see <a href="../index.php/2.5.X/DynaForms%23The_DynaForm_Editor_Toolbar.html#Accessing_Grids_with_PHP" title="DynaForm Fields">Accessing Grids with PHP</a>.</p>

<h2><span id="Grid_Functions">Grid Functions</span></h2>
<h3><span id="orderGrid.28.29">orderGrid()</span></h3>
<p><code>orderGrid()</code> sorts a grid according to a specified field in ascending or descending order.</p>

<codeblock><i>array</i> <strong>orderGrid</strong>(<i>array</i> gridName, <i>string</i> field, <i>string</i> criteria='ASC')
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>array</i> <strong>gridName</strong>: A grid, which is a numbered array containing associative arrays with field names and their values, it has to be set like this "@=".</li>
<li><i>string</i> <strong>field:</strong> The name of the field by which the grid will be sorted.</li>
<li><i>string</i> <strong>criteria:</strong> Optional parameter. The order which can either be 'ASC' (ascending) or 'DESC' (descending). If not included, 'ASC' will be used by default.</li></ul>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> The result of this function has to be saved in a Grid in order to see the sorted information, it can be in the same grid or in another grid.</font></p>
<p><strong>Example:</strong></p>
<p>If your grid is like this:</p>

<codeblock>MyGrid = 
(         [firstname][lastname]	
    [1] ( 'erik',    'ortiz'   )
    [2] ( 'ana',     'castro'  )		
    [3] ( 'naira',   'jimenez' )
    [4] ( 'jessica', 'martinez')
)
</codeblock>

<p>Then sort the grid by the 'firstname' field:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@=</span>MyGrid <span style="color: #339933;">=</span> orderGrid<span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>MyGrid<span style="color: #339933;">,</span> <span style="color: #0000ff;">'firstname'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'ASC'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>The result will be the following grid:</p>

<codeblock>MyGrid = 
(         [firstname][lastname]	
    [1] ( 'ana',     'castro'  )		
    [2] ( 'erik',    'ortiz'   )
    [3] ( 'jessica', 'martinez')
    [4] ( 'naira',   'Jimenez' )
)
</codeblock>

<h3><span id="evaluateFunction.28.29">evaluateFunction()</span></h3>
<p><code>evaluateFunction()</code> executes a function on each row in a grid, using the grid fields in operations such as <code>+</code> (addition), <code>-</code> (subtraction), <code>*</code> (multiplication), <code>/</code> (division), and <code>%</code> (remainder). The formula can also use <code>( )</code> to group together operations.</p>

<codeblock> <i>array</i> <strong>evaluateFunction</strong>(<i>array</i> gridName, <i>string</i> Expression)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul>
<li><code><i>grid</i> <strong>gridName</strong></code>: The input grid.</li>
<li><code><i>string</i> <strong>Expression</strong></code>: The input expression for the operation among grid fields. The expression always must be enclosed within double quotes, otherwise a fatal error will occur.</li>
</ul>
<p><strong>Return Value:</strong><br>This function returns an associative array of associative arrays, which is how grids are internally stored in ProcessMaker.</p>
<p><strong>Example:</strong></p>
<The following grid contains 4 rows with 'name', 'salary', 'discount' and 'total' fields:</p>
<codeblock>MyGrid = 
(          [name]   [salary] [discount] [total]	
     [1] ( 'ana',   1000,    100,       0     )		
     [2] ( 'erik',  2000,    0,         0     )
     [3] ( 'jessi', 1200,    400,       0     )
     [4] ( 'naira', 2000,    0,         0     )
)
</codeblock>

<p>The following function is executed, which subtracts the 'salary' field from the 'discount' field in each row and assigns the result to the 'total' field:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@=</span>MyGrid <span style="color: #339933;">=</span> evaluateFunction<span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>MyGrid<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;@#total = @#salary - @#discount&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>The result will be the following grid:</p>

<codeblock>MyGrid = 
(          [name]   [salary] [discount] [total]	
     [1] ( 'ana',   2000,    100,       1900  )		
     [2] ( 'erik',  2000,    0,         2000  )
     [3] ( 'jessi', 1200,    400,       800   )
     [4] ( 'naira', 2000,    0,         2000  )
)
</codeblock>

<h2><span id="ProcessMaker_Functions">ProcessMaker Functions</span></h2>
<p>These ProcessMaker Functions are generally named <code>PMF...()</code> and are designed to control ProcessMaker from inside a trigger. These functions are executed with the permissions of the currently logged-in user who is running the case.</p>
<p>If needing to execute these functions as a different user, use the corresponding <a href="../index.php/ProcessMaker_WSDL_Web_Services.html" title="ProcessMaker WSDL Web Services">WSDL Web Services</a> or <a href="#">REST endpoints</a>.</p>
<h3><span id="PMFTaskCase.28.29">PMFTaskCase()</span></h3>
<p><code>PMFTaskCase()</code> returns all the tasks for the specified case which have open delegations.</p>

<codeblock><i>array</i> <strong>PMFTaskCase</strong>(<i>string</i> caseId)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>caseId</strong>: The unique ID for a case.</li></ul>
<p><strong>Return Value:</strong></p>
<p>A list of tasks, with the following structure:</p>

<codeblock>[0] <i>array</i>
(
   <i>associative array</i>
   (
      [<i>string</i> guid]
      [<i>string</i> name]
   )
)
...
</codeblock>

<p><strong>Where:</strong></p>
<ul><li><i>string</i> <strong>guid</strong>: The unique ID of a task.</li>
<li><i>string</i> <strong>name</strong>: The name of a task.</li></ul>
<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">&nbsp;<span style="color: #339933;">@@</span>pendingTasksForCase <span style="color: #339933;">=</span> PMFTaskCase<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFTaskList.28.29">PMFTaskList()</span></h3>
<p><code>PMFTaskList()</code> returns a list of tasks which the specified user has initiated.</p>

<codeblock><i>array</i> <strong>PMFTaskList</strong>(<i>string</i> userId)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>userId</strong>: The unique ID of a user.</li></ul>
<p><strong>Return value:</strong></p>
<p>An array of tasks, with the following structure:</p>

<codeblock>
[0] <i>array</i>
(
   <i>associative array</i>
   (
      [<i>string</i> guid]
      [<i>string</i> name]
   )
)
...
</codeblock>

<p><strong>Where:</strong></p>
<ul><li><i>string</i> <strong>guid</strong>: The unique ID of a task.</li>
<li><i>string</i> <strong>name</strong>: The name of a task.</li></ul>

<p><strong>Example:</strong></p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>MyInitialTasks <span style="color: #339933;">=</span> PMFTaskList<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFUserList.28.29">PMFUserList()</span></h3>
<p><code>PMFUserList()</code> returns a list of users whose status is set to "ACTIVE" for the current workspace.</p>

<codeblock> <i>array</i> <strong>PMFUserList</strong>(<i>void</i>)
</codeblock>

<p><strong>Parameters:</strong></p>
<p>None.</p>
<p><strong>Return Value:</strong></p>
<p>An array of users, with the following structure:</p>

<codeblock>[0] <i>array</i>
(
   <i>associative array</i>
   (
      [<i>string</i> guid]
      [<i>string</i> name]
   )
)
...
</codeblock>

<p><strong>Where:</strong></p>
<ul><li><i>string</i> <strong>guid</strong>: The unique ID of a user.</li>
<li><i>string</i> <strong>name</strong>: The username of a user.</li></ul>
<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>GRID_USERS <span style="color: #339933;">=</span> PMFUserList<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFGroupList.28.29">PMFGroupList()</span></h3>
<p><code>PMFGroupList()</code> returns a list of <a href="../index.php/Managing_Users.html#Groups" title="Managing Users">groups</a> in the current workspace.</p>

<codeblock><i>array</i> <strong>PMFGroupList</strong>(<i>void</i>)
</codeblock>

<p><strong>Parameters:</strong></p>
<p>None.</p>
<p><strong>Return Value:</strong></p>
<p>An array of groups, with the following structure:</p>

<codeblock>[0] <i>array</i>
(
   <i>associative array</i>
   (
      [<i>string</i> guid]
      [<i>string</i> name]
   )
)
...
</codeblock>

<p><strong>Where:</strong></p>
<ul><li><i>string</i> <strong>guid</strong>: The unique ID of a group.</li>
<li><i>string</i> <strong>name</strong>: The name of a group.</li></ul>

<h3><span id="PMFRoleList.28.29">PMFRoleList()</span></h3>
<p><code>PMFRoleList()</code> returns a list of all the <a href="../index.php/2.0/Roles.html" title="Roles">roles</a> in the current workspace.</p>

<codeblock><i>array</i> <strong>PMFRoleList</strong>(<i>void</i>)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li>None.</li></ul>
<p><strong>Return Value:</strong></p>
<ul><li>This function returns an array of roles, with the following structure:</li></ul>

<codeblock>[0] <i>array</i>
(
   <i>associative array</i>
   (
      [<i>string</i> guid]
      [<i>string</i> name]
   )
)
...
</codeblock>

<p><strong>Where:</strong></p>
<ul><li><i>string</i> <strong>guid</strong>: The unique ID of a role.</li>
<li><i>string</i> <strong>name</strong>: The name of a role.</li></ul>
<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$GridRoles</span> <span style="color: #339933;">=</span> PMFRoleList<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
<span style="color: #666666; font-style: italic;">//Counting in the array starts from 1</span><br />
<span style="color: #339933;">@@</span>RoleName <span style="color: #339933;">=</span> <span style="color: #000088;">$GRID_ROLES</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'name'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFCaseList.28.29">PMFCaseList()</span></h3>
<p><code>PMFCaseList()</code> returns a list of the pending cases (i.e., cases which have a status of "To Do" or "Draft") for a specified user. Note that the specified user must be designated to work on the current task for these cases.</p>

<codeblock><i>array</i> <strong>PMFCaseList</strong>(<i>string</i> userId)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>userId</strong>: The unique ID of a user who is assigned to work on the cases.</li></ul>
<p><strong>Return Value:</strong></p>
<p>A list of cases, with the following structure:</p>

<codeblock>[0] <i>array</i>
(
   <i>associative array</i>
   (
      [<i>string</i> guid]
      [<i>string</i> name]
      [<i>string</i> status]
      [<i>int</i> delIndex]
   )
)
...
</codeblock>

<p><strong>Where:</strong></p>
<ul><li><i>string</i> <strong>guid</strong>: The unique ID for a case.</li>
<li><i>string</i> <strong>name</strong>: The label of a case.</li>
<li><i>string</i> <strong>status</strong>: The status of a case.</li>
<li><i>int</i> <strong>delIndex</strong>: The current delegation index.</li></ul>
<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>GRID_CASES <span style="color: #339933;">=</span> PMFCaseList<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFProcessList.28.29">PMFProcessList()</span></h3>
<p><code>PMFProcessList()</code> returns a list of processes for the current workspace.</p>

<codeblock><i>array</i> <strong>PMFProcessList</strong>(<i>void</i>)
</codeblock>

<p><strong>Parameters:</strong></p>
<p>None.</p>
<p><strong>Return Value:</strong></p>
<p>An array of associative arrays which contain the unique ID and title of processes. The array has the following structure:</p>

<codeblock>[0] <i>array</i>
(
   <i>associative array</i>
   (
      [<i>string</i> guid]
      [<i>string</i> name]
   )
)
...
</codeblock>

<p><strong>Where:</strong></p>
<ul><li><i>string</i> <strong>guid</strong>: The unique ID for a process.</li>
<li><i>string</i> <strong>name</strong>: The process title.</li></ul>
<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>ArrayProcesses <span style="color: #339933;">=</span> PMFProcessList<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFSendVariables.28.29">PMFSendVariables()</span></h3>
<p><code>PMFSendVariables()</code> sends an array of case variables to a specified case. These variables are stored in the <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_DATA</tt></strong> field and can be displayed by any subsequent DynaForm which has a field name which is the same as the case variable name.</p>

<codeblock><i>int</i> <strong>PMFSendVariables</strong>(<i>string</i> caseId, <i>array</i> variables)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>caseId</strong>: The unique ID of the case to receive the variable. Note that the case ID changes with each new task in the process. To send variables to the current case, use the system variable <code>@@APPLICATION</code>.</li>
<li><i>array</i> <strong>variables</strong>: An associative array to hold the case variables to send to the case. The keys are the case variable names and the values are the values of the case variables.</li></ul>
<p><strong>Return Value:</strong></p>
<p>Returns 1 if the variables were sent successfully to the case; otherwise, returns 0 if an error occurred.</p>
<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aData</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Model'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'Acme Blender #2'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Price'</span> <span style="color: #339933;">=&gt;</span> <span style="color:#800080;">27.40</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'OrderDate'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'2010-12-31'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFSendVariables<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #000088;">$aData</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFDerivateCase.28.29">PMFDerivateCase()</span></h3>

<p>
<table border="1" cellpadding="1" cellspacing="1" style="width: 100%;">
<tbody>
<tr>
<td>
<font color="red"><b>Warning:</b></font> <font color=dimgrey> Please, take into consideration that this function is NOT supported in ProcessMaker Mobile. It will be available in future versions.</font>
</td>
</tr>
</tbody>
</table>
</p>

<p><code>PMFDerivateCase()</code> derivates (routes) a case to the next task in the process.</p>

<codeblock><i>int</i> <strong>PMFDerivateCase</strong>(<i>string</i> caseId, <i>int</i> delegation, <i>boolean</i> executeTriggersBeforeAssigment=false, <i>string</i> userUID = null)
</codeblock>

<p><strong>Parameters:</strong><br>
<ul><li><i>string</i> <strong>caseId</strong>: The unique ID for the case to be routed, which can be found with <a href="#PMFCaseList.28.29">PMFCaseList()</a> or by querying the field <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_UID</tt></strong>. The case UID for the current case is stored in the system variable <code>@@APPLICATION</code>.</li>
<li><i>int</i> <strong>delegation</strong>: The delegation index for the task to be routed. The delegation index for the current case is stored in the system variable <code>@%INDEX</code>. Note that the delegation index changes with each new task in the case, so lookup the index before calling this function.</li>
<li><i>boolean</i> <strong>executeTriggersBeforeAssigment</strong>: <i>Optional parameter</i>. By default is set as <code>false</code>. If set to <strong><code>true</code></strong>, any triggers which are set to be fired before the case is assigned to the next user will be fired before routing the case. It is not recommended to set the value as true otherwise the function will generate an infinite loop. On the other hand, if this value is set as <strong><code>false</code></strong> the trigger will be executed before assignment .</li>
<li><i>string</i> <b>userUID</b>: <i>Optional parameter.</i> The unique ID of the user who is assigned to the task indicated by the <code>delIndex number</code>, which should be an open task. If not included or set to <code>null</code>, then it will be set to the unique ID of the current logged-in user.</li>
</ul>
</p>
<p><strong>Return Value:</strong><br>Returns <code>1</code> if new case was routed successfully; otherwise, returns <code>0</code> if an error occurred.</p>

<p><span style="color: red; font-size: 8pt;"><strong>Note 1:</strong></span> <br>If this function is called for the current task when running a case, then the case to be routed twice--once by <code>PMFDerivateCase()</code> and the second time by the interface running the case. To work around this problem, call the <a  href="http://php.net/manual/en/function.die.php">die()</a> function after <code>PMFDerivateCase()</code> to stop the processing and prevent the second derivation (routing). However, if <code>die()</code> is called after a DynaForm step, then it will stop the DynaForm data from getting committed to the database. In this case, use <a href="#PMFSendVariables.28.29">PMFSendVariables()</a> to save the data to the database before calling <code>PMFDerivateCase</code> and <code>die()</code>. See the example below.</p>
<p><span style="color: red; font-size: 8pt;"><strong>Note 2:</strong></span> <br>This function only works if the currently logged in user is assigned to the task indicated by the <code>delegation</code> parameter. If needing to route/derivate a task which is assigned to another user, login as that user with web services and use <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#routeCase.28.29" title="ProcessMaker WSDL Web Services">routeCase()</a> instead of <code>PMFDerivateCase()</code>. See this <a href="../index.php/Trigger_Examples.html#Skipping_the_Next_Task_in_a_Case" title="Trigger Examples">code example</a> for routing past the next task in the current case.</p>
<p><span style="color: red; font-size: 8pt;"><strong>Note 3:</strong></span> <br>The <code>PMFDerivateCase()</code> function can only route tasks which exist in the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DELEGATION</tt></strong> table and whose status is <code>'OPEN'</code>. In other words, this function can't be called on past tasks which are already closed and future tasks which don't yet exist. To route the <i>next</i> task in the case, which doesn't yet exist, see <a href="../index.php/Trigger_Examples.html#Skipping_the_Next_Task_in_a_Case" title="Trigger Examples">Skipping the Next Task in a Case</a>.</p>

<p><strong>Example 1:</strong><br>
Route the current case onto the next task in the process and redirect the web browser back to <b>Home > Inbox</b> to see the cases list:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">PMFDerivateCase<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #339933;">@%</span>INDEX<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
G<span style="color: #339933;">::</span><a href="http://php.net/header"><span style="color: #990000;">header</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Location: casesListExtJsRedirector&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p><strong>Example 2:</strong><br>
To route on a case immediately <i>after</i> a DynaForm step, the data from the DynaForm variables needs to be stored in the database with <code>PMFSendVariables()</code> before calling <code>die()</code>. For example, the DynaForm contains the variables "firstName", "lastName", "address" and "telephone" which need to be saved.</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aVars</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;firstName&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@@</span>firstName<span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;lastName&quot;</span> &nbsp;<span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@@</span>lastName<span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;address&quot;</span> &nbsp; <span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@@</span>address<span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;telephone&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@@</span>telephone<br />
<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFSendVariables<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #000088;">$aVars</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFDerivateCase<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #339933;">@%</span>INDEX<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
G<span style="color: #339933;">::</span><a href="http://php.net/header"><span style="color: #990000;">header</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Location: casesListExtJsRedirector&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p><font color=green><b>Note:</b></font> <font color=dimgrey>If the trigger is set <i>before</i> the next step (or before assignment if the last step in the task), then it is not necessary to call PMFSendVariables() because the variables from the DynaForm will have already been saved to the database.</font></p>

<p><strong>Example 3:</strong><br>
To avoid having to click on the <b>Continue</b> button at the end of a task, create the following trigger which is set <i>before assignment</i>: 
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">PMFDerivateCase<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #339933;">@%</span>INDEX<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>If the next task is assigned to the same user as the current task, then it can be opened directly without going to the Inbox. Create the following trigger and set it to execute <i>after routing</i>:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$nextIndex</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@%</span>INDEX <span style="color: #339933;">+</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span><br />
G<span style="color: #339933;">::</span><a href="http://php.net/header"><span style="color: #990000;">header</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Location:cases_Open?APP_UID=<span style="color: #006699; font-weight: bold;">$caseId</span>&amp;DEL_INDEX=<span style="color: #006699; font-weight: bold;">$nextIndex</span>&amp;action=draft&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFNewCaseImpersonate.28.29">PMFNewCaseImpersonate()</span></h3>
<p><code>PMFNewCaseImpersonate()</code> creates a new case with a user who can impersonate a user with the proper privileges. This function allows any user to create a new case and assign it to another user.</p>

<codeblock><i>int</i> <strong>PMFNewCaseImpersonate</strong>(<i>string</i> processId, <i>string</i> userId, <i>array</i> variables)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>processId</strong>: The unique ID of the process.</li>
<li><i>string</i> <strong>userId</strong>: The unique ID of the user.</li>
<li><i>array</i> <strong>variables</strong>: An associative array of the variables which will be sent to the case. The keys are the variable names and the values are the values of the case variables. If no variables are needed, then set to an empty array: <span class="kw3" style="color: rgb(153, 0, 0);">array</span>(</span>)</span></span></li>
<li><i>string</i> <strong>taskId</strong>: The unique ID of the task where the case will start. <strong><font color="dimgrey">Available in version 2.5.1 and later.</font></strong></li></ul>
<p><strong>Return Value:</strong></p>
<p>Returns <code>1</code> if new case was created successfully; otherwise, returns <code>0</code> if an error occurred.</p>
<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aData</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'varname1'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'varvalue1'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'varname2'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'varvalue2'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'varname3'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'varvalue3'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFNewCaseImpersonate<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>PROCESS<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">,</span> <span style="color: #000088;">$aData</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFNewCase.28.29">PMFNewCase()</span></h3>
<p><code>PMFNewCase()</code> creates a new case starting in the specified task.</p>

<codeblock><i>variant</i> <strong>PMFNewCase</strong>(<i>string</i> processId, <i>string</i> userId, <i>string</i> taskId, <i>array</i> variables)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>processId</strong>: The unique ID of the process, which can be found in the following ways:
<ul><li>Use the <code>@@PROCESS</code> system variable to get the unique ID of the current process.</li>
<li>Use the <a href="#PMFProcessList.28.29">PMFProcessList()</a> function or <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#processList.28.29" title="2.0/ProcessMaker WSDL Web Services">processList()</a> web service.</li>
<li>Query the <strong><tt>wf_&lt;WORKSPACE&gt;.PROCESS.PRO_UID</tt></strong> field in the database or use a query like:</li></ul></li></ul>

<dl><dd><dl><dd>SELECT CON_ID FROM CONTENT WHERE CON_CATEGORY='PRO_TITLE' AND CON_VALUE='Expense Report Process'</dd></dl></dd></dl>

<ul><li><i>string</i> <strong>userId</strong>: The unique ID of the user, which can be found in the following ways:
<ul><li>Use the @@USER_LOGGED system variable for the unique ID of the currently logged-in user.</li>
<li>Use the <a href="#PMFUserList.28.29">PMFUserList()</a> function or <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#userList.28.29" title="2.0/ProcessMaker WSDL Web Services">userList()</a> web service.</li>
<li>Query the <strong><tt>wf_&lt;WORKSPACE&gt;.USERS.USR_UID</tt></strong> field in the database.</li></ul></li>
<li><i>string</i> <strong>taskId</strong>: The unique ID of the task, which can be found in the following ways:
<ul><li>Use the <code>@@TASK</code> system variable for the unique ID of the current task.</li>
<li>Use the <a href="#PMFTaskList.28.29">PMFTaskList()</a> function or <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#taskList.28.29" title="2.0/ProcessMaker WSDL Web Services">taskList()</a> web service.</li>
<li>Query the <strong><tt>wf_&lt;WORKSPACE&gt;.TASK.TAS_UID</tt></strong> field in the database or get the starting task of the current process with the following query:</li></ul></li></ul>

<dl><dd><dl><dd>executeQuery("SELECT TAS_UID FROM TASK WHERE PRO_UID='" .@@PROCESS . "' AND TAS_START='TRUE'")</dd></dl></dd></dl>

<ul><li><i>array</i> <strong>variables</strong>: An associative array of the variables which will be sent to the case. The keys are the variable names and the values are the values of the case variables. If the case variable is a grid, then set the value to an associate array of associative arrays. See Example 3 below. If no variables are needed, then set to an empty array: <span class="kw3" style="color: rgb(153, 0, 0);">array</span>(</span>)</span></span></li></ul>
<p><strong>Return Value:</strong></p>
<p>If an error occurred, it returns zero. Otherwise, it returns a string with the case UID of the new case.</p>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong>
<p>The status of the new case will automatically be set to <code>"DRAFT"</code>. To change the status so the new case will appear in the user's inbox (instead of the draft box), set the value of the <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_STATUS</tt></strong> field to <code>"TO_DO"</code>. See Example 1 below.</p>
<p><strong>Example 1:</strong><br>Create a new case in the current process, designating the current user to work on the new case. The starting task ID is hard coded in the trigger code and no case variables are set in the new case. After creating the new case, change its status from <code>"DRAFT"</code> to <code>"TO_DO"</code>. <!--If an error occurs, display the error with the <a href="/index.php/Internal_Functions_and_Classes#G::SendMessageText.28.29" title="Internal Functions and Classes">G::SendMessageText()</a> function.--></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$taskId</span> &nbsp;<span style="color: #339933;">=</span> <span style="color: #0000ff;">'7766592404f358fb90dcdc9043579725'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//lookup the starting task's unique ID </span><br />
<span style="color: #000088;">$newCaseId</span> <span style="color: #339933;">=</span> PMFNewCase<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>PROCESS<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">,</span> <span style="color: #000088;">$taskId</span><span style="color: #339933;">,</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">//if a new case was created, change its status in the database</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$newCaseId</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;UPDATE APPLICATION SET APP_STATUS='TO_DO' WHERE APP_UID='<span style="color: #006699; font-weight: bold;">$newCaseId</span>'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #b1b100;">else</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$msg</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;Unable to create new case.&quot;</span> <span style="color: #339933;">.</span> <a href="http://php.net/isset"><span style="color: #990000;">isset</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>__ERROR__<span style="color: #009900;">&#41;</span> ? <span style="color: #339933;">@@</span>__ERROR__ <span style="color: #339933;">:</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">SendMessageText</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$msg</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'ERROR'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p><strong>Example 2:</strong><br>Look up the ID of a process named "Expense Report Process" and its starting task. Then, lookup all the users who are assigned to that starting task and randomly choose one to assign to the new case. Set the values of case variables named "Model", "Price" and "OrderDate" in the new case.</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">//Look up the process UID</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT CON_ID FROM CONTENT WHERE <br />
&nbsp; &nbsp;CON_CATEGORY='PRO_TITLE' AND CON_VALUE='Expense Report Process'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$processId</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'CON_ID'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; <br />
<span style="color: #666666; font-style: italic;">//Look up the UID of the starting task for the process:</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT TAS_UID FROM TASK WHERE PRO_UID='<span style="color: #006699; font-weight: bold;">$processId</span>' AND TAS_START='TRUE'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$taskId</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'TAS_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #666666; font-style: italic;">//Randomly choose a user from the list of assigned users for the starting task: </span><br />
<span style="color: #000088;">$aUsers</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT USR_UID FROM TASK_USERS WHERE TAS_UID='<span style="color: #006699; font-weight: bold;">$taskId</span>' AND TU_TYPE='1'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">//get random number to select the user:</span><br />
<span style="color: #000088;">$noUser</span> <span style="color: #339933;">=</span> <a href="http://php.net/rand"><span style="color: #990000;">rand</span></a><span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$aUsers</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <br />
<span style="color: #000088;">$userId</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$aUsers</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$noUser</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'USR_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #666666; font-style: italic;">//Create an associative array of case variables named &quot;Model&quot;, &quot;Price&quot; and &quot;OrderDate&quot;:</span><br />
<span style="color: #000088;">$aData</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Model'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'Acme Coyote Trap'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Price'</span> <span style="color: #339933;">=&gt;</span> <span style="color:#800080;">29.99</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'OrderDate'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'2010-12-31'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<br />
PMFNewCase<span style="color: #009900;">&#40;</span><span style="color: #000088;">$processId</span><span style="color: #339933;">,</span> <span style="color: #000088;">$userId</span><span style="color: #339933;">,</span> <span style="color: #000088;">$taskId</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aData</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p><strong>Example 3:</strong><br>Start a new case, setting a grid case variable named "clientsGrid" which has the fields "firstName", "lastName" and "telephone" and has 3 rows of data:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$taskId</span> &nbsp;<span style="color: #339933;">=</span> <span style="color: #0000ff;">'7766592404f358fb90dcdc9043579725'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//lookup the starting task's unique ID</span><br />
<span style="color: #000088;">$aGrid</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;1&quot;</span> <span style="color: #339933;">=&gt;</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;firstName&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Greg&quot;</span><span style="color: #339933;">,</span> &nbsp;<span style="color: #0000ff;">&quot;lastName&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Brown&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;telephone&quot;</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;471.826-4329&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;2&quot;</span> <span style="color: #339933;">=&gt;</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;firstName&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Anne&quot;</span><span style="color: #339933;">,</span> &nbsp;<span style="color: #0000ff;">&quot;lastName&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Smith&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;telephone&quot;</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;913.626-9518&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;3&quot;</span> <span style="color: #339933;">=&gt;</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;firstName&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Sally&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;lastName&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Slim&quot;</span><span style="color: #339933;">,</span> &nbsp;<span style="color: #0000ff;">&quot;telephone&quot;</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;765.652-8608&quot;</span><span style="color: #009900;">&#41;</span><br />
<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <br />
<span style="color: #000088;">$newCaseId</span> <span style="color: #339933;">=</span> PMFNewCase<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>PROCESS<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">,</span> <span style="color: #000088;">$taskId</span><span style="color: #339933;">,</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;clientsGrid&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$aGrid</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFPauseCase.28.29">PMFPauseCase()</span></h3>
<p><code>PMFPauseCase()</code> pauses a specified case.</p>

<codeblock><i>int</i> <strong>PMFPauseCase</strong>(<i>string</i> caseUid, <i>string</i> delIndex, <i>string</i> userUid, <i>string</i> unpauseDate=null)
</codeblock>

<p><strong>Parameters:</strong></p>
<p>
<ul><li><i>string</i> <strong>caseUid</strong>: The unique ID of the case, which can be found in the following ways:
<ul><li>Use the <code>@@APPLICATION</code> system variable to get the unique ID of the current case.</li>
<li>Use <a href="#PMFCaseList.28.29">PMFCaseList()</a>, <a href="../index.php/Simple_Trigger_Web_Services.html#WSCaseList.28.29" title="Simple Trigger Web Services">WSCaseList()</a>, or the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#caseList.28.29" title="2.0/ProcessMaker WSDL Web Services">caseList()</a> web service.</li></ul></li>
<li><i>string</i> <strong>delIndex</strong>: The delegation index of the current task in the case. For the current case, use the system variable <code>@%INDEX</code>.</li>
<li><i>string</i> <strong>userUid</strong>: The unique ID of the user who will pause the case. The user's unique ID, which can be found in the following ways:
<ul><li>Get the UID of the currently logged-in user with the <code>@@USER_LOGGED</code> system variable or <code>$_SESSION['USER_LOGGED']</code>.</li>
<li>Use the <a href="#PMFUserList.28.29">PMFUserList()</a> or <a href="../index.php/Simple_Trigger_Web_Services.html#WSUserList.28.29" title="Simple Trigger Web Services">WSUserList()</a> functions, or the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#userList.28.29" title="ProcessMaker WSDL Web Services">userList()</a> web service.</li>
<li>Query the <strong><tt>wf_&lt;WORKSPACE&gt;.USERS.USR_UID</tt></strong> field in the database with <a href="#executeQuery.28.29">executeQuery()</a>.</li></ul></li>
<li><i>string</i> <strong>unpauseDate</strong>: Optional parameter. The date in the format <code>"YYYY-MM-DD"</code> indicating when the case will be unpaused. Ex: <code>"2015-12-31"</code></li></ul>
</p>

<p><strong>Return Value:</strong></p>
<p>Returns <code>1</code> if the case is paused successfully; otherwise, returns <code>0</code> if an error occurred.</p>

<h3><span id="PMFUnpauseCase.28.29">PMFUnpauseCase()</span></h3>
<p><code>PMFunpauseCase()</code> unpauses a specified case.</p>

<codeblock><i>int</i> <strong>PMFUnpauseCase</strong>(<i>string</i> caseUid, <i>string</i> delIndex, <i>string</i> userUid)
</codeblock>

<p><strong>Parameters:</strong></p>
<p>
<ul><li><i>string</i> <strong>caseUid</strong>: The unique ID of the case, which can be found in the following ways:
<ul><li>Use the <code>@@APPLICATION</code> system variable to get the unique ID of the current case.</li>
<li>Use the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#caseList.28.29" title="2.0/ProcessMaker WSDL Web Services">caseList()</a> web service.</li></ul></li>
<li><i>string</i> <strong>delIndex</strong>: The delegation index of the current task in the case. For the current case, use the system variable <code>@%INDEX</code>.</li>
<li><i>string</i> <strong>userUid</strong>: The unique ID of the user who will unpause the case, which can be found in the following ways:
<ul><li>Get the UID of the currently logged-in user with the <code>@@USER_LOGGED</code> system variable or <span class="re0" style="color: rgb(0, 0, 136);">$_SESSION</span>[</span><span class="st_h" style="color: rgb(0, 0, 255);">'USER_LOGGED'</span>]</span></span>.</li>
<li>Use the <a href="#PMFUserList.28.29">PMFUserList()</a> or <a href="../index.php/Simple_Trigger_Web_Services.html#WSUserList.28.29" title="Simple Trigger Web Services">WSUserList()</a> functions, or the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#userList.28.29" title="ProcessMaker WSDL Web Services">userList()</a> web service.</li>
<li>Query the <strong><tt>wf_&lt;WORKSPACE&gt;.USERS.USR_UID</tt></strong> field in the database with <a href="#executeQuery.28.29">executeQuery()</a>.</li></ul></li></ul>
</p>

<p><strong>Return Value:</strong></p>
<p>Returns <code>1</code> if the case is unpaused successfully; otherwise, returns <code>0</code> if an error occurred.</p>

<h3><span id="PMFAssignUserToGroup.28.29">PMFAssignUserToGroup()</span></h3>
<p><code>PMFAssignUserToGroup()</code> assigns a user to a group. Note that the logged-in user must have the PM_USERS permission in his/her role to be able to assign a user to a group.</p>

<codeblock><i>int</i> <strong>PMFAssignUserToGroup</strong>(<i>string</i> userId, <i>string</i> groupId)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>userId</strong>: The unique ID of the user.</li>
<li><i>string</i> <strong>groupId</strong>: The unique ID of the group.</li></ul>
<p><strong>Return Value:</strong></p>
<p>Returns 1 if the user was successfully assigned to the group; otherwise, returns 0 if an error occurred.</p>
<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$GroupUID</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'8511196744b6380deb57b69039061394'</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$var</span> <span style="color: #339933;">=</span> PMFAssignUserToGroup<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">,</span> <span style="color: #000088;">$GroupUID</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$var</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>text <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;It was not assigned&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>text <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;It was assigned&quot;</span><span style="color: #339933;">;</span></div></div>

<p><strong>Where:</strong></p>
<ul><li><code><strong>$GroupUID</strong></code>: It is the ID of the employee group.</li>
<li><code><strong>@@USER_LOGGED</strong></code>: This is the user logged ID.</li>
<li><code><strong>$var</strong></code>: As this function returns 1 if it was successfully assigned and 0 if not, this variable store this return value to confirm the assignation.</li></ul>
<h3><span id="PMFCreateUser.28.29">PMFCreateUser()</span></h3>
<p><code>PMFCreateUser()</code> creates a new user with the given data.</p>

<codeblock><i>int</i> <strong>PMFCreateUser</strong>(<i>string</i> username, <i>string</i> password, <i>string</i> firstname, <i>string</i> lastname, <i>string</i> email, <i>string</i> role)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>username</strong>: The username of the new user.</li>
<li><i>string</i> <strong>password</strong>: The password of the new user, which can be up to 32 characters long. For more information, see <a href="../index.php/Customizing_Authentication.html" title="Customizing Authentication">Customizing Authentication</a>.</li>
<li><i>string</i> <strong>firstname</strong>: The first name of the user, which can be up to 50 characters long.</li>
<li><i>string</i> <strong>lastname</strong>: The last name of the user, which can be up to 50 characters long.</li>
<li><i>string</i> <strong>email</strong>: The email of the new user, which can be up to 100 characters long.</li>
<li><i>string</i> <strong>role</strong>: The role of the new user, such as <code>'PROCESSMAKER_ADMIN'</code>, <code>'PROCESSMAKER_OPERATOR'</code> or <code>'PROCESSMAKER_MANAGER'</code>.</li></ul>
<p><strong>Return Value:</strong></p>
<ul><li>Returns 1 if the new user was created successfully; otherwise, returns 0 if an error occurred.</li></ul>
<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$var</span> <span style="color: #339933;">=</span> PMFCreateUser<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'jsmith'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'PaSsWoRd'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'John'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Smith'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'jsmith@company.com'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'PROCESSMAKER_OPERATOR'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$var</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>text <span style="color: #339933;">=</span> <span style="color: #0000ff;">'not created'</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>text <span style="color: #339933;">=</span> <span style="color: #0000ff;">'created'</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFUpdateUser.28.29">PMFUpdateUser()</span></h3>
<p><code>PMFUpdateUser()</code> updates a specified user’s information.</p>

<codeblock><i>int</i> <strong>PMFUpdateUser</strong>(<i>string</i> userUid, <i>string</i> userName, <i>string</i> firstName, <i>string</i> lastName, <i>string</i> email, <i>string</i> dueDate, <i>string</i> status, <i>string</i> role, <i>string</i> password)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>userId</strong>: The unique ID of the user whose information will be updated.</li>
<li><i>string</i> <strong>userName</strong>: The username of the user.</li>
<li><i>string</i> <strong>firstname</strong>: The first name of the user which can be up to 50 characters long.</li>
<li><i>string</i> <strong>lastname</strong>: The last name of the user which can be up to 50 characters long.</li>
<li><i>string</i> <strong>email</strong>: The email of the user, which can be up to 100 characters long.</li>
<li><i>string</i> <strong>dueDate</strong>: The expiration date which must be a string in the format "YYYY-MM-DD"</li>
<li><i>string</i> <strong>status</strong>: The user's status, such as <code>'ACTIVE'</code>, <code>'INACTIVE'</code> or <code>'VACATION'</code>.</li>
<li><i>string</i> <strong>role</strong>: The role of the user, such as <code>'PROCESSMAKER_ADMIN'</code>, <code>'PROCESSMAKER_OPERATOR'</code> or <code>'PROCESSMAKER_MANAGER'</code>.</li>
<li><i>string</i> <strong>password</strong>: The password of the user, which can be up to 32 characters long. For more information, see <a href="../index.php/Customizing_Authentication.html" title="Customizing Authentication">Customizing Authentication</a>.</li></ul>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> All fields must be filled.</font></p>
<p><strong>Return Value:</strong></p>
<ul><li>Returns 1 if the user has been successfully updated; otherwise, returns 0 if an error occurred.</li></ul>
<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span><span style="color: #b1b100;">return</span> <span style="color: #339933;">=</span> PMFUpdateUser<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">,</span> <span style="color: #0000ff;">'jdoe'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'John'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Doe'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'jdoe@example.com'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'2020-12-31'</span><span style="color: #339933;">,</span> <br />
&nbsp; &nbsp;<span style="color: #0000ff;">'ACTIVE'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'PROCESSMAKER_OPERATOR'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'p4ssw0rd'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="generateCode.28.29">generateCode()</span></h3>
<p><code>generateCode()</code> creates a random string of letters and/or numbers of a specified length, which can be used as the <a href="../index.php/Case_Tracker.html" title="Case Tracker">PINs</a> (public identification numbers) and codes for cases. For more info, see <a href="#setCaseTrackerCode.28.29">setCaseTrackerCode()</a>.</p>

<codeblock><i>string</i> <strong>generateCode</strong>(<i>int</i> size, <i>string</i> type)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>int</i> <strong>size</strong>: The number of characters to be generated.</li>
<li><i>string</i> <strong>type</strong>: The type of of characters to be generated, which can be 'ALPHA' (only letters), 'NUMERIC' (only numbers), and 'ALPHANUMERIC' (both letters and numbers).</li></ul>
<p><strong>Return Value:</strong></p>
<p>The generated string of random characters.</p>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> There is no checking whether the string returned by <code>generateCode()</code> is unique, so do not use this function to uniquely identify any object in ProcessMaker. <!--For that purpose, use the <a href="/index.php/Internal_Functions_and_Classes#G::generateUniqueID.28.29" title="Internal Functions and Classes">G::generateUniqueID()</a> function.--></font></p>
<p><strong>Example:</strong><br>To create a random string like "4NJQEWPT89AH":</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>CaseCode <span style="color: #339933;">=</span> generateCode<span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">10</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'ALPHANUMERIC'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="getEmailConfiguration.28.29">getEmailConfiguration()</span></h3>
<p><code>getEmailConfiguration()</code> returns information about the current email configuration.</p>

<codeblock><i>array</i> <strong>getEmailConfiguration</strong>()
</codeblock>

<p><strong>Return Value:</strong></p>
<p>Returns an associative array with the following information about the email configuration:</p>

<table class="codecolumn">
<tr><td>array( </td><td></td></tr>
<tr><td>   "MESS_PASSWORD", </td><td>Encrypted password to login to the email server, such as: <code>"vKbAqYO+urusxc6+xbp+eIF9"</code></td></tr>
<tr><td>   "MESS_PASSWORD_HIDDEN", </td><td>Always set to <code>""</code> (empty string.</td></tr>
<tr><td>   "MESS_ENABLED", </td><td>Set to "1" if email notifications are enabled. If not enabled, set to <code>"0"</code>.</td></tr>
<tr><td>   "MESS_ENGINE"], </td><td>The email engine which can be <code>"PHPMAILER"</code> to use the PHPMailer program which supports SMTP or <code>"MAIL"</code> to use PHP's mail() function to send the email via the mail transfer agent configured for the ProcessMaker server.</td></tr>
<tr><td>   "MESS_SERVER", </td><td>The IP number or domain name of the email server, such as: <code>"smtp.mail.yahoo.com"</code></td></tr>
<tr><td>   "MESS_RAUTH", </td><td>Set to <span class="geshifilter"><code class="php geshifilter-php"><span style="color: #009900; font-weight: bold;">true</span></code></span> if login needed to send out messages; otherwise set to <span class="geshifilter"><code class="php geshifilter-php"><span style="color: #009900; font-weight: bold;">false</span></code></span>.</td></tr>
<tr><td>   "MESS_PORT", </td><td>Port number of the email server, such as <code>"25"</code>, <code>"465"</code> or <code>"587"</code>.</td></tr>
<tr><td>   "MESS_ACCOUNT", </td><td>The username of the email account. For some email servers, such as gmail, the account name included the full email address, such as:"joedoe@gmail.com"</td></tr>
<tr><td>   "MESS_BACKGROUND", </td><td>HTML code for the background to the email message. Generally set to <code>""</code> (no background).</td></tr>
<tr><td>   "MESS_EXECUTE_EVERY", </td><td>Time between attempts to send message. If set to <code>""</code>, then uses the default.</td></tr>
<tr><td>   "MESS_SEND_MAX", </td><td>Maximum number of attempts to send the message. If set to "", then uses the default.</td></tr>
<tr><td>   "SMTPSecure", </td><td>The type of secure connection to the email server: <code>"ssl"</code>, <code>"tls"</code> or <code>""</code> (empty string for no secure connection)</td></tr>
<tr><td>   "MAIL_TO", </td><td>Email address to whom the test email will be sent.</td></tr>
<tr><td>   "MESS_FROM_NAME", </td><td>Name of the sender, such as: "ProcessMaker Admin"</td></tr>
<tr><td>   "MESS_TRY_SEND_INMEDIATLY",</td><td>Set to <code>"1"</code> to send out a test email after configuring email server or <code>"false"</code> to not send it.</td></tr>
<tr><td>   "MESS_FROM_MAIL", </td><td>Email address of the sender of emails. In most cases this will be the same as the email account.</td></tr>
<tr><td>) </td><td></td></tr>
</table>

<p><strong>Example:</strong><br>Check whether email notifications are enabled before sending out an email with PMFSendMessage():</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aEmailConfig</span> <span style="color: #339933;">=</span> getEmailConfiguration<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$aEmailConfig</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'MESS_ENABLED'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">==</span> <span style="color: #0000ff;">&quot;1&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'accountant@acme.com'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'manager@acme.com'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Accounting report'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'accountingTemplate.html'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<h3><span id="setCaseTrackerCode.28.29">setCaseTrackerCode()</span></h3>
<p><code>setCaseTrackerCode()</code> sets the code and PIN for a case, which are used when an unregistered user logs into the <a href="../index.php/Case_Tracker.html" title="Case Tracker">Case Tracker</a> to view the details of a particular case. By default, the code for a case is its case number and its PIN (public identification number) is a semi-random string of 4 characters (numbers and letters) which is autogenerated by ProcessMaker, however, <code>setCaseTrackerCode()</code> can set the case code and PIN to any desired values.</p>

<codeblock><i>int</i> <strong>setCaseTrackerCode</strong>(<i>string</i> caseId, <i>string</i> code, <i>string</i> pin)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>caseId</strong>: The unique ID for a case. For the current case use the system variable <code>@@APPLICATION</code>. Other cases UIDs can be found with <a href="#PMFCaseList.28.29">PMFCaseList()</a>, <a href="../index.php/Simple_Trigger_Web_Services.html#WSCaseList.28.29" title="Simple Trigger Web Services">WSCaseList()</a>, <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#caseList.28.29" title="ProcessMaker WSDL Web Services">caseList()</a> or by querying the field <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_UID</tt></strong>.</li>
<li><i>string</i> <strong>code</strong>: The new code for a case, which will be stored in the field <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_PROC_CODE</tt></strong>.</li>
<li><i>string</i> <strong>pin</strong>: The new code for a case, which will be stored in the field <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_PIN</tt></strong> as MD5 hash and will be available in the system variable <code>@@PIN</code> for the current case.</li></ul>
<p><strong>Return Value until version 2.0.45:</strong></p>
<p>If successful, returns zero, otherwise a non-zero error number.</p>
<p><strong>Return Value from version 2.5.1 on:</strong></p>
<p>If successful, returns one, otherwise zero or error number.</p>
<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">setCaseTrackerCode<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'999'</span><span style="color: #339933;">,</span> generateCode<span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">4</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'ALPHANUMERIC'</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="jumping.28.29">jumping()</span></h3>
<p><code>jumping()</code> routes (derivates) a case to the next task in the process (or terminates the case if the last task in the process) and then displays the case list.</p>

<codeblock><i>void</i> <strong>jumping</strong>(<i>string</i> caseId, <i>int</i> delegation)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>caseId</strong>: The unique ID for the case to be routed (derivated). For the current case, use the system variable <code>@@APPLICATION</code>. For other cases, use <a href="#PMFCaseList">PMFCaseList()</a> to obtain the case UID or do a database query to look up the case's unique ID in the field <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_UID</tt></strong>. Note that the case's UID changes with each new task.</li>
<li><i>int</i> <strong>delegation</strong>: The delegation index of the task to be routed (derivated). Counting starts from 1. For the current case, use the system variable <code>@%INDEX</code>. For other cases, use <a href="#PMFCaseList.28.29">PMFCase()</a> to obtain the delegation index or do a database search in the field <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DELEGATION.DEL_INDEX</tt></strong>.</li></ul>

<p><strong>Return Value:</strong></p>
<p>None.</p>

<p><strong>Example:</strong></p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">jumping<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #339933;">@%</span>INDEX<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFRedirectToStep.28.29">PMFRedirectToStep()</span></h3>
<p><b><font color=red>Warning:</font></b> <span style="color: dimgrey">The PMFRedirectToStep function is not supported in the Mobile Version of Processmaker.</span></p>

<p><code>PMFRedirectToStep()</code> redirects a case to any step in the current task. In order for the step to be executed, the specified step much exist and if it contains a condition, it must evaluate to <strong><code>true</code></strong>.</p>

<codeblock><i>void</i> <strong>PMFRedirectToStep</strong>(<i>string</i> caseId, <i>int</i> indexDelegation, <i>string</i> stepType, <i>string</i> stepUidObject)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>CaseId</strong>: The unique ID for a case. For the current case, use the system variable <code>@@APPLICATION</code>. For other cases, lookup it up using the <a href="#PMFCaseList.28.29">PMFCaseList()</a> function or by doing a database query for the field <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_UID</tt></strong>.</li>

<li><i>int</i> <strong>delegation</strong>: The delegation index of a case. For the current case, use the system variable <code>@%INDEX</code>.</li>

<li><i>string</i> <strong>stepType</strong>: The type of step, which can be <code>'DYNAFORM'</code>, <code>'INPUT_DOCUMENT'</code>, <code>'OUTPUT_DOCUMENT'</code>, or <code>'EXTERNAL'</code>.</li>

<li><i>string</i> <strong>stepUidObject</strong>: The unique ID for the object (DynaForm, Input Document, Output Document, etc.) of the step. This unique ID can be found by looking up the <strong><tt>wf_&lt;WORKSPACE&gt;.STEP.STEP_UID_OBJ</tt></strong> field in the database.</li>
</ul>

<p><strong>Return Value:</strong></p>
<p>None.</p>
<p><strong>Example:</strong></p>
<p>In the following code, the unique ID of the third step object is obtained with the <a href="#executeQuery.28.29">executeQuery</a> function to after redirect the task directly to the 3rd step with the <code>PMFRedirectToStep</code> function:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT STEP_UID_OBJ FROM STEP WHERE TAS_UID='27028966657e19c5037c429053080948' and STEP_POSITION = 3&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>stepUidObj<span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;STEP_UID_OBJ&quot;</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
PMFRedirectToStep<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #339933;">@%</span>INDEX<span style="color: #339933;">,</span> <span style="color: #0000ff;">'DYNAFORM'</span><span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>stepUidObj<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>


<h3><span id="PMFSendMessage.28.29">PMFSendMessage()</span></h3>
<p>The <strong><code>PMFSendMessage()</code></strong> function sends out customized email notifications using a template. For more information, see <a href="../index.php/Notifications.html#Trigger_Messages" title="Notifications">Trigger Messages</a>.</p>

<codeblock><i>int</i> <strong>PMFSendMessage</strong>(<i>string</i> caseId, <i>string</i> from, <i>string</i> to, <i>string</i> cc, <i>string</i> bcc, 
    <i>string</i> subject, <i>string</i> template, <i>array</i> aFields=array(), <i>array</i> aAttachments=array(), 
    <i>boolean</i> showMessage=true, <i>int</i> delIndex=0, <i>array</i> config=array())  
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>caseId</strong>: The UID (unique identification) for a case, which is a string of 32 hexadecimal characters to identify the case. For the current case use the system variable <code>@@APPLICATION</code>. Other case UIDs can be found with the <a href="#PMFCaseList.28.29">PMFCaseList()</a> function, the <a href="../index.php/Simple_Trigger_Web_Services.html#WSCaseList.28.29" title="Simple Trigger Web Services">WSCaseList()</a> function, the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#caseList.28.29" title="ProcessMaker WSDL Web Services">caseList()</a> web service, or by using the <a href="../index.php/ProcessMaker_Functions.html#executeQuery.28.29" title="ProcessMaker Functions">executeQuery()</a> function to query the <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_UID</tt></strong> field in the database.</li>
<li><i>string</i> <strong>from</strong>: The email address of the person who sends out the email. Use the <a href="../index.php/ProcessMaker_Functions.html#userInfo.28.29" title="ProcessMaker Functions">userInfo()</a> function to get a user's email address. If needing to include the person's name along with the email address, list the name first followed by the email address enclosed inside angle brackets <strong><code>&lt; &gt;</code></strong>. The name may be enclosed inside double quotations, but it isn't necessary:</li></ul>
<dl><dd><dl><dd><code>'Liliana Iriarte &lt;liliana@example.com&gt;' <i><font color="green">or</font></i> '"Liliana Iriarte" &lt;liliana@example.com&gt;'</code></dd></dl></dd></dl>
<dl><dd><strong><font color="green">Note:</font></strong><font color="dimgray"> Due to security restrictions, Yahoo!, gmail and many other email providers will <no longer deliver email</a> which doesn't come from the same email address as the account in the <a href="../index.php/2.0/Email_-_Settings.html#Email_Configuration" title="2.0/Email - Settings">Email Configuration</a> at <strong>ADMIN &gt; Settings &gt; Email</strong>. To avoid this problem, set the email address for the <strong><code>from</code></strong> parameter to the same email address found in the Email Configuration.</font></dd></dl>
<ul><li><i>string</i> <strong>to</strong>: The email address(es) to whom the email is sent. If multiple recipients, separate each email address with a comma ",". If needing to include the person's name along with the email address, list the name first followed by the email address enclosed inside angle brackets <strong><code>&lt; &gt;</code></strong> as shown above. Use the <a href="../index.php/ProcessMaker_Functions.html#userInfo.28.29" title="ProcessMaker Functions">userInfo()</a> function to get a user's email address.</li>
<li><i>string</i> <strong>cc</strong>: The email address(es) of people who will receive carbon copies of the email. If multiple recipients, separate each email address with a comma. Use the <a href="../index.php/ProcessMaker_Functions.html#userInfo.28.29" title="ProcessMaker Functions">userInfo()</a> function to get a user's email address.</li>
<li><i>string</i> <strong>bcc</strong>: The email address(es) of people who will receive blind carbon copies of the email. Unlike a normal carbon copy, the other recipients won't see who has received blind carbon copies. If multiple recipients, separate each email address with a comma. Use the <a href="../index.php/ProcessMaker_Functions.html#userInfo.28.29" title="ProcessMaker Functions">userInfo()</a> function to get a user's email address.</li>
<li><i>string</i> <strong>subject</strong>: The subject (title) of the email.</li>
<li><i>string</i> <strong>template</strong>: The name of the template file in plain text or HTML format which will produce the body of the email. Include the file extension in the file name.</li></ul>
<div style="font-family: sans-serif; font-size: 12.6999998092651px; line-height: 19.0499992370605px; margin-left: 20px;"><p>For example: <code>"negativeResponse.html"</code> or <code>"caseStatus.txt"</code><br>The template file must be located in the <strong>mailTemplates</strong> directory of the <a href="../index.php/Process_Files_Manager.html" title="Process Files Manager">Process Files Manager</a> for the current process (which is stored in the <strong><tt>shared/sites/&lt;WORKSPACE&gt;/mailTemplates/&lt;PROCESS-UID&gt;/</tt></strong> directory in the server's file system). The template file can contain system variables, case variables (which weren't defined in the same trigger), or any variables which are passed in the <strong><code>fields</code></strong> parameter. See <a href="../index.php/Notifications.html" title="Notifications">Notifications</a> for how to insert variables in an email template.</p></div>
<ul><li><i>array</i> <strong>fields</strong>: Optional parameter to define custom variables which can be inserted into the template file. An associative array where the keys are the variable name and the values are the variable's value. If no array is included, an empty array is included by default. Case variables which are defined in the same trigger which calls <code>PMFSendMessage()</code> should be passed to the email template using the <code>fields</code> array. See the example below for how to set the values in the <code>fields</code> array.</li>
<li><i>array</i> <strong>aAttachments</strong>: <i>Optional.</i> An array of complete paths for files to attach to the email. The paths can be web addresses or paths in the file system of the server where ProcessMaker is installed. For example:</li></ul>
<dl><dd><dl><dd>
<span class="geshifilter"><code class="php geshifilter-php"><a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'/home/foobar/clients/client_03452342.xls'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'/var/www/public/profile.pdf'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'http://www.example.com/finances.doc'</span><span style="color: #009900;">&#41;</span></code></span> 
</dd></dl></dd></dl>
<div style="line-height: 19.0499992370605px; margin-left: 20px;"><p>By default, files are attached using their original file names, which means that Input Documents, Output Documents and attached files are sent with filenames containing their unique ID and version number. In version 2.0.38 and later, it is possible to rename file attachments</a> by setting the new filename as the array key. For example:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;InvoiceForJohnDoe.xls&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;/home/foobar/clients/client_03452342.xls&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;scannedInvoice.png&quot;</span> <span style="color: #339933;">=&gt;</span> PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>APPLICATION <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;9743702654e6925b52e1e34098864192_1.png&quot;</span> <br />
<span style="color: #009900;">&#41;</span></div></div>

<p>If sending files stored by ProcessMaker, it is recommended to use ProcessMaker's predefined system constants, such as <code>PATH_DATA_PUBLIC</code>, <code>PATH_DATA_MAILTEMPLATES</code>, <code>PATH_DOCUMENT</code> and <code>PATH_SEP</code>, to construct the paths:</p>
<ul><li>Files in the "public" directory of the <a href="../index.php/Process_Files_Manager.html" title="Process Files Manager">Process Files Manager</a>:</li></ul>

<dl><dd><dl><dd><span class="geshifilter"><code class="php geshifilter-php">PATH_DATA_PUBLIC <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;&lt;PROCESS-UID&gt;&quot;</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;&lt;FILENAME&gt;&quot;</span></code></span></dd></dl></dd>
<dd>Example:
<dl><dd><span class="geshifilter"><code class="php geshifilter-php">PATH_DATA_PUBLIC <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>PROCESS <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;letterheadLogo.png&quot;</span></code></span></dd></dl></dd></dl>
<ul><li>Template files (without inserted data) in the "mailTemplates" directory of the <a href="../index.php/Process_Files_Manager.html" title="Process Files Manager">Process Files Manager</a>:</li></ul>
<dl><dd><dl><dd><span class="geshifilter"><code class="php geshifilter-php">PATH_DATA_MAILTEMPLATES <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;&lt;PROCESS-UID&gt;&quot;</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;&lt;FILENAME&gt;&quot;</span></code></span></dd></dl></dd>
<dd>Example:
<dl><dd><span class="geshifilter"><code class="php geshifilter-php">PATH_DATA_MAILTEMPLATES <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>PROCESS <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;companyProfile.html&quot;</span></code></span></dd></dl></dd></dl>
<ul><li>Uploaded <a href="../index.php/2.0/Input_Documents.html" title="2.0/Input Documents">Input Document</a> files and attached <a href="../index.php/2.0/Files.html" title="2.0/Files">files</a>:</li></ul>
<dl><dd><dl><dd><span class="geshifilter"><code class="php geshifilter-php">PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;&lt;CASE-UID&gt;&quot;</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;&lt;CASE-DOC-UID&gt;_&lt;VERSION&gt;.&lt;EXTENSION&gt;&quot;</span></code></span></dd></dl></dd>
<dd>Example:
<dl><dd><span class="geshifilter"><code class="php geshifilter-php">PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>APPLICATION <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;9743702654e6925b52e1e34098864192_1.png&quot;</span></code></span></dd></dl></dd></dl>
<ul><li>Generated <a href="../index.php/Output_Documents.html" title="2.0/Output Documents">Output Document</a> files:</li></ul>
<dl><dd><dl><dd><span class="geshifilter"><code class="php geshifilter-php">PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;&lt;CASE-UID&gt;&quot;</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;outdocs&quot;</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;&lt;CASE-DOC-UID&gt;_&lt;VERSION&gt;.&lt;EXTENSION&gt;&quot;</span></code></span></dd></dl></dd>
<dd>Example:
<dl><dd><span class="geshifilter"><code class="php geshifilter-php">PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>APPLICATION <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;outdocs&quot;</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;6960198894e6927e0a40b14004833875_2.pdf&quot;</span></code></span></dd></dl></dd></dl>
</div>
<ul><li><i>boolean</i> <strong>showMessage</strong>: Optional parameter available in version 2.5 and later. If set to <strong><code>true</code></strong>, which is the default, the the email message will be displayed in the <a href="../index.php/2.0/Cases.html#Message_History" title="2.0/Cases">message history</a>. If set to <strong><code>false</code></strong>, then the email message will not be displayed in the message history, although a record of the email will still be stored in the <strong><tt>APP_MESSAGE</tt></strong> table.</li>
<li><i>int</i> <strong>delIndex</strong>: Optional parameter available in version 2.5 and later. If not set to 0, the message will be associated with a particular task in the case, which is indicated by its delegation index. The delegation index for the current case is stored in the system variable <code>@%INDEX</code>. Note that the delegation index changes with each new task in the case, so lookup the index in the <strong><tt>APPLICATION.DEL_INDEX</tt></strong> field before calling this function.</li>
<li><i>array</i> <strong>config</strong>: Optional parameter available in Enterprise Edition version 2.8 and later to configure an alternative email server to send the message. See <a href="../index.php/2.8/Send_Emails_from_different_accounts.html" title="2.8/Send Emails from different accounts">Use an alternative email server</a>.</li></ul>
<p><strong>Return Value:</strong><br>Returns 1 if email was sent to the configured <a href="../index.php/2.0/Email_-_Settings.html" title="Email - Settings">email server</a>; otherwise, returns 0 if an error occurred. In ProcessMaker version 2.X, emails are sent to the email server by <strong><tt>cron.php</tt></strong>, so the return value only indicates that the email was added to the queue of pending actions for the next execution of <strong><tt>cron.php</tt></strong>.</p>
<p><strong>When the trigger should be set to fire</strong></p>
<p>Before version <strong>2.0.43</strong>, DynaForms did not save the values in their fields as case variables before firing triggers after the DynaForm. It wasn't possible to include variables from a DynaForm, if the trigger was fired <i>after</i> the DynaForm step. Furthermore, if the DynaForm wasn't submitted, then the triggers set to fire after the DynaForm wouldn't execute. For these reasons, it was recommended to set triggers containing the PMFSendMessage() function to fire <i>before</i> the next step or after derivation if the last step in the task. From version 2.0.43 on, these problems have been fixed and the PMFSendMessage() function can be used in triggers which are set to fire after a DynaForm steps.</p>
<p><strong>Example Sending Variables to a Template:</strong></p>
<p>The following trigger code is used to send an email template named "LeaveRequestTemplate.html" to the user working on the current case. An array of variables is passed to <code>PMFSendMessage()</code>, so the <code>@#reqUserName</code>, <code>@#reqSup</code>, <code>@#fromReq</code>, <code>@#toReq</code> and <code>@#daysReq</code> fields will be filled in the template:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aFields</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'reqUserName'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@=</span>reqUserName<span style="color: #339933;">,</span> <span style="color: #0000ff;">'reqSup'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@=</span>reqSup<span style="color: #339933;">,</span> <br />
&nbsp; &nbsp;<span style="color: #0000ff;">'fromReq'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@=</span>fromReq<span style="color: #339933;">,</span> <span style="color: #0000ff;">'toReq'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@=</span>toReq<span style="color: #339933;">,</span> <span style="color: #0000ff;">'daysReq'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@=</span>daysReq<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$usr</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$to</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$usr</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'mail'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span> &nbsp; &nbsp; <br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'manager@acme.com'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$to</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'ceo@acme.com, cfo@acme.com'</span><span style="color: #339933;">,</span> <br />
&nbsp; &nbsp;<span style="color: #0000ff;">'Leave Request Notification'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'LeaveRequestTemplate.html'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aFields</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p><strong>Example Emailing Attachments from the Process Files Manager:</strong></p>
<p>The following trigger sends to two files named "companyLogo.png" and "companyProfile.pdf" which are stored in the "public" directory of the <a href="../index.php/Process_Files_Manager.html" title="Process Files Manager">Process Files Manager</a>:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aAttachFiles</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp;PATH_DATA_PUBLIC <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>PROCESS <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">'companyLogo.png'</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;PATH_DATA_PUBLIC <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>PROCESS <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">'companyProfile.pdf'</span><br />
<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$usr</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'manager@acme.com'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$usr</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'mail'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <br />
&nbsp; &nbsp;<span style="color: #0000ff;">'Company Information'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'companyInfoTemplate.html'</span><span style="color: #339933;">,</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aAttachFiles</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p><strong>Example Emailing Input Document Files:</strong></p>
<p>This trigger emails all the uploaded files for an Input Document whose definition has the ID "8935316924e692b256860c4075654232".</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//Unique ID for the current case</span><br />
<span style="color: #000088;">$inDocDef</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;8935316924e692b256860c4075654232&quot;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//change for the Input Document definition's unique ID</span><br />
<span style="color: #000088;">$aAttachFiles</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #000088;">$inDocQuery</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT AD.APP_DOC_UID, AD.DOC_VERSION, C.CON_VALUE AS FILENAME FROM APP_DOCUMENT AD, CONTENT C <br />
&nbsp; &nbsp;WHERE AD.APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND AD.DOC_UID='<span style="color: #006699; font-weight: bold;">$inDocDef</span>' AND AD.APP_DOC_STATUS='ACTIVE' AND <br />
&nbsp; &nbsp;AD.APP_DOC_UID = C.CON_ID AND C.CON_CATEGORY = 'APP_DOC_FILENAME'&quot;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #000088;">$inDocs</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$inDocQuery</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$inDocs</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$inDocs</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$inDoc</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$aAttachFiles</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$inDoc</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILENAME'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #000088;">$caseId</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #000088;">$inDoc</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'_'</span> <span style="color: #339933;">.</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$inDoc</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'DOC_VERSION'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.'</span> <span style="color: #339933;">.</span> <a href="http://php.net/pathinfo"><span style="color: #990000;">pathinfo</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$inDoc</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILENAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> PATHINFO_EXTENSION<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #000088;">$usr</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'manager@acme.com'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$usr</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'mail'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <br />
&nbsp; &nbsp;<span style="color: #0000ff;">'Client documents'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'clientTemplate.html'</span><span style="color: #339933;">,</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aAttachFiles</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<dl><dd><strong><font color="green">Note:</font></strong> <font color="dimgrey">This example only emails the latest version of input document files. To email all versions, remove from the query: <code>AND AD.APP_DOC_STATUS='ACTIVE'</code></font></dd></dl>
<dl><dd><font color="dimgrey">To email all uploaded files for a case, remove from the query: <code>AND AD.DOC_UID='$inDocDef'</code></font></dd></dl>
<p><strong>Example Emailing a File Uploaded to a DynaForm's File Field:</strong></p>
<p>This trigger emails all the files uploaded to <a href="../index.php/2.0/Files.html" title="2.0/Files">file</a> fields for the current case:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aAttachFiles</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//Unique ID for the current case</span><br />
<span style="color: #000088;">$docQuery</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT AD.APP_DOC_UID, AD.DOC_VERSION, C.CON_VALUE AS FILENAME FROM APP_DOCUMENT AD, CONTENT C <br />
&nbsp; &nbsp;WHERE AD.APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND AD.APP_DOC_TYPE='ATTACHED' AND AD.APP_DOC_STATUS='ACTIVE' AND <br />
&nbsp; &nbsp;AD.APP_DOC_UID = C.CON_ID AND C.CON_CATEGORY = 'APP_DOC_FILENAME'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$docs</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$docQuery</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$docs</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$docs</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$doc</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$aAttachFiles</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$doc</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILENAME'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #000088;">$caseId</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #000088;">$doc</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'_'</span> <span style="color: #339933;">.</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$doc</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'DOC_VERSION'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.'</span> <span style="color: #339933;">.</span> <a href="http://php.net/pathinfo"><span style="color: #990000;">pathinfo</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$doc</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILENAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> PATHINFO_EXTENSION<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #000088;">$usr</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'manager@acme.com'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$usr</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'mail'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <br />
&nbsp; &nbsp;<span style="color: #0000ff;">'Invoices for case'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'invoiceInfo.html'</span><span style="color: #339933;">,</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aAttachFiles</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p><strong>Example Emailing Generated Output Document Files:</strong></p>
<p>This trigger emails the PDF and DOC files of the latest version of an Output Document whose definition has the ID "9172068094e6928c34e60f4091788777".</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aAttachFiles</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//Unique ID for the current case</span><br />
<span style="color: #666666; font-style: italic;">//change for the Output Document definition's unique ID:</span><br />
<span style="color: #000088;">$outDocDef</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;9172068094e6928c34e60f4091788777&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$outDocQuery</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT AD.APP_DOC_UID, AD.DOC_VERSION, C.CON_VALUE AS FILENAME <br />
&nbsp; &nbsp;FROM APP_DOCUMENT AD, CONTENT C <br />
&nbsp; &nbsp;WHERE AD.APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND AD.DOC_UID='<span style="color: #006699; font-weight: bold;">$outDocDef</span>' AND <br />
&nbsp; &nbsp;AD.APP_DOC_STATUS='ACTIVE' AND AD.DOC_VERSION = (<br />
&nbsp; &nbsp;SELECT MAX(DOC_VERSION) FROM APP_DOCUMENT WHERE APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND <br />
&nbsp; &nbsp;DOC_UID='<span style="color: #006699; font-weight: bold;">$outDocDef</span>' AND APP_DOC_STATUS='ACTIVE')<br />
&nbsp; &nbsp;AND AD.APP_DOC_UID = C.CON_ID AND C.CON_CATEGORY = 'APP_DOC_FILENAME'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$outDoc</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$outDocQuery</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$outDoc</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span>outDoc<span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$path</span> <span style="color: #339933;">=</span> PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #000088;">$caseId</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">'outdocs'</span><span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$outDoc</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'_'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$outDoc</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'DOC_VERSION'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$filename</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$outDoc</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILENAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$aAttachFiles</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$filename</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.pdf'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$path</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.pdf'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$aAttachFiles</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$filename</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.doc'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$path</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.doc'</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #000088;">$usr</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> &nbsp; &nbsp; <br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'manager@acme.com'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$usr</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'mail'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <br />
&nbsp; &nbsp;<span style="color: #0000ff;">'Case Report'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'caseReportTemplate.html'</span><span style="color: #339933;">,</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aAttachFiles</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFAddAttachmentToArray.28.29">PMFAddAttachmentToArray()</span></h3>
<p style="margin-left:25px"><strong><font color="#009688">Available Version:</font></strong><font color="dimgray"> From 2.5.2 on.</font></p>
<p>The <strong><code>PMFAddAttachmentToArray()</code></strong> function is used to add an additional file to an array of files, which can be passed to the <a href="#PMFSendMessage.28.29">PMFSendMessage()</a> function to send out emails with attached files. If a file with the same filename already exists in the array, it will add the file to the array, but rename its index key from "<i><strong><tt>filename.ext</tt></strong></i>" to "<strong><tt><i>filename</i> Copy(<i>X</i>).<i>ext</i></tt></strong>" where <i><strong><tt>X</tt></strong></i> is incremented so the original file doesn't get replaced.</p>

<codeblock><i>array</i> <strong>PMFAddAttachmentToArray</strong>(<i>array</i> arrayData, <i>string</i> index, <i>string</i> value, <i>string</i> suffix)  
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>array</i> <strong>arrayData</strong>: An existing associative array of files, where the index key is the filename and the value is the file. To understand the format of this array, see the <code>aAttachments</code> parameter of the <a href="#PMFSendMessage.28.29">PMFSendMessage()</a> function.</li>
<li><i>string</i> <strong>index</strong>: The new filename of the file to be added, which will also be the new index in the associative array of files. Note that the added file with be renamed to this value, so it is recommended to include the file extension, such as <strong><code>.doc</code></strong>, <strong><code>.pdf</code></strong>, etc.</li>
<li><i>string</i> <strong>value</strong>: The web address or the path on the ProcessMaker server to the file to be added to the array.</li>
<li><i>string</i> <strong>suffix</strong>: Optional parameter. A string that will concatenated to the <code>index</code> if the filename already exists in the array. Its default value is <strong><code>" Copy({i})"</code></strong>, where <strong><code>{i}</code></strong> will be replaced by an auto-incremented number.</li></ul>
<p><strong>Return Value:</strong></p>
<p>The modified associative array of files, with the new file added to it. This return value can be used as the <code>aAttachments</code> parameter in the <a href="#PMFSendMessage.28.29">PMFSendMessage()</a> function.</p>
<p><strong>Example:</strong><br>In this example, the paths to 4 different files named "expenseReport.doc", "accountingGuide.pdf", "expenseReport.doc" and "expenseReport.doc" are in an array. Each file from the array is added as file attachments to an email. The PMFAddAttachmentToArray() function is used avoid overwriting the existing files in the array of file attachments. Then PMFSendMessage() is used to send out the email with the file attachments.</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aFiles</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;http://www.acme.com/reports/expenseReport.doc&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;PATH_DATA_PUBLIC <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>PROCESS <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;accountingGuide.pdf&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;/home/accounting/2014-Nov/expenseReport.doc&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;/home/accounting/2014-Dec/expenseReport.doc&quot;</span><br />
<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$aAttachments</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$aFiles</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$file</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; <span style="color: #000088;">$aAttachments</span> <span style="color: #339933;">=</span> PMFAddAttachmentToArray<span style="color: #009900;">&#40;</span><span style="color: #000088;">$aAttachments</span><span style="color: #339933;">,</span> <a href="http://php.net/basename"><span style="color: #990000;">basename</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$file</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$file</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <br />
<span style="color: #009900;">&#125;</span> <br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'accountant@acme.com'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'manager@acme.com'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <br />
&nbsp; &nbsp;<span style="color: #0000ff;">'3 months of expense reports'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'monthlyExpenses.html'</span><span style="color: #339933;">,</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aAttachments</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>The above trigger code will send an email to manager@acme.com with the attached files named "expenseReport.doc", "accountingGuide.pdf", "expenseReport Copy(2).doc" and "expenseReport Copy(3).doc".</p>
<h3><span id="PMFgetLabelOption.28.29">PMFgetLabelOption()</span></h3>
<p><code>PMFgetLabelOption()</code> returns the label of a specified option from a dropdown box, listbox, checkgroup or radiogroup. Available in version 1-2.2467 and later.</p>

<codeblock><i>string</i> <strong>PMFgetLabelOption</strong>(<i>string</i> processId, <i>string</i> dynaformId, <i>string</i> fieldName, <i>string</i> optionId) 
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>processId</strong>: The unique ID of the process which contains the field. To use the current process, use the system variable <code>@@PROCESS</code>.</li>
<li><i>string</i> <strong>dynaformId</strong>: The unique ID of the DynaForm where the field is located.</li>
<li><i>string</i> <strong>fieldName</strong>: The field name of the dropdown box, checkbox group or radiogroup from the specified DynaForm.</li>
<li><i>string</i> <strong>optionId</strong>: The value (i.e., ID) of the option from the <code>fieldName</code>.</li></ul>
<p><strong>Return Value:</strong></p>
<p>A string holding the label of the specified option or NULL if the specified option does not exist.</p>

<p><strong>Example:</strong></p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>countries_lab <span style="color: #339933;">=</span> PMFgetLabelOption<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>PROCESS<span style="color: #339933;">,</span> <span style="color: #0000ff;">'6962405664a55ed3b36b168077366134'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'countries'</span><span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>countries<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>Where “6962405664a55ed3b36b168077366134” is the UID of the DynaForm which holds the dropdown box and “countries” is the name of the field whose values are displayed as options in the dropdown box. “@@countries” is a variable which holds the ID of the option which has been selected in the dropdown box.</p>
<p>If just trying to find the label from the selected option in a dropdown box, it is not necessary to use PMFgetLabelOption(). From version 1.2-2552 on, dropdown boxes have a new attribute called “saveLabel”. When set to “1”, it permits the value of a label for a selected option to be saved automatically in a variable with the same name as the original variable, but with “_label” added to the end of the variable name. For instance, if trying to find the label of the selected option in the "countries" dropdown box, it can be found in the "@@countries_label" variable.</p>

<h3><span id="PMFGenerateOutputDocument.28.29">PMFGenerateOutputDocument()</span></h3>
<p><code>PMFGenerateOutputDocument()</code> generates a specified Output Document, merging the variables from the current case into the Output Document's template. This function creates the Output Document files in the server file system and adds a new record to the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DOCUMENT</tt></strong> table. For more information, see <a href="../index.php/Output_Documents.html#Output_Document_Storage" title="2.0/Output Documents">Output Document Storage</a>. If the Output Document has already been generated for the current case, this function will overwrite the existing Output Document files (or add a new version of the files, if the <a href="../index.php/Output_Documents.html#versioning" title="2.0/Output Documents">versioning</a> option is enabled.)</p>

<codeblock><i>void</i> <strong>PMFGenerateOutputDocument</strong>(<i>string</i> $outputID)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>$outputID</strong>:</code> The unique ID for the Output Document definition, which can be found in 3 ways:</li></ul>
<dl><dd>1. Look it up in the <strong><tt>wf_&lt;WORKSPACE&gt;.OUTPUT_DOCUMENT.OUT_DOC_UID</tt></strong> field in the database.</dd><dd>2. In the <strong><tt>wf_&lt;WORKSPACE&gt;</tt></strong> database, issue the query: SELECT</span> CON_ID FROM</span> CONTENT WHERE</span> CON_CATEGORY=</span><span class="st0" style="color: rgb(255, 0, 0);">'OUT_DOC_TITLE'</span></span></dd><dd>3. Run a case with the Output Document as a step and examine the <code>UID</code> variable in the URLs with <a href="../index.php/Configuration_File_env.html#Time_Logging" title="Configuration File env.ini">Time Logging</a>.</dd></dl>
<p><strong>Return Value:</strong><br>None.</p>
<dl><dd><font color="green"><strong>Note:</strong></font> <font color="dimgrey"><code>PMFGenerateOutputDocument()</code> can be called at any point in a case, but if a variable which is used in the Output Document template does not yet exist, then the variable name will be inserted in the generated file, not a value for that variable.</font></dd></dl>
<p><strong>Examples:</strong><br><strong>1.</strong> If the template file for the Output Document contains a case variable which is set in the same trigger which calls <a href="#PMFGenerateOutputDocument.28.29">PMFGenerateOutputDocument()</a>, then the case variable will have to first be saved to the database using the <a href="#PMFSendVaraibles.28.29">PMFSendVariables()</a> function.</p>
<p>For example, the template contains the variables <code>@#ClientName</code> and <code>@#AccountNumber</code>. Those variables will be saved to the database with <code>PMFSendVariables()</code> before calling <code>PMFGenerateOutputDocument()</code>.</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$vars</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;ClientName&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Sally Simpson&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;AccountNumber&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;G2938-238&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFSendVariables<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #000088;">$vars</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$docId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'954109698491477e1986b43042252891'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//output document unique ID</span><br />
PMFGenerateOutputDocument<span style="color: #009900;">&#40;</span><span style="color: #000088;">$docId</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p><strong>2.</strong> Generate an Output Document for the current case, then open the HTML file which was generated for it and insert it into an email template named "outDocMail.html" which has the inserted variable <code>@#mailBody</code>:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$docId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'954109698491477e1986b43042252891'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//set to the Output Document's unique ID</span><br />
PMFGenerateOutputDocument<span style="color: #009900;">&#40;</span><span style="color: #000088;">$docId</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">//find the generated Output Document in the wf_&amp;&lt;WORKSPACE&gt;.APP_DOCUMENT table</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT MAX(DOC_VERSION) AS MAX_VERSION, APP_DOC_UID FROM APP_DOCUMENT <br />
&nbsp; &nbsp;WHERE APP_UID = '<span style="color: #006699; font-weight: bold;">$caseId</span>' AND DOC_UID='<span style="color: #006699; font-weight: bold;">$docId</span>'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$pathFilename</span> <span style="color: #339933;">=</span> PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>APPLICATION <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">'outdocs'</span><span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'_'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'MAX_VERSION'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.html'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$body</span> <span style="color: #339933;">=</span> <a href="http://php.net/file_get_contents"><span style="color: #990000;">file_get_contents</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$pathFilename</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'theboss@example.com'</span><span style="color: #339933;">,</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'mail'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">'Generated Output Document'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'outDocMail.html'</span><span style="color: #339933;">,</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'mailBody'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$body</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>To send a generated Output Document file as an attachment in an email, see this <a href="#PMFSendMessage.28.29">example</a>.</p>
<p><strong>3.</strong> Generate an Output Document for the current case and then lookup the generated Output Document files in the <strong><tt>APP_DOCUMENT</tt></strong> table. Copy the generated DOC and PDF files to another directory in the same server using the <a  href="http://www.php.net/manual/en/function.copy.php">copy()</a> function and to a remote server using the <a  href="http://www.php.net/manual/en/function.ssh2-scp-send.php">ssh2_scp_send()</a> function.</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$docId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'954109698491477e1986b43042252891'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//set to the Output Document's unique ID</span><br />
PMFGenerateOutputDocument<span style="color: #009900;">&#40;</span><span style="color: #000088;">$docId</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">//find the generated Output Document in the wf_&lt;WORKSPACE&gt;.APP_DOCUMENT table</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT MAX(DOC_VERSION) AS MAX_VERSION, APP_DOC_UID FROM APP_DOCUMENT <br />
&nbsp; &nbsp;WHERE APP_UID = '<span style="color: #006699; font-weight: bold;">$caseId</span>' AND DOC_UID='<span style="color: #006699; font-weight: bold;">$docId</span>'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$docPath</span> <span style="color: #339933;">=</span> PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>APPLICATION <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">'outdocs'</span><span style="color: #339933;">.</span> PATH_SEP<span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$filename</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'_'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'MAX_VERSION'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//copy to another directory on the same server:</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$otherDir</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'C:\path\to\file\\'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//set to path for another directory</span><br />
&nbsp; &nbsp;<a href="http://php.net/copy"><span style="color: #990000;">copy</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;<span style="color: #006699; font-weight: bold;">$docPath</span><span style="color: #006699; font-weight: bold;">$filename</span>.doc&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;<span style="color: #006699; font-weight: bold;">$otherDir</span><span style="color: #006699; font-weight: bold;">$filename</span>.doc&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//if generating DOC files </span><br />
&nbsp; &nbsp;<a href="http://php.net/copy"><span style="color: #990000;">copy</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;<span style="color: #006699; font-weight: bold;">$docPath</span><span style="color: #006699; font-weight: bold;">$filename</span>.pdf&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;<span style="color: #006699; font-weight: bold;">$otherDir</span><span style="color: #006699; font-weight: bold;">$filename</span>.pdf&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//if generating PDF files</span><br />
<br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//copy to a remote server:</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$remoteDir</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'/path/to/file/'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//set to directory path on remote server</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$conn</span> <span style="color: #339933;">=</span> <a href="http://php.net/ssh2_connect"><span style="color: #990000;">ssh2_connect</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'www.example.com'</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">22</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//set to URL for remote server</span><br />
&nbsp; &nbsp;<a href="http://php.net/ssh2_auth_password"><span style="color: #990000;">ssh2_auth_password</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$conn</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'username'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'password'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//set the username and password </span><br />
&nbsp; &nbsp;<a href="http://php.net/ssh2_scp_send"><span style="color: #990000;">ssh2_scp_send</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$conn</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;<span style="color: #006699; font-weight: bold;">$docPath</span><span style="color: #006699; font-weight: bold;">$filename</span>.doc&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;<span style="color: #006699; font-weight: bold;">$remoteDir</span><span style="color: #006699; font-weight: bold;">$filename</span>.doc&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<a href="http://php.net/ssh2_scp_send"><span style="color: #990000;">ssh2_scp_send</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$conn</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;<span style="color: #006699; font-weight: bold;">$docPath</span><span style="color: #006699; font-weight: bold;">$filename</span>.pdf&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;<span style="color: #006699; font-weight: bold;">$remoteDir</span><span style="color: #006699; font-weight: bold;">$filename</span>.pdf&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<h3><span id="PMFGetUserEmailAddress.28.29">PMFGetUserEmailAddress()</span></h3>
<p><code>PMFGetUserEmailAddress()</code> returns the email addresses for the specified user(s).</p>

<codeblock><i>variant</i> <strong>PMFGetUserEmailAddress</strong>(<i>variant</i> $id, <i>string</i> $APP_UID=null, <i>string</i> $prefix='usr')
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>variant</i> <strong>$id</strong>:</code> A list of recipients, which can be a mixture of user IDs, group IDs, variable names or email addresses. To find the IDs for users and groups, go to <strong>ADMIN &gt; Settings &gt; Web Services Test</strong> and use the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#User_List" title="ProcessMaker WSDL Web Services">userList()</a> and <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#Group_List" title="ProcessMaker WSDL Web Services">groupList()</a> web services or look them up in the <strong><tt>wf_&lt;WORKSPACE&gt;.USERS.USR_UID</tt></strong> field in the database or in <strong><tt>wf_&lt;WORKSPACE&gt;.CONTENT.CON_ID</tt></strong> where <code>CON_CATEGORY='GRP_TITLE'</code>. This list can either be an array with each recipient in a separate element or a string with each recipient separated by commas ",". If the recipients are all the same type, then set that type in the <code>$prefix</code> parameter. If the list contains a mix of different types, then prepend <code>"usr|"</code>, <code>"grp|"</code>, <code>"dyn|"</code> or <code>"ext|"</code> before each recipient. For the currently assigned user to a case, use <code>"-1"</code> or <code>"usr|-1"</code>.</li>
<li><i>string</i> <strong>$APP_UID</strong>:</code> An optional parameter. If using variables or the currently assigned user, then specify the unique ID of the case which contains the variables. For the current case do not include the parameter or use <code>NULL</code>.</li>
<li><i>string</i> <strong>$prefix</strong>:</code> An optional parameter. Specify the type for <i>all</i> the recipients in the list:
<ul><li><code>"usr":</code> All the recipients are users, so the <code>$id</code> is a list of unique IDs for users. This is the default value if the parameter is not included.</li>
<li><code>"grp":</code> All the recipients are groups, so the <code>$id</code> is a list of unique IDs for groups.</li>
<li><code>"dyn":</code> All the recipients are variables, so the <code>$id</code> is a list of case variable names from the case specified in the $APP_UID parameter.</li>
<li><code>"ext":</code> All the recipients are external email addresses, so the <code>$id</code> is a list of email addresses.</li></ul></li></ul>
<div style="line-height: 19.0499992370605px; margin-left: 20px;"><p>If the <code>$id</code> has mixed types of recipients, then do not include this parameter and specify the type in the <code>$id</code>, separated by vertical bars "|".</p></div>
<p><strong>Return Value:</strong><br>A list of email addresses. If the <code>$id</code> is a string, then a string will be returned with each email address separated by commas. If the <code>$id</code> was an array, then an array will be returned of email addresses. If there were no valid recipients in the <code>$id</code>, then the function returns <code>false</code>.</p>
<p><strong>Examples:</strong><br>Send an email to the currently assigned user for the current case:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$to</span> <span style="color: #339933;">=</span> PMFGetUserEmailAddress<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'-1'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;boss@example.com&quot;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$to</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Reminder Notice'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'reminderNote.html'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>To send an email to the currently assigned user and two users with the IDs "79498307748c8645cbed0d2037379255" and "6187429034914a77c452de6051925565" for the current case:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$to</span> <span style="color: #339933;">=</span> PMFGetUserEmailAddress<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'-1, 79498307748c8645cbed0d2037379255, 6187429034914a77c452de6051925565'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;boss@example.com&quot;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$to</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Reminder Notice'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'reminderNote.html'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>To do the same thing with an array of recipients:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aTo</span> <span style="color: #339933;">=</span> PMFGetUserEmailAddress<span style="color: #009900;">&#40;</span><a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'-1'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'79498307748c8645cbed0d2037379255'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'6187429034914a77c452de6051925565'</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$sTo</span> <span style="color: #339933;">=</span> <a href="http://php.net/implode"><span style="color: #990000;">implode</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">','</span> <span style="color: #000088;">$aTo</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//convert to a string with emails separated by commas</span><br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;boss@example.com&quot;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$sTo</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Reminder Notice'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'reminderNote.html'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>Send out an email to the user IDs found in the case variables <code>@@StoreManager</code>, <code>@@RegionalManager</code>, <code>@@CEO</code> for the current case:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$to</span> <span style="color: #339933;">=</span> PMFGetUserEmailAddress<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'StoreManager, RegionalManager, CEO'</span><span style="color: #339933;">,</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'dyn'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'boss@example.com'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$to</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Reminder Notice'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'reminderNote.html'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>Send out the same email as above, but use the case variables for a case with the ID "1014502514e4556596e2e29033579043" and send the email in that case:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$to</span> <span style="color: #339933;">=</span> PMFGetUserEmailAddress<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'StoreManager, RegionalManager, CEO'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'1014502514e4556596e2e29033579043'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'dyn'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'1014502514e4556596e2e29033579043'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'boss@example.com'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$to</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Reminder Notice'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'reminderNote.html'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>Send an email to users, groups, variables and email addresses. In this example, the email is sent to the currently assigned user to the current case, all the members of a group with the UID of "6538387794e45573cdaa563079341214", a user whose UID is specified in the field "selectedManager" in a DynaForm, and to the email address "john_doe@example.com":</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$ids</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'usr|-1, grp|6538387794e45573cdaa563079341214, dyn|selectedManager, ext|john_doe@example.com'</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$to</span> <span style="color: #339933;">=</span> PMFGetUserEmailAddress<span style="color: #009900;">&#40;</span><span style="color: #000088;">$ids</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'boss@example.com'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$to</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Reminder Notice'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'reminderNote.html'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>To do the same thing, using an array:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aIds</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'usr|-1'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'grp|6538387794e45573cdaa563079341214'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'dyn|selectedManager'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'ext|john_doe@example.com'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$aTo</span> <span style="color: #339933;">=</span> PMFGetUserEmailAddress<span style="color: #009900;">&#40;</span><span style="color: #000088;">$aIds</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$sTo</span> <span style="color: #339933;">=</span> <a href="http://php.net/implode"><span style="color: #990000;">implode</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">','</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aTo</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'boss@example.com'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$sTo</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Reminder Notice'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'reminderNote.html'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="PMFGetNextAssignedUser.28.29">PMFGetNextAssignedUser()</span></h3>
<p><code>PMFGetNextAssignedUser()</code> returns an array of information about the user designated (i.e., chosen out of the assignment pool) to work on the <i>next</i> task for a specified case.</p>

<codeblock><i>array</i> <strong>PMFGetNextAssignedUser</strong>(<i>string</i> $application, <i>string</i> $task)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>$application</strong>:</code> The unique ID for a case. For the current case, use the system variable <code>@@APPLICATION</code>. For other cases, use the <a href="#PMFCaseList.28.29">PMFCaseList()</a> function or <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#caseList.28.29" title="ProcessMaker WSDL Web Services">caseList()</a> web service. Alternatively, query the <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_UID</tt></strong> or <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DELEGATION.APP_UID</tt></strong> fields in the database</li>
<li><i>string</i> <strong>$task</strong>:</code> The unique ID for the task, which can be found with <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#Task_List" title="ProcessMaker WSDL Web Services">taskList()</a> at <strong>ADMIN &gt; Settings &gt; Web Services Test</strong> or by querying the <strong><tt>wf_&lt;WORKSPACE&gt;.TASK.TAS_UID</tt></strong> field in the database.</li></ul>
<p><strong>Return Value:</strong><br>An associative array of information about the user to be designated to work on the next task in the specified case, with the following elements:</p>
<ul><li><i>string</i> 'USR_UID':</code> The unique ID of the next assigned user.</li>
<li><i>string</i> 'USR_USERNAME':</code> The username of the next assigned user.</li>
<li><i>string</i> 'USR_FIRSTNAME':</code> The first name of the next assigned user.</li>
<li><i>string</i> 'USR_LASTNAME':</code> The last name of the next assigned user.</li>
<li><i>string</i> 'USR_EMAIL':</code> The email address of the next assigned user.</li></ul>
<dl><dd><span style="color: red;"><strong>Warning:</strong></span> <font color="dimgrey">This function only works reliably in certain circumstances. In most circumstances, it is recommended to get the next designated user by querying the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DELEGATION.USR_UID</tt></strong> field in the database in a trigger fired <i>after derivation</i>. See this <a href="../index.php/Notifications.html#For_Next_Tasks_with_Any_Type_of_Designation_Rule" title="Notifications">email example</a> and this <a href="../index.php/Trigger_Examples.html#Skipping_the_Next_Task_in_a_Case" title="Trigger Examples">routing example</a>.</font></dd></dl>
<p>This function should <i>only</i> be used for tasks which have <a href="../index.php/Processes#Cyclical_Assignment" title="Processes">cyclical assignment</a>, since this function checks who was the last user designated to work on the task (which is stored in the <strong><tt>wf_&lt;WORKSPACE&gt;.TASK.TAS_LAST_ASSIGNED</tt></strong> field in the database) and then returns the next user in the list. That next user will be assigned to the next case that routes to the task, however, the next case may not be the case specified by the <code>$application</code> parameter. Therefore, it is recommended to use this function in processes which do NOT have multiple cases being executed at the same time. If the process might execute multiple simultaneous cases, then only call this function in a trigger which fires <i>before assignment</i> of the next task.</p>
<dl><dd><span style="color: red;"><strong>Warning:</strong></span> <font color="dimgrey">Before version 2.0.35, a bug</a> caused this function to <i>only</i> work correctly with tasks that use the default <a href="../index.php/Processes#Cyclical_Assignment" title="Processes">cyclical assignment</a> and are assigned to individual users (not to groups). If the next tasks are parallel tasks, then it will only return the next assigned user to <i>one</i> of the parallel tasks.</font></dd></dl>
<p><strong>Example:</strong><br>Send an email to the designated user for the next task in the current case, warning him/her about an upcoming case to work on. Send the first and last names of the next user as the variables <code>@#firstname</code> and <code>@#lastname</code> to insert in the email template:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$taskId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'1220028735824ce9181a724086456364'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//set to task ID</span><br />
<span style="color: #000088;">$aUser</span> <span style="color: #339933;">=</span> PMFGetNextAssignedUser<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #000088;">$taskId</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$aVars</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'firstname'</span><span style="color: #339933;">=&gt;</span><span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'USR_FIRSTNAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'lastname'</span><span style="color: #339933;">=&gt;</span><span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'USR_LASTNAME'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'boss@example.com'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'USR_EMAIL'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <br />
&nbsp; &nbsp;<span style="color: #0000ff;">'Upcoming case to work on'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'upcomingCase.html'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aVars</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> </div></div>

<h3><span id="PMFDeleteCase.28.29">PMFDeleteCase()</span></h3>
<p><code>PMFDeleteCase()</code> deletes a specified case. Note that a case can only be deleted when it is in its initial task (i.e., when its delegation index is <code>1</code>). Once the case moves to subsequent tasks in the process, it can only be canceled, so use <a href="#PMFCancelCase.28.29">PMFCancelCase()</a> instead of <code>PMFDeleteCase()</code>.</p>

<codeblock><i>int</i> <strong>PMFDeleteCase</strong>(<i>string</i> caseId)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>caseId</strong>: The unique ID for a case. For the current case use the system variable <code>@@APPLICATION</code>. Other cases UIDs can be found with <a href="#PMFCaseList.28.29">PMFCaseList()</a>, <a href="../index.php/Simple_Trigger_Web_Services.html#WSCaseList.28.29" title="Simple Trigger Web Services">WSCaseList()</a>, <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#caseList.28.29" title="ProcessMaker WSDL Web Services">caseList()</a> or by querying the field <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_UID</tt></strong>.</li></ul>
<p><strong>Return value:</strong></p>
<ul><li>Returns 1 if the case was successfully deleted, otherwise returns 0 if an error occurred.</li></ul>
<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span><span style="color: #b1b100;">return</span> <span style="color: #339933;">=</span> PMFDeleteCase<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> In this case, use <a href="#PMFDerivateCase.28.29">PMFDerivateCase()</a> to go back to the list of cases.</font></p>
<h3><span id="PMFCancelCase.28.29">PMFCancelCase()</span></h3>
<p><code>PMFCancelCase()</code> cancels a specified case</p>

<codeblock><i>int</i> <strong>PMFCancelCase</strong>(<i>string</i> caseUid, <i>string</i> delIndex, <i>string</i> userUid)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>caseUid</strong>: The unique ID of the case, which can be found in the following ways:
<ul><li>Use the <code>@@APPLICATION</code> system variable to get the unique ID of the current case.</li>
<li>Use the <a href="#PMFCaseList.28.29">PMFCaseList()</a>, <a href="../index.php/Simple_Trigger_Web_Services.html#WSCaseList.28.29" title="Simple Trigger Web Services">WSCaseList()</a> or the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#caseList.28.29" title="2.0/ProcessMaker WSDL Web Services">caseList()</a> web service.</li></ul></li>
<li><i>string</i> <strong>delIndex</strong>: The delegation index of the current task in the case. For the current case, use the <code>@%INDEX</code> system variable.</li>
<li><i>string</i> <strong>userUid</strong>: The unique ID of the user who will cancel the case. For the currently logged-in user, use the <code>@@USER_LOGGED</code> system variable.</li></ul>
<p><strong>Return value:</strong></p>
<ul><li>Returns 1 if the case was successfully canceled, otherwise returns 0 if an error occurred.</li></ul>
<p><strong>Example:</strong></p>
<p>The following trigger code cancels the current case and uses the die() function to prevent the next step from be executed:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span><span style="color: #b1b100;">return</span> <span style="color: #339933;">=</span> PMFCancelCase<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #339933;">@%</span>INDEX<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;G<span style="color: #339933;">::</span><a href="http://php.net/header"><span style="color: #990000;">header</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Location: casesListExtJsRedirector&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> &nbsp;<span style="color: #666666; font-style: italic;">//redirect back to Inbox</span><br />
&nbsp; &nbsp;<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #339933;">;</span> &nbsp;<span style="color: #666666; font-style: italic;">//die to prevent next step</span></div></div>
<p>If wishing to inform the user that the current case was cancelled, instead of using <a href="../index.php/Internal_Functions_and_Classes.html#G::header.28.29">G::header()</a> to redirect to the Inbox, print a message on screen:<br>
<span class="geshifilter"><code class="php geshifilter-php"><span style="color: #b1b100;">print</span> <span style="color: #0000ff;">&quot;Current case cancelled.&quot;</span><span style="color: #339933;">;</span></code></span>  

<h3><span id="PMFAddInputDocument.28.29">PMFAddInputDocument()</span></h3>
<p style="margin-left:25px"><strong><font color="#009688">Available Version:</font></strong><font color="dimgray"> From 2.5.0 on.</font></p>
<p><code>PMFAddInputDocument()</code> adds an Input Document file to a specified case.</p>

<codeblock><i>string</i> <strong>PMFAddInputDocument</strong>(<i>string</i> inputDocumentUid, <i>string</i> appDocUid, <i>int</i> docVersion, <i>string</i> appDocType = 'INPUT', <i>string</i> appDocComment, 
                           <i>string</i> inputDocumentAction, <i>string</i> caseUid, <i>int</i> delIndex, <i>string</i> taskUid, <i>string</i> userUid, <i>string</i> option = 'file', 
                           <i>string</i> file = 'path_to_file/myfile.txt')
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>inputDocumentUid</strong>: The unique ID of the Input Document definition. This can be found by clicking on the <strong>UID</strong> button in the list of Input Documents or by using the following database query:</li></ul>
<dl><dd><dl><dd><code>SELECT CON_ID FROM CONTENT WHERE CON_CATEGORY='INP_DOC_TITLE' AND CON_VALUE='<i><strong>INPUT-DOC-TITLE'</strong></i></code></dd></dl></dd></dl>
<ul><li><i>string</i> <strong>appDocUid</strong>: The unique ID of the file to be replaced or a new version added. Set to <code>null</code> or <code>""</code> (empty string) if adding a new file.</li>
<li><i>int</i> <strong>docVersion</strong>: The document version, which starts numbering from 1. If adding a new version, increment the existing version by 1.</li>
<li><i>string</i> <strong>appDocType</strong>: The document type, which is 'INPUT' for an Input Document file or 'ATTACHED' for an attached file (which is uploaded to a file field).</li>
<li><i>string</i> <strong>appDocComment</strong>: The comment for the uploaded file.</li>
<li><i>string</i> <strong>inputDocumentAction</strong>: The action, which can be: <code>null</code> or <code>""</code> for <i>add</i>, <code>"R"</code> for <i>replace</i> or <code>"NV"</code> for <i>new version</i>.</li>
<li><i>string</i> <strong>caseUid</strong>: The unique ID of the case to which the file will added. It can be found in the following ways:
<ul><li>Use the <code>@@APPLICATION</code> system variable to get the unique ID of the current case.</li>
<li>Use the <a href="#PMFCaseList.28.29">PMFCaseList()</a>, <a href="../index.php/Simple_Trigger_Web_Services.html#WSCaseList.28.29" title="Simple Trigger Web Services">WSCaseList()</a> or the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#caseList.28.29" title="2.0/ProcessMaker WSDL Web Services">caseList()</a> web service.</li>
<li>Use <a href="#executeQuery.28.29">executeQuery()</a> to lookup the case UID in the <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_UID</tt></strong> field in the database.</li></ul></li>
<li><i>int</i> <strong>delIndex</strong>: The delegation index of the case to which the file will be added. It can be found in the following ways:
<ul><li>Use the system variable <code>@%INDEX</code> for the current case.</li>
<li>Use the <a href="#PMFCaseList.28.29">PMFCaseList()</a>, <a href="../index.php/Simple_Trigger_Web_Services.html#WSCaseList.28.29" title="Simple Trigger Web Services">WSCaseList()</a> or the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#caseList.28.29" title="2.0/ProcessMaker WSDL Web Services">caseList()</a> web service.</li>
<li>Use <a href="#executeQuery.28.29">executeQuery()</a> to lookup the delegation index in the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_CACHE_VIEW.DEL_INDEX</tt></strong> field <code>WHERE DEL_THREAD_STATUS='OPEN'</code>.</li></ul></li>
<li><i>string</i> <strong>userUid</strong>: The unique ID of the user who is set as the uploader of the file.</li>
<li><i>string</i> <strong>option</strong>: The option which should be set to: <code>"file"</code></li>
<li><i>string</i> <strong>file</strong>: The path to the file to be added, which is stored on the ProcessMaker server.</li></ul>
<p><strong>Return value:</strong></p>
<ul><li>Returns ID if it has added the Input Document successfully; otherwise, returns null or empty if an error occurred.</li></ul>
<p><strong>Example:</strong></p>
<p>Create an Input Document in ProcessMaker. Look up its current ID and assign it to the variable named <code>inputDocumentUid</code>. Set the values to ‘null’ of the application document Id and to ‘Add’ of the Document Action if it is the first time you are running the process.</p>

<codeblock>inputDocumentUid  = 757584323513f501410f3f3061256214
appDocUid = null
inputDocumentAction = Add
</codeblock>

<p>Set the following trigger to execute before the Input Document files will be displayed:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span><span style="color: #b1b100;">return</span> <span style="color: #339933;">=</span> PMFAddInputDocument<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'757584323513f501410f3f3061256214'</span><span style="color: #339933;">,</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'INPUT'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Testing'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Add'</span><span style="color: #339933;">,</span> <br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>INDEX<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>TASK<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">,</span> <span style="color: #0000ff;">'file'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'c:\file.txt'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>If the same document needs to be uploaded as a new version, copy the Document Id previously added with the following parameters:</p>

<codeblock>inputDocumentUid  = 757584323513f501410f3f3061256214
appDocUid = 456268310513fa1b624c751021820069 //obtain this from the return variable while case is running or from the database wf_&lt;WORKSPACE&gt;.INPUT_DOCUMENT
inputDocumentAction = NV
</codeblock>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> Don’t forget to enable versioning when defining the Input Document. Otherwise, it won’t be possible to upload another version of the same Input Document file.</font></p>

<h3><span id="PMFAddCaseNote.28.29">PMFAddCaseNote()</span></h3>
<p style="margin-left:25px"><strong><font color="#009688">Available Version:</font></strong><font color="dimgray"> From 2.5.0 on.</font></p>
<p><code>PMFAddCaseNotes()</code> returns a string of information about the case notes added during a process. This function is available from version <strong>2.5</strong> on.</p>

<codeblock><i>array</i> <strong>PMFAddCaseNotes</strong>(<i>string</i> $caseUid, <i>string</i> $processUid, <i>string</i> $taskUid, <i>string</i> $userUid, <i>string</i> $note, <i>int</i> $sendMail = 1)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>caseUid</strong>: (Required) The unique ID of the case, which can be found in the following ways:
<ul><li>Use the <code>@@APPLICATION</code> system variable to get the unique ID of the current case.</li>
<li>Use the <a href="#PMFCaseList.28.29">PMFCaseList()</a>, <a href="../index.php/Simple_Trigger_Web_Services.html#WSCaseList.28.29" title="Simple Trigger Web Services">WSCaseList()</a> or the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#caseList.28.29" title="2.0/ProcessMaker WSDL Web Services">caseList()</a> web service.</li></ul></li>
<li><i>string</i> <strong>processId</strong>: (Required) The unique ID of the process, which can be found in the following ways:
<ul><li>For the current process, use the <code>@@PROCESS</code> system variable.</li>
<li>Use executeQuery() to look up the unique ID in the <strong><tt>wf_&lt;WORKSPACE&gt;.PROCESS.PRO_UID</tt></strong> field.</li></ul></li>
<li><i>string</i> <strong>taskId</strong>: (Required) The unique ID of the task, which can be found in the following ways:
<ul><li>Use the <code>@@TASK</code> system variable for the unique ID of the current task.</li>
<li>Use the <a href="#PMFTaskList.28.29">PMFTaskList()</a> function or <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#taskList.28.29" title="2.0/ProcessMaker WSDL Web Services">taskList()</a> web service.</li>
<li>Query the <strong><tt>wf_&lt;WORKSPACE&gt;.TASK.TAS_UID</tt></strong> field in the database or get the starting task of the current process with the following query:</li></ul></li></ul>
<dl><dd><dl><dd>executeQuery("SELECT TAS_UID FROM TASK WHERE PRO_UID='"</span> <span class="sy0" style="color: rgb(51, 153, 51);">.</span> <span class="sy0" style="color: rgb(51, 153, 51);">@@</span>PROCESS <span class="sy0" style="color: rgb(51, 153, 51);">.</span> <span class="st0" style="color: rgb(0, 0, 255);">"' AND TAS_START='TRUE'"</span>)</span></span></dd></dl></dd></dl>
<ul>
<li><code><strong>$userUid</strong>:</code> (Required) The unique ID of the user who will add the case note. Note that it is NOT possible to include the UID of more than one user.</li>

<li><code><strong>$note</strong>:</code> (Required) Note of the case.</li>

<li><code><strong>$sendMail</strong>:</code> (Optional) If set to 1, will send an email to all participants in the case.</li>
</ul>

<p><strong>Return Value:</strong><br>Returns <strong>1</strong> if the note has been successfully added to the case, otherwise returns 0 if an error has occurred.</p>
<p><strong>Example:</strong></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span><span style="color: #b1b100;">return</span> <span style="color: #339933;">=</span> PMFAddCaseNote <span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,@@</span>PROCESS<span style="color: #339933;">,@@</span>TASK<span style="color: #339933;">,@@</span>USER_LOGGED<span style="color: #339933;">,</span><span style="color: #0000ff;">'Completed with resolution #234'</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> It is possible to use System or Process Variables when the description of the case note is defined. For instance if you want to add the resolution number which will be a value extracted from a Dynaform field, define the parameter as follows:</font></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span><span style="color: #b1b100;">return</span><span style="color: #339933;">=</span>PMFAddCaseNote <span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,@@</span>PROCESS<span style="color: #339933;">,@@</span>TASK<span style="color: #339933;">,@@</span>USER_LOGGED<span style="color: #339933;">,</span><span style="color: #0000ff;">'Completed with resolution - '</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>NumberResolution<span style="color: #0000ff;">',1);</span></div></div>

<p>As you can see in the above example, the process variable is concatenated with the description using the following syntaxis <code>' . variablename'</code></p>
<h3><span id="PMFGetCaseNotes.28.29">PMFGetCaseNotes()</span></h3>
<p><code>PMFGetCaseNotes()</code> returns a list of the cases notes posted for a specified case. This function is available from version <strong>2.0.41</strong> on.</p>

<codeblock><i>array</i> <strong>PMFGetCaseNotes</strong>(<i>string</i> $applicationID, <i>string</i> $type = 'array', <i>string</i> $userUid = '')
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>$application</strong>:</code> The unique ID for a case, which can be obtained in the following ways:
<ul><li>For the current case, use the system variable <code>@@APPLICATION</code>.</li>
<li>Use <a href="#PMFCaseList.28.29">PMFCaseList()</a>, <a href="../index.php/Simple_Trigger_Web_Services.html#WSCaseList.28.29" title="Simple Trigger Web Services">WSCaseList()</a> or the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#caseList.28.29" title="ProcessMaker WSDL Web Services">caseList()</a> web service.</li>
<li>Use <a href="#executeQuery.28.29">executeQuery()</a> to query the <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_UID</tt></strong> or <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DELEGATION.APP_UID</tt></strong> fields in the database</li></ul></li>
<li><i>string</i> <strong>$type</strong>:</code> <i>Optional parameter.</i> Set to <strong><code>'array'</code></strong> if the result will be displayed in a grid. Set to <strong><code>'string'</code></strong> to return a string, which can be displayed in a textarea field. The default value is <strong><code>'array'</code></strong>.</li>
<li><i>string</i> <strong>$userUid</strong>:</code> <i>Optional parameter.</i> To return the case notes posted by a single user, set to the unique ID of that user. If no user ID is specified, then it will return the cases notes from all users. For the currently logged-in user, use the <code>@@USER_LOGGED</code> system variable.</li></ul>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> It's not possible to define more than one user ID on the last parameter.</font></p>
<p><strong>Return Value:</strong><br>If the <code>$type</code> is set to <code>'array'</code>, then this function returns an array of associative arrays with the following structure:</p>

<codeblock>[1] <i>array</i> (
   <i>string</i> <strong>['FULL_NAME']</strong>: First name and last name of the user who created the case note.
   <i>string</i> <strong>['USR_USERNAME']</strong>: The username of the user who created the case note.
   <i>string</i> <strong>['NOTE_CONTENT']</strong>: The content of the case note.
   <i>string</i> <strong>['NOTE_DATE']</strong>: The datetime when the case note was created in <code>YYYY-MM-DD HH:MM:SS</code> format.
)
...
</codeblock>

<p>Note that the counting of the array starts from <strong>1</strong>, not <strong>0</strong>.</p>
<p>If the <code>$type</code> is set to <code>'string'</code>, then this function returns a string which includes the name and username of the user who posted the case note, the content of the case note, and the date-time when posted:</p>

<codeblock>FIRST-NAME LAST-NAME (USERNAME) NOTE-1-CONTENT (DATE-TIME-POSTED)
FIRST-NAME LAST-NAME (USERNAME) NOTE-2-CONTENT (DATE-TIME-POSTED)
... 
</codeblock>

<h4 style="margin-top: 0px; margin-bottom: 0.3em; overflow: hidden; padding-top: 0.5em; padding-bottom: 0.17em; border-bottom-style: none; width: auto; font-size: 14.7319993972778px; font-family: sans-serif; line-height: 19.0499992370605px; background-image: none; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span id="Showing_Case_Notes_in_a_Grid">Showing Case Notes in a Grid</span></h4>
<p>Create a grid with the return values to show:</p>

<codeblock>&lt;FULL_NAME type="text" maxlength="80" validate="Any" required="0" readonly="1" size="50" mode="edit" btn_cancel="Cancel"&gt;
  &lt;en&gt;Name&lt;/en&gt;
&lt;/FULL_NAME&gt;
&lt;USR_USERNAME type="text" maxlength="64" validate="Any" required="1" readonly="0" size="15" mode="edit" btn_cancel="Cancel"&gt;
  &lt;en&gt;UserName&lt;/en&gt;
&lt;/USR_USERNAME&gt;
&lt;NOTE_CONTENT type="textarea" required="0" readonly="1" rows="2" cols="32" mode="edit" btn_cancel="Cancel"&gt;
  &lt;en&gt;Note&lt;/en&gt;
&lt;/NOTE_CONTENT&gt;
&lt;NOTE_DATE type="date" relativedate="1" beforedate="01-01-2009" afterdate="01-01-2020" mask="%Y-%m-%d %H:%M:%S " editable="0" required="0" 
readonly="0" showtime="0" defaultvalue_sel="empty" mode="view" btn_cancel="Cancel"&gt;
  &lt;en&gt;Date&lt;/en&gt;
&lt;/NOTE_DATE&gt;
</codeblock>

<p>Then create a DynaForm and inside it add the grid previously created and name it <code>gridPMFunction</code>:</p>

<codeblock>&lt;gridPMFunction type="grid" xmlgrid="9577861994fe233788e6a02034224294/5229711444fe233788feb04097019207" addrow="0" deleterow="0" btn_cancel="Cancel"/&gt;
</codeblock>

<p>Then create a trigger with the following parameters:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>gridPMFunction <span style="color: #339933;">=</span> PMFGetCaseNotes<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span><span style="color: #0000ff;">'array'</span><span style="color: #339933;">,</span><span style="color: #0000ff;">''</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>Where:</p>
<p><code><strong>@@gridPMFunction</code>:</strong> name of the grid added inside the DynaForm and where results will be shown.</p>
<p><code><strong>@@APPLICATION</code>:</strong> UID of the current process.</p>
<p><code><strong>array</strong></code>: results to show, in the case of the example, results will be shown in a grid.</p>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> The last parameter is empty so it will display case notes of all users who have created one.</font></p>
<p>Assign the trigger before the DynaForm created and the results will be as the image below:</p>

<p><img alt="" src="../sites/default/files/PMFGetCaseNotesGrid.png"></p>

<p>In the example the trigger was assigned in the second task, so all case notes added on the first task and even on the second task will be displayed on the grid.</p>

<h4><span id="Showing_Case_Notes_in_a_TextBox">Showing Case Notes in a TextBox</span></h4>
<p>Create a Dynaform with a textarea called <code>textAreaPMFunction</code>,</p>

<codeblock>&lt;textAreaPMFunction type="textarea" required="0" readonly="0" rows="5" cols="90" mode="edit" btn_cancel="Cancel"&gt;
    &lt;en&gt;List of Case Notes&lt;/en&gt;
  &lt;/textAreaPMFunction&gt;
</codeblock>

<p>Then create a trigger as follows:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>textAreaPMFunction <span style="color: #339933;">=</span> PMFGetCaseNotes<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span><span style="color: #0000ff;">'string'</span><span style="color: #339933;">,</span><span style="color: #0000ff;">''</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>Where:</p>
<p><code><strong>@@textAreaPMFuntion </code>:</strong> name of the textarea added in the DynaForm and where results will be shown.</p>
<p><code><strong>@@APPLICATION</code>:</strong> UID of the current process.</p>
<p><code><strong>string</code>:</strong> results to show, in the case of the example they will be shown in a textarea.</p>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> The last parameter is empty so it will display case notes of all users who have created one.</font></p>
<p>Assign the trigger before the DynaForm, the result will be: </p>

<p><img alt="" src="../sites/default/files/PMFGetCaseNotesTextArea.png"></p>

<h3><span id="PMFInformationUser.28.29">PMFInformationUser()</span></h3>
<p><code>PMFInformationUser()</code> retrieves more information about a specified user than the <a href="#userInfo.28.29">userInfo() function</a>. The <code>PMFInformationUser()</code> function is available in version <strong>2.0.46</strong> and later and is not compatible with previous versions of ProcessMaker. In contrast, the <a href="#userInfo.28.29">userInfo() function</a> can be used with any version of ProcessMaker.</p>

<codeblock><i>array</i> <strong>PMFInformationUser</strong>(<i>string</i> $userUid)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>USER_ID</strong>: The user's unique ID, which can be found in the following ways:
<ul><li>Get the UID of the currently logged-in user with the <code>@@USER_LOGGED</code> system variable or <code>$_SESSION['USER_LOGGED']</code>.</li>
<li>Use the <a href="#PMFUserList.28.29">PMFUserList()</a> or <a href="../index.php/Simple_Trigger_Web_Services.html#WSUserList.28.29" title="Simple Trigger Web Services">WSUserList()</a> functions, or the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#userList.28.29" title="ProcessMaker WSDL Web Services">userList()</a> web service.</li>
<li>Query the <strong><tt>wf_&lt;WORKSPACE&gt;.USERS.USR_UID</tt></strong> field in the database with <a href="#executeQuery.28.29">executeQuery()</a>.</li></ul></li></ul>
<p><strong>Return Value:</strong></p>
<p>An associative array with the following keys:</p>
<ul><li><i>string</i> 'username'</code>: The username, which must be unique.</li>
<li><i>string</i> 'firstname'</code>: The user's first name (maximum of 50 characters).</li>
<li><i>string</i> 'lastname'</code>: The user's last name (maximum of 50 characters).</li>
<li><i>string</i> 'mail'</code>: The user's email address (maximum of 100 characters).</li>
<li><i>string</i> 'address'</code>: The user's address (maximum of 255 characters).</li>
<li><i>string</i> 'zipcode'</code>: The user's zip or postal code (maximum of 16 characters).</li>
<li><i>string</i> 'country'</code>: The user's country.</li>
<li><i>string</i> 'state'</code>: The user's state, province or region.</li>
<li><i>string</i> 'location'</code>: The user's location.</li>
<li><i>string</i> 'phone'</code>: The user's phone number (maximum of 24 characters).</li>
<li><i>string</i> 'cellular'</code>: The user's cellular phone number (maximum of 24 characters).</li>
<li><i>string</i> 'birthday'</code>: The user's birthday in <code>"YYYY-MM-DD"</code> format. Ex: <code>"1970-11-24"</code></li>
<li><i>string</i> 'position'</code>: The user's position.</li>
<li><i>string</i> 'replacedby'</code>: The unique ID of the user who will replace the user, when his/her status changes to <code>INACTIVE</code> or <code>VACATION</code>. Use the <code>PMFInformationUser()</code> function a second time to get his/her name.</li>
<li><i>string</i> 'duedate'</code>: Date when the user account will expire in <code>'YYYY-MM-DD'</code> format. Ex: <code>"2020-12-31"</code></li>
<li><i>string</i> 'status'</code>: The user's status, which can be: <code>ACTIVE</code>, <code>INACTIVE</code> or <code>VACATION</code>.</li>
<li><i>string</i> 'department'</code>: The unique ID of the department. To get the name of the department, use a database query in the CONTENTS table where: <code>CON_ID='&lt;DEPARTMENT-UID&gt;' AND CON_CATEGORY='DEPO_TITLE'</code></li>
<li><i>string</i> 'reportsto'</code>: The unique ID of the user's supervisor in the department. Use the <code>PMFInformationUser()</code> function a second time to get his/her name.</li>
<li><i>string</i> 'userexperience'</code>: The User Experience setting, which can be: <code>NORMAL</code>, <code>SINGLE</code> (for a single application), <code>SIMPLIFIED</code> (for mobile interfaces), or <code>SWITCHABLE</code> (to be able to change between the normal and the simplified interfaces).</li>
<li><i>string</i> 'photo'</code>: The path where the user's photo file is stored in the ProcessMaker server at:</li></ul>
<dl><dd><dl><dd><code>&lt;INSTALL-DIRECTORY&gt;/shared/sites/&lt;WORKSPACE&gt;/usersPhotographies/&lt;USER-UID&gt;.gif</code></dd></dl></dd><dd>For example:<dl><dd><code>/opt/processmaker/shared/sites/workflow/usersPhotographies/9108004215481b57a6e38b3002299563.gif</code></dd></dl></dd><dd>The URL to access the user's photo would be:<dl><dd><code>http://&lt;IP-ADDRESS&gt;/sys&lt;WORKSPACE/&lt;LANG&gt;/&lt;SKIN&gt;/users/users_ViewPhotoGrid?pUID=&lt;USER-UID&gt;</code></dd></dl></dd><dd>For example:<dl><dd><code>http://example.com/sysworkflow/en/neoclassic/users/users_ViewPhotoGrid?pUID=9108004215481b57a6e38b3002299563</code></dd></dl></dd><dd><strong><font color="green">Note:</font></strong> <font color="dimgrey">The extension of the photo file is always renamed as <strong><tt>.gif</tt></strong>, even if the file is JPEG or PNG, which can cause problems displaying the image in some web browsers because the file extension doesn't match the file type. To figure out the type of image file, the <a  href="http://php.net/manual/en/function.finfo-file.php">finfo_file()</a> function can be used to check whether the MIME file type is "image/png", "image/jpeg" or "image/gif".</font></dd></dl>
<p><strong>Example showing user information in a grid:</strong></p>
<p>First, create a grid form which has the following fields:</p>

<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;username</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>username<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/username<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;firstname</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>firstname<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/firstname<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;lastname</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>lastname<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/lastname<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;mail</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>email<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/mail<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;address</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>address<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/address<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;zipcode</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>zipcode<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/zipcode<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></div>

<p>Second, create a DynaForm with a grid field which is named "UserInformation", which holds the grid form defined above.</p>
<p>Third, create a trigger with the following code:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@</span>UserInformation <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>UserInformation<span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> PMFInformationUser<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'52801886050cb8ef0607682024302460'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>Where: <code>@@UserInformation[1]</code>: Name of the grid where information will be displayed. Moreover, the grid name is defined as [1] because the return value is a grid and it has to start on 1 to display information on the corresponding fields.</p>
<p>Set the above trigger to fire <i>before</i> the DynaForm.</p>
<p>Running a case, the user's information will be displayed in the grid:</p>

<p><img alt="" src="../sites/default/files/ResultUserInfo.png"></p>

<p>Also, this function can be created by using the Trigger Wizard:</p>

<p><img alt="" src="../sites/default/files/TriggerWizardUserInformation.png"></p>

<p><strong>Example showing a group of users in a grid:</strong></p>
<p>This example shows a grid in a DynaForm which lists information about the users in a group named "Managers".</p>
<p>First, create a grid form which has the following fields:</p>

<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;username</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>username<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/username<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;firstname</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>firstname<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/firstname<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;lastname</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>lastname<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/lastname<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;mail</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>email<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/mail<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;address</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>address<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/address<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;zipcode</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>zipcode<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/zipcode<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></div>

<p>Second, create a DynaForm with a grid field which is named "ListGroup", which holds the grid form defined above.</p>
<p>Third, create the following trigger which will use the executeQuery() function to look up the members of a group named "Managers". It then loops through the list of users and looks up information about each user and adds it to an array name "ListGroup" which will be displayed in the grid. Remember that grids are stored as an associative array of associative arrays, where the outer array is numbered, starting from 1 for each row in the array and the keys in the inner array are the fields in the grid:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;select U.USR_UID from CONTENT C, GROUP_USER GU, USERS U<br />
&nbsp; where C.CON_CATEGORY='GRP_TITLE' and C.CON_VALUE='Managers' and C.CON_ID=GU.GRP_UID and<br />
&nbsp; GU.USR_UID=U.USR_UID and U.USR_STATUS='ACTIVE'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$aUsers</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$aUsers</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$aUsers</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">for</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$i</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span> <span style="color: #339933;">&lt;=</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$aUsers</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span><span style="color: #339933;">++</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">@=</span>ListGroup<span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> PMFInformationUser<span style="color: #009900;">&#40;</span><span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'USR_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p><strong>Example looking up information about the Supervisor:</strong></p>
<p>The following trigger code retrieves information about the current logged-in user and then looks up information about the user's supervisor, whose unique ID is listed in the 'reportsto' key of the array. It also uses the executeQuery() function to look up the name of the department in the <strong><tt>CONTENT</tt></strong> table. The trigger then uses the <code>G:SendMessageText()</code> function to display a message in the next screen telling the user to contact his/her supervisor:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aUser</span> <span style="color: #339933;">=</span> PMFInformationUser<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #666666; font-style: italic;">//if the current user has a supervisor:</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span>blank<span style="color: #009900;">&#40;</span><span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'reportsto'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//lookup name of the user's supervisor:</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$aSuper</span> <span style="color: #339933;">=</span> PMFInformationUser<span style="color: #009900;">&#40;</span><span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'reportsto'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//lookup the name of the department:</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$aDept</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT CON_VALUE FROM CONTENT WHERE CON_ID='<span style="color: #006699; font-weight: bold;">{$aSuper['department']}</span>' <br />
&nbsp; &nbsp; &nbsp; AND CON_CATEGORY='DEPO_TITLE'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <br />
&nbsp; &nbsp;<br />
&nbsp; &nbsp;<span style="color: #000088;">$msg</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;Please contact your supervisor <span style="color: #006699; font-weight: bold;">{$aSuper['firstname']}</span> <span style="color: #006699; font-weight: bold;">{$aSuper['lastname']}</span> &quot;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;(<span style="color: #006699; font-weight: bold;">{$aSuper['mail']}</span>) of the <span style="color: #006699; font-weight: bold;">{$aDept[1]['CON_VALUE']}</span> Department for authorization of this decision.&quot;</span><span style="color: #339933;">;</span> <br />
&nbsp; &nbsp; &nbsp;<span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">SendMessageText</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$msg</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;WARNING&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #b1b100;">else</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">SendMessageText</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;You do not have authorization for this decision, &quot;</span><span style="color: #339933;">.</span> <br />
&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;because it needs a supervisor's approval, but you don't have a supervisor.&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;ERROR&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>Note that the PHP variables which are inserted in the $msg string are enclosed in <code>{...}</code> (curly brackets) so that they can access the array's key correctly.</p>
<h3><span id="PMFRemoveMask.28.29">PMFRemoveMask()</span></h3>
<p style="margin-left:25px"><strong><font color="#009688">Available Version:</font></strong><font color="dimgray"> 2.8.0 or later (or in <a href="../index.php/HotFix_2.5.2.html#Output_Documents_generation_configurations" title="HotFix 2.5.2.4 Complete List">Hotfix 2.5.2.4</a>)</font></p>
<p>The <code>PMFRemoveMask()</code> function removes the mask of a <i>currency field</i>, by deleting the thousands separator (which is a "." (period) or "," (comma) and the currency symbol, such as "$", "€", "£" or "¥". Call this function before using a currency field in a mathematical calculation which requires a number rather than a string.</p>

<codeblock><i>array</i> <strong>PMFRemoveMask</strong>(<i>string</i> fields, <i>string</i> separator = '.', <i>string</i> currency='')
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><i>string</i> <strong>field</strong>: Value to be stripped of thousands separators and currency symbols.</li></ul>
<ul><li><i>string</i> <strong>separator</strong>: Optional. The thousands separator, which by default is <code>"."</code> (period). In most European and Latin American countries, the thousands separator is <code>","</code> (comma).</li></ul>
<ul><li><i>string</i> <strong>currency</strong>: Optional. The currency symbol, which by default is set to an empty string, so no currency symbol is removed.</li></ul>
<p><strong>Return Value</strong></p>
<p>A string with the the currency and thousands separator removed.</p>
<p><span style="color: green;"><strong>Note:</strong></span> <font color="dimgrey">PMFRemoveMask() returns a <i>string</i>. In most cases this is not a problem, because PHP will automatically <a  href="http://php.net/manual/en/language.types.string.php#language.types.string.conversion">convert the string into a number</a> if it is used with a mathematical operator (+, -, *, /, %, etc.) or compared (==, !=, &gt;, &gt;=, &lt; or &lt;=) with a number. Nonetheless, it may be a good idea to convert the string into a real number using the <a  href="http://php.net/manual/en/function.floatval.php">floatval()</a> or into an integer using the <a  href="http://php.net/manual/en/function.intval.php">intval()</a> functions, in order to avoid potential problems.</font></p>
<p><strong>Example in a trigger:</strong></p>
<p>Use the <code>PMFRemoveMask()</code> function to delete the mask of a value introduced in a currency field named "Amount". Then use the <a  href="http://php.net/manual/en/function.is-numeric.php">is_numeric()</a> function to check whether it can be converted into a number. If so, then convert it to a real number and then subtract 10% from the amount for a discount. If not a valid number, then use the <code>G:SendMessageText()</code> function to display a warning message to the user on the next screen:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$amount</span> <span style="color: #339933;">=</span> PMFRemoveMask<span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>Amount<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;,&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;$&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_numeric"><span style="color: #990000;">is_numeric</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$amount</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$amount</span> <span style="color: #339933;">=</span> <a href="http://php.net/floatval"><span style="color: #990000;">floatval</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$amount</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <br />
&nbsp; &nbsp;<span style="color: #339933;">@=</span>Discount <span style="color: #339933;">=</span> <span style="color: #000088;">$amount</span> <span style="color: #339933;">-</span> <span style="color: #000088;">$amount</span> <span style="color: #339933;">*</span> <span style="color:#800080;">0.10</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #b1b100;">else</span> <span style="color: #009900;">&#123;</span> <span style="color: #666666; font-style: italic;">//if not a valid number, then display warning message</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">SendMessageText</span><span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>Amount <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; is not a valid amount.&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;WARNING&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>For instance, if the value of <code>@=Amount</code> is <code>"$5,000.00"</code>, then it will be converted into <code>"5000.00"</code> and <code>floatval()</code> will convert it into <code>5000.00</code> (a real number). Notice that the coma (<strong>,</strong>) and the dollar sign (<strong>$</strong>) were removed from the string.</p>
<p><font color="green"><strong>Note:</strong></font> <font color="dimgrey">Case variables which are passed as the first parameter of <code>PMFRemoveMask()</code> should be referenced as <code>@@<i>field-name</i></code> or <code>@=<i>field-name</i></code>, so that they are maintained as text. Do NOT use <code>@#<i>field-name</i></code> or <code>@%<i>field-name</i></code>, since PHP will try to convert the value to a number, which probably will not work correctly, depending on the mask.</font></p>
<p><strong>Example in a condition:</strong></p>
<p>Depending on a value introduced in a field, the following condition is used to decide whether the workflow moves to subsequent task(s):</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #009900;">&#40;</span>PMFRemoveMask<span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>Amount<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;,&quot;</span> <span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;$&quot;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;=</span> <span style="color: #cc66cc;">100</span> and PMFRemoveMask<span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>Amount<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;.&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;$&quot;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&lt;=</span> <span style="color: #cc66cc;">10000</span><span style="color: #009900;">&#41;</span></div></div>

<p>This condition can be used inside an evaluation routing rule:</p>

<p><img alt="" src="../sites/default/files/EvaluationRuleConditionPMFRemoveMask.png"></p></div></div></div>  </div>

      <footer>
          </footer>
  
    </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
      </section>
    </div>
  
      
    </div>

      
</div>

 <!---add diego--->
  <div id="download-app-section" class="download-app mobile-none">
			<div class="row">
				<div class="col-md-12">
					<div class="text_app">Download our app</div>
							<a href="https://itunes.apple.com/us/app/processmaker/id992576284?ls=1&amp;mt=8" target="_blank">
								<img src="../themes/thecompany_responsive_theme/images/appstore.png">
							<a href="https://play.google.com/store/apps/details?id=com.colosa.processmaker" target="_blank">
								<img src="../themes/thecompany_responsive_theme/images/playstore.png">				
				</div>
			</div>
  </div>
  <!---end diego--->
<!----add diego----->    
		<div class="logo_processmaker"><a href="http://www.processmaker.com/">
		<img src="../themes/thecompany_responsive_theme/images/logo_processmaker.png"></div>
<!----end diego----->
<div id="footer">
  <div id="footer_wrapper">
      </div>

  <div class="social-media-wrapper">
         <div id="social-media-icons">
       <ul>
       	<div class="text_contact">Contact us</div>
				<div class="text_number">+1-617-340-3377</div>
        <!--<li><a class="rss" href="/rss.xml">rss</a></li> <!--edit diego-->
        <li><a class="facebook" href="http://facebook.com/processmaker/" target="_blank" rel="me">facebook</a></li>
        <li><a class="twitter" href="https://twitter.com/processmaker" target="_blank" rel="me">twitter</a></li>
        <li><a class="gplus" href="https://www.google.com/+ProcessMakerOpenSource" target="_blank" rel="me">Gplus</a></li>
        <li><a class="linkedin" href="https://www.linkedin.com/groups?mostRecent=&amp;gid=3970335&amp;trk=my_groups-tile-flipgrp" target="_blank" rel="me">Linked in</a></li>
        <!--<li><a class="dribbble" href="http://dribbble.com" target="_blank" rel="me">Dribbble</a></li>
        <li><a class="vimeo" href="http://vimeo.com" target="_blank" rel="me">Vimeo</a></li>-->
        <li><a class="youtube" href="https://www.youtube.com/user/processmaker" target="_blank" rel="me">Youtube</a></li>
       </ul>
      </div>
      </div>
  
  <div class="footer_credit">
    <div class="footer_inner_credit">
           <div id="foot"><div class="region region-footer">
  <div id="block-block-2" class="block block-block">

      
  <div class="content">
    <p><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">Automate your Workflow with Business Process Management<br>Software licensed under the <a 1px="" class="external text" href="http://www.gnu.org/licenses/agpl.html" rel="nofollow" style="padding-right: 13px; color:white;">GNU Affero General Public License version 3</a><br>Contact us:&nbsp;<a class="external free" href="mailto:community@processmaker.com" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">community@processmaker.com</a><br><a class="external free" href="https://www.processmaker.com/privacy-statement" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">Privacy Statement</a></font><br><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">© Copyright 2000-2024 ProcessMaker Inc. All rights reserved.</font></p>
  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
</div>
         
   <!-- <div id="copyright">
      <p class="copyright">Copyright &copy; 2024, Documentation@ProcessMaker </p>
      <!--<p class="credits"> Developed by  <a href="http://www.zymphonies.com">Zymphonies</a></p>
      <div class="clear"></div>
    </div>-->
  </div>
  
  </div>
</div>

</div>

<script type="text/javascript">
  /* <![CDATA[ */
  document.write (
    '<img src="https://marketing.processmaker.com/acton/bn/3812/visitor.gif?ts='+ new Date().getTime()+ '&ref='+escape(document.referrer) + '">'
  );
  /* ]]> */
</script>
  
</div>
    <style>
    .center-div{
        width: 100%;        
        margin: 0 auto;
        z-index:10000;
        position:fixed;
        bottom: 0px;
        cursor:pointer;
    }
    .round-popup{
        margin:0 auto;
        font-family: 'Montserrat', sans-serif;
        font-size: 15px;
        font-weight: lighter;
        width: 412px;
        height: 50px;
        padding-top: 7px;
        text-align: center;
        position:relative;
    }
    .round-popup-button{
        position:absolute;
        top: 11px;
        right: 15px;
        background: transparent;
        border:none;
        font-size:15px;
        font-weight:normal;
        line-height:20px;
        width:20px;
        height:20px;
        padding:0;
    }
    .round-background-blue{
        background: url('http://www.processmaker.com/uploads/blue.png')no-repeat;
        color:white;
        
    }
    #box-pm31-button-blue{
        color: rgba(255, 255, 255, 0.5);
    }
    
    #box-pm31-button-blue:active,#box-pm31-button-blue:focus{
        border:none;
        outline:none;
    }
    .round-background-blue a{
        color: white!important;
        text-decoration: none;
        font-size: 15px;
        line-height:45px;
        font-family:Montserrat, sans-serif;
    }
    .round-background-blue span{
        font-weight: bold;
    }
    /*WHITE background*/
    .round-background-white{
        background: url('http://www.processmaker.com/uploads/white.png')no-repeat;
        background-position-x: -9px;        
        color: #3397E1;
    }
    .round-background-white a:hover{
        color: #3397E1!important;
        text-decoration: none;
        font-size: 15px;
    }
    #box-pm31-button-white{
        color: rgba(51, 151, 225, 0.7);
    }
</style>
    <div id="box-pm31" class="center-div" style="display:none;">
        <div class="round-popup round-background-blue">
            <a onclick="ga('send', 'event', 'WikiBlueBanner','click','PM31Release');" href="http://www.processmaker.com/download-processmaker-landing-page">
                <span>ProcessMaker 3.1</span> is Here! Download Now <span style="font-size:20px;font-weigth:normal;">»</span>
            </a>
            <button id="box-pm31-button-blue" class="round-popup-button">&times;</button>
        </div>
    </div>
    <script>

function pmCreateCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function pmReadCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function pmEraseCookie(name) {
    createCookie(name,"",-1);
}



     jQuery(document).ready(function( $ ) {
        $('#box-pm31-button-blue').click(function(e){
                e.stopPropagation();
                $('#box-pm31').slideUp('fast');
                pmCreateCookie('ppcookie','val',10);
            });
        });
        jQuery(window).load(function() {
            if(pmReadCookie('ppcookie') !== 'val'){
                //jQuery('#box-pm31').delay( 2000 ).slideDown('slow');
            }
        });
    </script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">

<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
    // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
    // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.marinsm.com/serve/586a7ec3a2ae6b728400003d.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>

</body>

<!-- Mirrored from wiki.processmaker.com/node/136 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Feb 2024 09:53:03 GMT -->
</html>
