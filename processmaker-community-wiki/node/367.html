<!DOCTYPE html>

<!-- Mirrored from wiki.processmaker.com/node/367 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Feb 2024 09:47:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta name="keywords" content="BPM, business process management, workflow, processmaker, business, BPM Windows, BPM Linux, wiki, BPM documentation, BPM FAQ, task documentation, BPM PHP, BPM Open Source, BPM Variables, BPM Installation, BPM Programming, BPM Elements, BPM Concepts, BPM Frequently Asked Questions, BPM 3.0, BPM News, Release notes, DynaForms, BPM Community, BPM Enterprise, BPM Mobile, BPM Responsive Web Design, User Manual, BPM Resources" />
<link rel="alternate" hreflang="en" href="../index.html" />
<link rel="shortcut icon" href="../themes/thecompany_responsive_theme/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="description" content="ProcessMaker is commercial open source workflow and business process management software." />
<meta name="viewport" content="width=device-width" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="../3.0/PowerUp.html" />
<link rel="shortlink" href="367.html" />
<title>3.0 - 3.8 - PowerUp | Documentation@ProcessMaker</title>
<style type="text/css" media="all">
@import url("../modules/system/system.base2af9.css?s743n7");
@import url("../modules/system/system.menus2af9.css?s743n7");
@import url("../modules/system/system.messages2af9.css?s743n7");
@import url("../modules/system/system.theme2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../modules/aggregator/aggregator2af9.css?s743n7");
@import url("../modules/comment/comment2af9.css?s743n7");
@import url("../modules/field/theme/field2af9.css?s743n7");
@import url("../modules/node/node2af9.css?s743n7");
@import url("../modules/search/search2af9.css?s743n7");
@import url("../modules/toc_filter/toc_filter2af9.css?s743n7");
@import url("../modules/user/user2af9.css?s743n7");
@import url("../modules/views/css/views2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../sites/all/modules/colorbox/styles/default/colorbox_style2af9.css?s743n7");
@import url("../modules/ctools/css/ctools2af9.css?s743n7");
@import url("../sites/all/modules/geshifilter/geshifilter2af9.css?s743n7");
@import url("../modules/panels/css/panels2af9.css?s743n7");
@import url("../modules/nice_menus/css/nice_menus2af9.css?s743n7");
@import url("../modules/nice_menus/css/nice_menus_default2af9.css?s743n7");
@import url("../modules/fivestar/css/fivestar2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../themes/thecompany_responsive_theme/css/style2af9.css?s743n7");
@import url("../themes/thecompany_responsive_theme/css/media2af9.css?s743n7");
</style>
<script type="text/javascript" src="../modules/jquery_update/replace/jquery/1.9/jquery.min4b17.js?v=1.9.1"></script>
<script type="text/javascript" src="../misc/jquery.once7839.js?v=1.2"></script>
<script type="text/javascript" src="../misc/drupal2af9.js?s743n7"></script>
<script type="text/javascript" src="../modules/nice_menus/js/jquery.bgiframef195.js?v=2.1"></script>
<script type="text/javascript" src="../modules/nice_menus/js/jquery.hoverIntent1f6b.js?v=0.5"></script>
<script type="text/javascript" src="../modules/nice_menus/js/superfish099d.js?v=1.4.8"></script>
<script type="text/javascript" src="../modules/nice_menus/js/nice_menusc619.js?v=1.0"></script>
<script type="text/javascript" src="../modules/jquery_update/replace/ui/external/jquery.cookie1683.js?v=67fb34f6a866c40d0570"></script>
<script type="text/javascript" src="../modules/jquery_update/replace/misc/jquery.form.min97e5.js?v=2.69"></script>
<script type="text/javascript" src="../misc/ajax2347.js?v=7.34"></script>
<script type="text/javascript" src="../modules/jquery_update/js/jquery_update241d.js?v=0.0.1"></script>
<script type="text/javascript" src="../modules/toc_filter/toc_filter2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/js/colorbox2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/styles/default/colorbox_style2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/google_analytics/googleanalytics2af9.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","../../www.google-analytics.com/analytics.js","ga");ga("create", "UA-3380652-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript" src="../misc/progress2347.js?v=7.34"></script>
<script type="text/javascript" src="../modules/fivestar/js/fivestar.ajax2af9.js?s743n7"></script>
<script type="text/javascript" src="../modules/fivestar/js/fivestar2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-1.10.2.min2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-ui2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-ui.min2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/custom2af9.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"thecompany_responsive_theme","theme_token":"eUYKhsGFXjjAxcHR0_Tb11z_Kdh7fYMoq-ARCrd0oaY","jquery_version":"1.9","js":{"modules\/jquery_update\/replace\/jquery\/1.9\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"modules\/nice_menus\/js\/jquery.bgiframe.js":1,"modules\/nice_menus\/js\/jquery.hoverIntent.js":1,"modules\/nice_menus\/js\/superfish.js":1,"modules\/nice_menus\/js\/nice_menus.js":1,"modules\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"modules\/jquery_update\/replace\/misc\/jquery.form.min.js":1,"misc\/ajax.js":1,"modules\/jquery_update\/js\/jquery_update.js":1,"modules\/toc_filter\/toc_filter.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox.js":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"misc\/progress.js":1,"modules\/fivestar\/js\/fivestar.ajax.js":1,"modules\/fivestar\/js\/fivestar.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-1.10.2.min.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.min.js":1,"themes\/thecompany_responsive_theme\/js\/custom.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/toc_filter\/toc_filter.css":1,"modules\/user\/user.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"modules\/panels\/css\/panels.css":1,"modules\/nice_menus\/css\/nice_menus.css":1,"modules\/nice_menus\/css\/nice_menus_default.css":1,"modules\/fivestar\/css\/fivestar.css":1,"themes\/thecompany_responsive_theme\/css\/style.css":1,"themes\/thecompany_responsive_theme\/css\/media.css":1}},"colorbox":{"opacity":"0.85","current":"{current} of {total}","previous":"\u00ab Prev","next":"Next \u00bb","close":"Close","maxWidth":"98%","maxHeight":"98%","fixed":true,"mobiledetect":true,"mobiledevicewidth":"480px","specificPagesDefaultValue":"admin*\nimagebrowser*\nimg_assist*\nimce*\nnode\/add\/*\nnode\/*\/edit\nprint\/*\nprintpdf\/*\nsystem\/ajax\nsystem\/ajax\/*"},"toc_filter_smooth_scroll_duration":"","googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip","trackColorbox":1},"nice_menus_options":{"delay":"800","speed":"slow"},"ajax":{"edit-vote--2":{"callback":"fivestar_ajax_submit","event":"change","url":"\/system\/ajax","submit":{"_triggering_element_name":"vote"}}}});
//--><!]]>
</script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','../../connect.facebook.net/en_US/fbevents.js');
// Insert Your Facebook Pixel ID below.
fbq('init', '735235999992228');
fbq('track', 'PageView');
</script>
<!-- Insert Your Facebook Pixel ID below. -->
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=735235999992228&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-367 node-type-community-edition">
    
<div class="wrap">

<div id="header_wrapper">
  <div id="inner_header_wrapper">

    <header id="header" role="banner">
      
      <div class="header_inner_wrapper">
        <div class="header_left">
                      <div id="logo">
              <a href="../index.html" title="Home"><img src="../sites/default/files/full-logo.png"/></a>
            </div>
                    	  <div class="menu_wrapper">
            <nav id="main-menu"  role="navigation">
              <a class="nav-toggle" href="#">Navigation</a>
              <div class="menu-navigation-container">
                <ul class="menu"><li class="first leaf"><a href="../PM_Classic.html" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="leaf"><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="leaf"><a href="../3.1/user_guide.html">User Guide</a></li>
<li class="leaf"><a href="../3.1/developer_info.html">Developer Info</a></li>
<li class="leaf"><a href="../3.2/sys_administration.html">Sys Administration</a></li>
<li class="leaf"><a href="../3.1/resources.html">Helpful Resources</a></li>
<li class="leaf"><a href="../Sitemap.html">Sitemap</a></li>
<li class="last leaf"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>              </div>
              <div class="clear"></div>
            </nav>
          </div>
                  <!--  <h1 id="site-title">
            <a href="/" title="Home">Documentation@ProcessMaker</a>
            <div id="site-description"></div>
          </h1> -->
            
        </div>
      </div>
      <div class="header_right">
          <div class="region region-search">
  <div id="block-search-form" class="block block-search">

        <h2 >_</h2>
    
  <div class="content">
    <form action="https://wiki.processmaker.com/node/367" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." placeholder="Search" type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-8z1lJbfT1QfHfUJ3eFSeHAAvfMy_yJdTEdfe67CME1k" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
                  <h1 class="page-title">3.0 - 3.8 - PowerUp</h1>                <p class="page-title-suffix"></p>
                 <div style="margin-top: 5px;"></div>
      </div>
    </header>
    <div class="region-version">
      <span>Version: </span><ul><li><a  class="active-version">3.8</a></li><li><a  class="active-version">3.7</a></li><li><a  class="active-version">3.6</a></li><li><a  class="active-version">3.5</a></li><li><a  class="active-version">3.4</a></li><li><a  class="active-version">3.3</a></li><li><a  class="active-version">3.2</a></li><li><a  class="active-version">3.1</a></li><li><a  class="active-version">3.0</a></li><li><a href="../index.php/ProcessMaker_PowerUp.html" class="">2.x</a></li></ul>    </div>
  </div>
</div>
<!-- <ul class="nice-menu nice-menu-down nice-menu-main-menu" id="nice-menu-0"><li class="menu-506 menu-path-node-1078 first odd "><a href="/PM_Classic" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="menu-319 menu-path-processmakercom-tutorials  even "><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="menu-320 menu-path-node-571  odd "><a href="/3.1/user_guide">User Guide</a></li>
<li class="menu-1138 menu-path-node-572  even "><a href="/3.1/developer_info">Developer Info</a></li>
<li class="menu-1197 menu-path-node-876  odd "><a href="/3.2/sys_administration">Sys Administration</a></li>
<li class="menu-1140 menu-path-node-236  even "><a href="/3.1/resources">Helpful Resources</a></li>
<li class="menu-1141 menu-path-node-554  odd "><a href="/Sitemap">Sitemap</a></li>
<li class="menu-1213 menu-path-sprocessmakergitbookio-processmaker-  even last"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>
-->
  
  <div id="container">
    
    <div class="content-sidebar-wrap">

    <div id="content">

              <!-- <div id="breadcrumbs">
        <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="/">Home</a></div></div> -->
      
      <section id="post-content" role="main">
                                        <div class="region region-content">
  <div id="block-system-main" class="block block-system">

      
  <div class="content">
                          <span property="dc:title" content="3.0 - 3.8 - PowerUp" class="rdf-meta element-hidden"></span>  
      
    
  <div class="content node-community-edition">
    <div class="field field-name-field-how-useful field-type-fivestar field-label-above"><div class="field-label">Please rate how useful you found this document:&nbsp;</div><div class="field-items"><div class="field-item even"><form class="fivestar-widget" action="https://wiki.processmaker.com/node/367" method="post" id="fivestar-custom-widget" accept-charset="UTF-8"><div><div  class="clearfix fivestar-average-text fivestar-average-stars fivestar-form-item fivestar-default"><div class="form-item form-type-fivestar form-item-vote">
 <div class="form-item form-type-select form-item-vote">
 <select id="edit-vote--2" name="vote" class="form-select"><option value="-">Select rating</option><option value="20">Give 3.0 - 3.8 - PowerUp 1/5</option><option value="40">Give 3.0 - 3.8 - PowerUp 2/5</option><option value="60">Give 3.0 - 3.8 - PowerUp 3/5</option><option value="80" selected="selected">Give 3.0 - 3.8 - PowerUp 4/5</option><option value="100">Give 3.0 - 3.8 - PowerUp 5/5</option></select>
<div class="description"><div class="fivestar-summary fivestar-summary-average-count"><span class="average-rating">Average: <span >3.8</span></span> <span class="total-votes">(<span >9</span> votes)</span></div></div>
</div>

</div>
</div><input class="fivestar-submit form-submit" type="submit" id="edit-fivestar-submit" name="op" value="Rate" /><input type="hidden" name="form_build_id" value="form-APUKafhPNGoTJfSYIdzBbgPaC_I8zqyPMoGztpdT0EY" />
<input type="hidden" name="form_id" value="fivestar_custom_widget" />
</div></form></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p><div style="float: right; margin-left: 5px; background-color: #f9f9f9; border: 1px solid #aaaaaa; padding: 5px;"><center><strong>Contents:</strong> [<a href="#" onclick="var el = document.getElementById('toc');
        var txt = ('innerText' in el)? 'innerText' : 'textContent';
        if (el.style.display=='none') { 
           el.style.display = '';
           document.getElementById('hideLabel')[txt] = 'hide';
        }
        else {
	        el.style.display = 'none';
           document.getElementById('hideLabel')[txt] = 'show';
        }"><span id="hideLabel">hide</span></a>]</b></center><div id="toc" ><ol class="toc">
<li class="toc"><a href="#Overview">Overview</a></li>
<li class="toc"><a href="#Requirements">Requirements</a></li>
<ol class="toc">
<li class="toc"><a href="#ProcessMaker_Compatibility">ProcessMaker Compatibility</a></li>
</ol>
<li class="toc"><a href="#Advanced_Triggers">Advanced Triggers</a></li>
<ol class="toc">
<li class="toc"><a href="#PMFCloneAndRestartCase.28.29"><tt>PMFCloneAndRestartCase()</tt></a></li>
<ol class="toc">
<li class="toc"><a href="#Function_Definition">Function Definition</a></li>
<li class="toc"><a href="#Example">Example</a></li>
</ol>
<li class="toc"><a href="#PMFCrudTable.28.29"><tt>PMFCrudTable()</tt></a></li>
<ol class="toc">
<li class="toc"><a href="#Function_Definition_2">Function Definition</a></li>
<li class="toc"><a href="#Example_1:_Inserting_a_record_in_a_table">Example 1: Inserting a record in a table</a></li>
<li class="toc"><a href="#Example_2:_Updating_a_record_in_a_table">Example 2: Updating a record in a table</a></li>
<li class="toc"><a href="#Example_3:_Deleting_a_record_in_a_table">Example 3: Deleting a record in a table</a></li>
</ol>
<li class="toc"><a href="#PMFGeneratePdf.28.29"><tt>PMFGeneratePdf()</tt></a></li>
<ol class="toc">
<li class="toc"><a href="#Function_Definition_3">Function Definition</a></li>
<li class="toc"><a href="#Example_2">Example</a></li>
</ol>
<li class="toc"><a href="#PMFGetCaseNumber.28.29"><tt>PMFGetCaseNumber()</tt></a></li>
<ol class="toc">
<li class="toc"><a href="#Function_Definition_4">Function Definition</a></li>
<li class="toc"><a href="#Example_3">Example</a></li>
</ol>
<li class="toc"><a href="#PMFGetFieldsOfDynaform.28.29"><tt>PMFGetFieldsOfDynaform()</tt></a></li>
<ol class="toc">
<li class="toc"><a href="#Function_Definition_5">Function Definition</a></li>
<li class="toc"><a href="#Example_4">Example</a></li>
</ol>
<li class="toc"><a href="#PMFGetGroupsOfUser.28.29"><tt>PMFGetGroupsOfUser()</tt></a></li>
<ol class="toc">
<li class="toc"><a href="#Function_Definition_6">Function Definition</a></li>
<li class="toc"><a href="#Example_5">Example</a></li>
</ol>
<li class="toc"><a href="#PMFGetInputsDocumentsOfCase.28.29"><tt>PMFGetInputsDocumentsOfCase()</tt></a></li>
<ol class="toc">
<li class="toc"><a href="#Function_Definition_7">Function Definition</a></li>
<li class="toc"><a href="#Example_6">Example</a></li>
<li class="toc"><a href="#Create_a_download_link">Create a download link</a></li>
</ol>
<li class="toc"><a href="#PMFGetRolUser.28.29"><tt>PMFGetRolUser()</tt></a></li>
<ol class="toc">
<li class="toc"><a href="#Function_Definition_8">Function Definition</a></li>
<li class="toc"><a href="#Example_7">Example</a></li>
</ol>
<li class="toc"><a href="#PMFGetUserReportsTo.28.29"><tt>PMFGetUserReportsTo()</tt></a></li>
<ol class="toc">
<li class="toc"><a href="#Function_Definition_9">Function Definition</a></li>
<li class="toc"><a href="#Example_8">Example</a></li>
</ol>
<li class="toc"><a href="#PMFGetUsersOfTask.28.29"><tt>PMFGetUsersOfTask()</tt></a></li>
<ol class="toc">
<li class="toc"><a href="#Function_Definition_10">Function Definition</a></li>
<li class="toc"><a href="#Example_9">Example</a></li>
</ol>
<li class="toc"><a href="#PMFLoadGrid.28.29"><tt>PMFLoadGrid()</tt></a></li>
<ol class="toc">
<li class="toc"><a href="#Function_Definition_11">Function Definition</a></li>
</ol>
<li class="toc"><a href="#PMFSetOnVacation.28.29"><tt>PMFSetOnVacation()</tt></a></li>
<ol class="toc">
<li class="toc"><a href="#Function_Definition_12">Function Definition</a></li>
<li class="toc"><a href="#Example_10">Example</a></li>
</ol>
</div></div>
</p>
<p>
<img src="../sites/default/files/faviconpm_23.png" alt="" width="16" height="16"> 
<span style="color: #009688"><strong>Plugin Version:</strong></span>
<span style="color: dimgrey"><strong> 3.1.7</strong></span><!-- | 
<a href="https://drive.google.com/file/d/1raPgCz1AeNCcA5gWYeha5vJa4hjqcvEy/view?usp=sharing"> Release Notes</a>--></p>
<hr>


<h2><span id="Overview">Overview</span></h2>
<p>The PowerUp plugin includes 12 extra functions, which improve the generation of PDF documents, the loading of data inside a grid, the reassignment the cases of a user who is on vacation, and more. These extra functions make coding triggers easier and simpler, since they allow process designers to avoid using complicated internal classes and complex database queries.</p>
<p>Moreover, it offers three additional fields to Dynaforms, so that forms can display images, view documents and access the Input Document interface.</p>

<h2><span id="Requirements">Requirements</span></h2>
<h3><span id="ProcessMaker_Compatibility">ProcessMaker Compatibility</span></h3>

<p>This plugin is fully compatible with:</p>
<ul>
<li>ProcessMaker 3.4.6 and later</li>
</ul>

<h2><span id="Advanced_Triggers">Advanced Triggers</span></h2>
<h3><span id="PMFCloneAndRestartCase.28.29"><tt>PMFCloneAndRestartCase()</tt></span></h3>
<p><tt><strong>PMFCloneAndRestartCase()</strong></tt> makes an identical copy of a specified case, including all the data generated in the case. The copy of the case will be stored in the <strong>DRAFT</strong> folder. The status of the original case can changed to <tt>CANCELLED</tt> or <tt>PAUSED</tt>.</p>
<p><span style="color: green;"><strong>Note:</strong></span> <span style="color: dimgrey;"><a href="../3.0/Triggers.html#System_Variables_in_Triggers" title="3.0/Triggers" class="toc-filter-processed">System Variables</a>, <a href="../3.0/Input_Documents.html" title="3.0/Input Documents">Input Documents</a>, <a href="../3.0/Output_Documents.html" title="3.0/Output Documents">Output Documents</a> and <a href="../3.0/Case_Notes.html" title="3.0/Case Notes">Case Notes</a> won't be copied when the case is cloned. <tt>PMFCloneAndRestartCase()</tt> only clones the case variables stored in the <tt>&lt;WORKSPACE&gt;.APPLICATION.APP_DATA</tt> field.</span></p>

<h4><span id="Function_Definition">Function Definition</span></h4>

<codeblock><i>int</i> <strong>PMFCloneAndRestartCase</strong> (<i>string</i> appUid, <i>string</i> statusCurrentCase='', <i>string</i> unPauseDate='')</codeblock>

<p><strong>Parameters:</strong></p>
<ul>
<li><tt><em>string</em> <strong>appUid:</strong></tt> The unique ID of the case to be cloned. To clone the current case, use the system variable <tt>@@APPLICATION</tt>.</li>
<li><tt><em>string</em> <strong>statusCurrentCase</strong></tt>: <em>Optional parameter.</em> Set the status of the original case, which can be <tt>"PAUSED"</tt> or <tt>"CANCELLED"</tt>. If not included, set to <tt>''</tt> (empty string) or only set to <tt>""</tt>, then the status of the original case will not change.</li>
<li><tt><em>string</em> <strong>unPauseDate</strong></tt>: <em>Optional parameter</em>. If the status of the original case is set to <tt>"PAUSED"</tt>, then it will be unpaused on the specified date. Use the <tt>YYYY-MM-DD</tt> format, so <tt>July 1, 2015</tt>, would be <tt>"2015-07-01"</tt> If this parameter isn't included, set to <tt>''</tt> (empty string) or only set to <tt>""</tt>, then the original case will be paused indefinitely until it is manually unpaused.</li>
</ul>

<p><strong>Return value:</strong></p>
<ul>
<li><tt><em>int</em></tt>. Returns the case number for the new case that was created.</li>
</ul>

<p>If <tt>appUid</tt> is empty, <tt>PMFCloneAndRestartCase()</tt> returns <tt>false</tt>. If <tt>appUid</tt> isn't a valid case ID, then the function is caught by an exception and <tt>@@__ERROR__</tt> will contain the message "The Application row <tt>'&lt;CASE-UID&gt;'</tt> doesn't exist!". To <a href="../3.0/Triggers.html#Error_Management_for_Processes_in_Production" title="Error_Management_for_Processes_in_Production" class="toc-filter-processed">handle the exception</a>, the function should be enclosed in a <tt>try{...} catch{...}</tt> clause.</p>

<h4><span id="Example">Example</span></h4>
<p>Create a trigger that clones the current case. Open a process for editing and go to the <strong>TRIGGERS</strong> tab. Click on the <strong>WIZARD</strong> button and then expand <strong>ProcessMaker Advanced Triggers</strong>, then select <strong><tt>PMFCloneAndRestartCase</tt></strong> <i>(Create a new case based on the data of an already existing case)</i> function:</p>
<img src="../sites/default/files/1_18.png" width="628" height="97" alt=""  />
<p>Fill in the following parameters for the function:</p>
<img src="../sites/default/files/2_18.png" width="942" height="518" alt=""  />
<p>The function definition will be:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span><span style="color: #b1b100;">return</span> <span style="color: #339933;">=</span> PMFCloneAndRestartCase<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>This example uses the system variable <tt>@@APPLICATION</tt>, so the current case, which is #31, will be cloned:</p>
<img src="../sites/default/files/3_14.png" width="1103" height="435" alt=""  />
<p>When checked in the the ProcessMaker debugger, a new case, whose case number is <tt>32</tt>, was created:</p>
<img src="../sites/default/files/4_3.png" width="302" height="480" alt=""  />
<p>Both the original and the cloned cases are now found in the <a href="../3.0/Cases.html#Draft" title="3.0/Cases">Draft folder</a></p>
<img src="../sites/default/files/5_3.png" width="1354" height="159" alt=""  />

<h3><span id="PMFCrudTable.28.29"><tt>PMFCrudTable()</tt></span></h3>
<p><tt>PMFCrudTable()</tt> inserts, updates or deletes a single record in a MySQL table. This function can be used with any MySQL table, including <a href="../3.0/PM_Tables.html" title="3.0/PM Tables">PMtables</a> and Report Tables, but it will not work with any other type of database.</p>
<h4><span id="Function_Definition_2">Function Definition</span></h4>

<codeblock><i>int</i> <strong>PMFCrudTable</strong>(<i>string</i> option, <i>string</i> table, <i>string</i> data=null, <i>string</i> idtable='', <i>string</i> dbConectionUid='workflow')
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><tt><i>string</i> <strong>option</strong></tt>. Define the type of SQL operation to execute. Possible values: <tt>'insert'</tt>, <tt>'update'</tt> or <tt>'delete'</tt></li><li><tt><i>string</i> <strong>table</strong></tt>. Name of the table where the operation will take place. Note that MySQL table names are case sensitive by default in Linux/UNIX, but not case sensitive in Windows.</li><li><tt><i>array</i> <strong>data</strong></tt>. <i>Optional parameter</i>. Leave this parameter blank for delete operations. For insert and update operations, define an array of values that will be inserted or updated:</li></ul>
<dl><dd><dl><dd><tt>array('value1', 'value2', ...)</tt></dd></dl></dd><dd>Do not include values for fields that are auto-incremented, and make sure that the values are listed in the same order as they are defined in the table. If the value is input by the user or contains single quotation marks, use <a class="external text" href="http://php.net/manual/en/function.mysql-real-escape-string.php" rel="nofollow">mysql_real_escape_string()</a> to escape single quotation marks and prevent SQL injection attacks. See the example below.</dd></dl>
<ul><li><tt><i>string</i> <strong>idTable</strong></tt>. <i>Optional parameter</i>. The unique identifier of the record to be affected. This must be the value found in the <i>primary key</i> field of the table. This value must be specified for delete and update operations. For insert operations, this value may be left blank if the <i>primary key</i> field is auto-incremented by the database.</li><li><tt><i>string</i> <strong>dbConectionUid</strong></tt>. <i>Optional parameter</i>. The UID of the database connection where the operation will be executed, or one of the <a href="../3.0/ProcessMaker_Database_Model.html" title="ProcessMaker Database Model">databases for the current workspace</a>: <tt>'workflow'</tt>, <tt>'rbac'</tt> or <tt>'rp'</tt>. If not included, then it will be the current <tt>workflow</tt> database by default. See <a href="../3.0/ProcessMaker_Functions.html#executeQuery.28.29" title="ProcessMaker Functions">executeQuery()</a> for more information.</li></ul>

<p><br><strong>Return value:</strong></p>
<ul><li><tt><i>int</i></tt>. Returns <tt>1</tt> if the operation was successful, or <tt>0</tt> if unsuccessful. If the database is not MySQL or an exception was thrown, then returns <tt>null</tt>. To check whether an exception was thrown while executing <tt>PMFCrudTable()</tt>, see <a href="../3.0/Triggers.html#Error_Management" title="3.0/Triggers">Error Management</a>.</li></ul>
<!--<h4><span id="Example_1:_Inserting_a_record_in_a_table">Example 1: Inserting a record in a table</span></h4>
<p>The example below explains how to insert information filled in a Dynaform into a table.</p>
<p><tt><strong>1.</strong></tt> Create a <a href="/3.0/PM_Tables#Creating_PM_Tables">simple table</a> named <tt>USER_INFORMATION</tt> with the following fields:</p>
<codeblock>
+--------------------+
| USER_INFORMATION   |
+--------------------+
| Code (primary key )|
| Name               |
| LastName           |
| JobTitle           |   
| Area               | 
| email              | 
| Phone              |
| ext                |   
+--------------------+
</codeblock>
<p>Like this:</p>
<img src="/sites/default/files/3NewPMTable.png"/>
<p><tt><strong>2.</strong></tt> Create a Dynaform with the same field names as were defined in the <tt>USER_INFORMATION</tt> table:</p>
<img src="/sites/default/files/6_5.png" width="1132" height="498" alt=""  />
<p><tt><strong>3.</strong></tt> Now, create a trigger which will be set to fire <i>after</i> the Dynaform. Open a process for editing and go to <strong>TRIGGERS</strong>, then click on the <strong>WIZARD</strong> button. Expand <strong>"ProcessMaker Advanced Triggers"</strong> and click on the <strong><tt>PMFCrudTable</tt></strong> <i>(Insert, update or delete PM Table records (CRUD).)</i> function. Fill in the form with the following information:</p>
<img src="/sites/default/files/7_6.png" width="842" height="725" alt=""  />
<p>Edit the source code of the trigger in order to place the values from the Dynaform fields in the <tt>$data</tt> array, so those values can be used by <tt>PMFCrudTable()</tt> to insert a new record in the <tt>USER_INFORMATION</tt> table:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$data</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>Code<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>Name<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>LastName<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>JobTitle<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>Area<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>email<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>Phone<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>ext<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$res</span> <span style="color: #339933;">=</span> PMFCrudTable<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'insert'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'USER_INFORMATION'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$data</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> &nbsp;<span style="color: #0000ff;">'workflow'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>Note that the primary key field <tt>Code</tt> is not auto incrementing, so a value for the <tt>Code</tt> field has to be included in the <tt>$data</tt> array. Set the trigger to fire <i>after</i> the Dynaform.</p>
<p><tt><strong>4.</strong></tt> Finally, execute a case and fill in the Dynaform with user's information:</p>
<img src="/sites/default/files/8_4.png" width="1131" height="534" alt=""  />
<p>Click on the <strong>Submit</strong> button and check whether a new record was added to the <tt>USER_INFORMATION</tt> table:</p>

<h4><span id="Example_2:_Updating_a_record_in_a_table">Example 2: Updating a record in a table</span></h4>
<p>The example below explains how to update information stored in a table. For this example, a record will be updated in the table created in the <a href="/3.0/PowerUp#Example_1:_Inserting_a_record_in_a_table">Example 1</a> from information filled in a Dynaform.</p>
<p><tt><strong>1.</strong></tt> Create a simple process with the same field names defined in the table.</p>
<p><tt><strong>2.</strong></tt>Create the trigger with the corresponding function. Go to <strong>TRIGGERS</strong>, then click on the <strong>WIZARD</strong> button. Expand <strong>ProcessMaker Advanced Triggers</strong>, click on the <strong><tt>PMFCrudTable</tt></strong> <i>(Insert, update or delete PM Table records (CRUD).)</i> function, and fill in the following information:</p>
<p><img src="/sites/default/files/3PMPowerUp3-1-1FCrudUpdate.png" /></p>
<p>Enter the field for the primary key, which is <tt>@@Code</tt> in this example, in the <strong>Record table identifier</strong> parameter.</p>
<p>Then, edit the source code of the trigger to populate the <tt>$data</tt> variable with the values entered in the Dynaform fields. Then, pass <tt>$data</tt> as a parameter in the <tt>PMFCrudTable()</tt> function:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$data</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Code&quot;</span> <span style="color: #339933;">=&gt;@@</span>Code<span style="color: #339933;">,</span><span style="color: #0000ff;">&quot;Name&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@@</span>Name<span style="color: #339933;">,</span><span style="color: #0000ff;">&quot;LastName&quot;</span> <span style="color: #339933;">=&gt;@@</span>LastName<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$res</span> <span style="color: #339933;">=</span> PMFCrudTable<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'update'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'USER_INFORMATION'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$data</span><span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>Code<span style="color: #339933;">,</span> <span style="color: #0000ff;">'workflow'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>Set the trigger to fire <i>after</i> the Dynaform is executed.</p>
<p><tt><strong>3.</strong></tt> When executing a case, change the information in the Dynaform by changing the name of the user from "John Smith" to "John Meyer":</p>
<p><img src="/sites/default/files/3PMPowerUp3-1-1FCrudUpdate-fill.png" /></p>
<p>Click on <i>Submit</i> and then check whether the record in the <tt>USER_INFORMATION</tt> table has been updated:</p>
<p><img src="/sites/default/files/3PMPowerUp3-1-1FCrudUpdate-data.png" /></p>
<h4><span id="Example_3:_Deleting_a_record_in_a_table">Example 3: Deleting a record in a table</span></h4>
<p>This example shows how to delete a record stored in the USER_INFORMATION table, which was created in <a href="#Example_1:_Inserting_a_record_in_a_table">Example 1</a>.</p>
<p><tt><strong>1.</strong></tt> Create a Dynaform to enter the code of a user who will be deleted from the USER_INFORMATION table:</p>
<p><img src="/sites/default/files/3PMPowerUp3-1-1FCrudDelete-form.png" /></p>
<p><tt><strong>2.</strong></tt> Now, create a trigger. Go to <strong>TRIGGERS</strong>, then click on the <strong>WIZARD</strong> button. Expand <strong>ProcessMaker Advanced Triggers</strong>, click on the <strong><tt>PMFCrudTable</tt></strong> <i>(Insert, update or delete PM Table records (CRUD).)</i> function, and fill in the following information:</p>
<p><img src="/sites/default/files/3PMPowerUp3-1-1FCrudDelete.png" /></p>
<p>The function definition will be:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$res</span> <span style="color: #339933;">=</span> PMFCrudTable<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;delete&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;USER_INFORMATION&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>Code<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;workflow&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>Only the primary key is needed to identify which record to delete in the USER_INFORMATION table, which in this example is <tt>@@Code</tt>. Set the above trigger to fire <i>after</i> the Dynaform.</p>
<p><tt><strong>3.</strong></tt> Execute a case and enter the code of the user to be deleted, which in this example is <tt>1</tt> to delete the user "John Meyer":</p>
<p><img src="/sites/default/files/3PMPowerUp3-1-1FCrudDelete-case.png" /></p>-->

<h3><span id="PMFGeneratePdf.28.29"><tt>PMFGeneratePdf()</tt></span></h3>
<p><tt>PMFGeneratePdf()</tt> generates a PDF document with pagination and a footer. This only works with Output Documents using the <a href="../3.0/Output_Documents.html#Creating_Output_Documents_Usign_TCPDF_Generator" title="3.0/Output Documents">TCPDF library</a>.</p>
<h4><span id="Function_Definition_3">Function Definition</span></h4>

<codeblock><strong>PMFGeneratePdf</strong>(<i>string</i> outputID, <i>string</i> footerContent, <i>string</i> sApplication = null, <i>string</i> iDelegation = null, <i>string</i> sUserLogged = null)
</codeblock>

<p><strong>Parameters:</strong></p>
<ul>
<li><tt><i>string</i> <strong>outputID</strong></tt>: The unique ID of the Output Document, which can be found by opening the process for editing, going to the <strong>Output Documents</strong> and clicking on the <strong>Show ID</strong> button for an Output Document. It can also found by following <a href="../3.0/Output_Documents.html#Accessing_Output_Documents_with_Triggers" title="3.0/Output Documents">these instructions</a>.</li><li><tt><i>string</i> <strong>footerContent</strong></tt> The content of the footer that will be placed at the end of the document. By default it will be enclosed in <i>double quotes</i>, i.e.: <tt>"ProcessMaker Documentation"</tt>. To edit the source code you can also use simple quotes.</li>
<li><tt><i>string</i> <strong>sApplication</strong></tt>: <i>Optional parameter.</i> The unique ID of the case where the Output Document will be generated. If omitted or set to NULL, then an Output Document file will be created for the current case.</li>
<li><tt><i>int</i> <strong>iDelegation</strong></tt>: <i>Optional parameter.</i> The delegation index of the current task in the case. If omitted or set to NULL, then it will use the current task for the current case.</li>
<li><tt><i>string</i> <strong>sUserLogged</strong></tt>: <i>Optional parameter.</i> The unique ID of the user who will generate the PDF. This should be set to the user who is currently designated to work on the case. If omitted or set to <tt>NULL</tt>, then the user currently logged-in will be used.
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">If you are using the <code>PMFGeneratePdf()</code> function in a <a href="../3.2/Tasks.html#ScriptTask">Script</a> task, the <code>sUserLogged</code> parameter is required. Otherwise, if there is no user UID, it must be defined as null.</font></p>
</li>
</ul>
<p><strong>Return value:</strong><br>There is no return value.</p>
<h4><span id="Example_2">Example</span></h4>
<p>This example generates an Output Document in the current case with pagination and a footer.</p>
<p><tt><strong>1.</strong></tt> Create an <i>Invoice document</i> using the TCPDF engine. Add some content into the document. Then, get the Output Document's unique ID.</p>
<img src="../sites/default/files/9_4.png" width="741" height="238" alt=""  />
<p><tt><strong>2.</strong></tt> Create the trigger. Go to <strong>TRIGGERS</strong>, then click on the <strong>WIZARD</strong> button. Expand <strong>ProcessMaker Advanced Triggers</strong>, click on the <strong><tt>PMFGeneratePdf</tt></strong> <i>(Generate PDF output document)</i> function, and fill in the following information:</p>
<img src="../sites/default/files/10_6.png" width="843" height="467" alt=""  />
<p>The trigger's source code will be:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">PMFGeneratePdf <span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;120056152559b0862029126086826927&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;Invoice Document&quot;</span><span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #cc66cc;">0</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>Then, assign the trigger to fire at some point during the process. Running the case, click on <tt>File (.pdf) Open</tt> to start downloading the PDF document.</p>
<img src="../sites/default/files/3PMPowerUp3-1-1FGeneratePDF-result.png">
<p>Opening the generated PDF:</p>
<img src="../sites/default/files/11_5.png" width="677" height="473" alt=""  />
<h3><span id="PMFGetCaseNumber.28.29"><tt>PMFGetCaseNumber()</tt></span></h3>
<p><tt>PMFGetCaseNumber()</tt> returns the case number for a specified case. The case number is an integer, which increments by 1 for each new case in a workspace, so the case number for the first case is 1, the fifth case is 5, and the 623rd case is 623.</p>
<h4><span id="Function_Definition_4">Function Definition</span></h4>

<codeblock><i>int</i> <strong>PMFGetCaseNumber</strong>(<i>string</i> appUid) 
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><tt><i>string</i> <strong>appUid</strong></tt>: The unique ID of the case. To get the case number for current case, use the system variable <tt>@@APPLICATION</tt>.</li></ul>
<p><strong>Return Value:</strong></p>
<ul><li><tt><i>int</i></tt>: Returns the number of the case.</li></ul>
<h4><span id="Example_3">Example</span></h4>
<p><tt><strong>1.</strong></tt> Let's create a simple process where you will obtain the case number and send it to the next person who will continue the case, which will help the next assigned user know which case number needs to be opened.</p>
<p><tt><strong>2.</strong></tt> Now, let's create the trigger with the corresponding function. Go to the <strong>TRIGGERS</strong> tab, inside the process you are working on, and click on the <strong>WIZARD</strong> button. Select <strong>ProcessMaker Advanced Triggers</strong> and then look for the <strong><tt>PMFGetCaseNumber</tt></strong> <i>(Get the application number (Case number))</i> function and fill it with the following information:</p>
<img src="../sites/default/files/12_4.png" width="847" height="467" alt=""  />
<p>Its definition will be:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>UseCaseNumber <span style="color: #339933;">=</span> PMFGetCaseNumber<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p><tt><strong>3.</strong></tt> Then create an email <a href="../3.0/Notifications.html#Create_the_HTML_Email_Template" title="Notifications">template</a> named <tt>template.html</tt> which uses the <tt>@@UseCaseNumber</tt> variable:</p>
<img src="../sites/default/files/13_4.png" width="838" height="392" alt=""  />
<p><tt><strong>4.</strong></tt> Then use the <a href="../3.0/ProcessMaker_Functions.html#PMFSendMessage.28.29" title="ProcessMaker Functions">PMFSendMessage()</a> function in order to send out an email in a subsequent trigger:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span><span style="color: #b1b100;">return</span> <span style="color: #339933;">=</span> PMFSendMessage <span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span><span style="color: #0000ff;">'liliana@colosa.com'</span><span style="color: #339933;">,</span><span style="color: #0000ff;">'liliana@colosa.com'</span><span style="color: #339933;">,</span><span style="color: #0000ff;">''</span><span style="color: #339933;">,</span><span style="color: #0000ff;">''</span><span style="color: #339933;">,</span><span style="color: #0000ff;">'Credit Card Application'</span><span style="color: #339933;">,</span><span style="color: #0000ff;">'template.html'</span><span style="color: #339933;">,</span><a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span><a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span><span style="color: #009900; font-weight: bold;">true</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>Replace <i>liliana@colosa.com</i> by your email. Additionally, before using <tt>PMFSendMessage</tt>, you must configure your <a href="../3.0/Email_Settings.html">Email Server</a>.</p>
<p><tt><strong>5.</strong></tt> Inside the process, assign the trigger where the case number is obtained: before the Dynaform, and before the trigger to send mails after that. Executing case <tt>#48</tt>:</p>

<img src="../sites/default/files/14_4.png" width="1130" height="404" alt=""  />
<p>The email will be:</p>
<img src="../sites/default/files/15_4.png" width="664" height="203" alt=""  />

<h3><span id="PMFGetFieldsOfDynaform.28.29"><tt>PMFGetFieldsOfDynaform()</tt></span></h3>
<p><tt>PMFGetFieldsOfDynaform()</tt> returns information about the fields in a Dynaform, such as the field name, field type, and field label.</p>
<h4><span id="Function_Definition_5">Function Definition</span></h4>

<codeblock><i>array</i> <strong>PMFGetFieldsOfDynaform</strong>(<i>string</i> proUid, <i>string</i> dynUid) 
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><tt><i>string</i> <strong>proUid</strong></tt>: The unique ID of the process. For the current process, use the <tt>@@PROCESS</tt> system variable.</li><li><tt><i>string</i> <strong>dynUid</strong></tt>: The unique ID of the Dynaform whose list of fields will be retrieved.</li></ul>
<p><strong>Return Value:</strong></p>
<p>An array, with the following structure:</p>

<codeblock>[0] <i>array</i>
(
   <i>associative array</i>
   (
      [<i>string</i> FIELD_NAME]
      [<i>string</i> FIELD_LABEL]
      [<i>string</i> FIELD_TYPE]
   )
)
...
</codeblock>

<p><strong>Where:</strong></p>
<ul><li><tt><i>string</i> <strong>FIELD_NAME</strong></tt>: The field name, which is unique and identifies the field.</li><li><tt><i>string</i> <strong>FIELD_LABEL</strong></tt>: The field label, which is the text displayed on the Dynaform. Note that the value for hidden, javascript, image, documentviewer and inputdocview fields will be an empty string, because these fields do not have labels.</li><li><tt><i>string</i> <strong>FIELD_TYPE</strong></tt>: The field type: currency. percentage, password, suggest, textarea, title, subtitle, button, submit, reset, dropdown, yesno, listbox, checkbox, checkgroup, radiogroup, date, hidden, link, file, javascript, documentviewer, inputdocview or image.</li></ul>

<h4><span id="Example_4">Example</span></h4>
<p>This example obtains a list of all the textbox fields in a Dynaform. First, get the unique ID for the Dynaform. Open the process which contains the Dynaform and go to the <strong>DYNAFORMS</strong> tab. In the list of Dynaforms, click on the <tt>Show ID</tt> button for the Dynaform.</p>
<img src="../sites/default/files/16_3.png" width="729" height="240" alt=""  />
<p>Now, create the trigger. Go to the <strong>TRIGGERS</strong> tab, then click on the <strong>WIZARD</strong> button. Select <strong>ProcessMaker Advanced Triggers</strong> and then look for the <strong><tt>PMFGetFieldsOfDynaform</tt></strong> <i>(Return the fields of a Dynaform)</i> function and fill in the following information:</p>
<img src="../sites/default/files/17_3.png" width="847" height="465" alt=""  />
<p>Its definition will be:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> PMFGetFieldsOfDynaform<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;474212646559afa099f89b0039499032&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>Then edit the trigger's source code by adding the code below the definition of <tt>PMFGetFieldsOfDynaform</tt>. This function can look through the list of returned fields and copy those fields, which are textboxes, to the <tt>@?TextboxList</tt></p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@</span>?result <span style="color: #339933;">=</span> PMFGetFieldsOfDynaform <span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>PROCESS<span style="color: #339933;">,</span><span style="color: #0000ff;">'474212646559afa099f89b0039499032'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@</span>?TextboxList <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">for</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$i</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span> <span style="color: #339933;">&lt;</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@</span>?result<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span><span style="color: #339933;">++</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">@</span>?result<span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FIELD_TYPE'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">==</span> <span style="color: #0000ff;">'textbox'</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">@</span>?FieldList<span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@</span>?result<span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//copy textbox info to @?FieldList</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>This trigger can be set to fire at any point in a process, since the fields in a Dynaform will not change. If the <a href="../3.0/Triggers.html#Debugging_Triggers" title="3.0/Triggers">debugger</a> is enabled, then the contents of the <tt>@?result</tt> can be seen when running a case:</p>
<p><img src="../sites/default/files/3PMPowerUp3-1-1FGetFieldsOfDinaform-result.png"></p>

<h3><span id="PMFGetGroupsOfUser.28.29"><tt>PMFGetGroupsOfUser()</tt></span></h3>
<p><tt>PMFGetGroupsOfUser()</tt> obtains a list of groups to which a user is assigned.</p>
<h4><span id="Function_Definition_6">Function Definition</span></h4>

<codeblock><i>array</i> <strong>PMFGetGroupsOfUser</strong>(<i>string</i> userUid, <i>string</i> statusGroup = 'ACTIVE') 
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><tt><i>string</i> <strong>userUid</strong></tt>: The user's unique ID, which can be found in the following ways:
<ul><li>Get the UID of the currently logged-in user with the <tt>@@USER_LOGGED</tt> system variable or <tt>$_SESSION['USER_LOGGED']</tt>.</li><li>Use the <a href="../3.0/ProcessMaker_Functions.html#PMFUserList.28.29">PMFUserList()</a> or <a href="../3.0/ProcessMaker_WSDL_Web_Services.html#userList.28.29" title="ProcessMaker WSDL Web Services">userList()</a> web service.</li><li>Query the <strong><tt>wf_&lt;WORKSPACE&gt;.USERS.USR_UID</tt></strong> field in the database with <a href="../3.0/ProcessMaker_Functions.html#executeQuery.28.29">executeQuery()</a>.</li></ul></li><li><tt><i>string</i> <strong>statusGroup</strong></tt>: <i>Optional parameter</i>. Group status. It can be <strong>ACTIVE</strong>, <strong>INACTIVE</strong> or <strong>ALL</strong>.</li></ul>
<p><strong>Return value:</strong></p>
<p><tt><i>array</i></tt>. If $userUid is not assigned a value, this function returns <tt>false</tt>. If the user doesn't exist or the user isn't assigned to any groups, then it returns an empty array. If the user is assigned to one or more groups, then it returns the following associative array:</p>

<codeblock><i>array</i> ( 
  <i>string</i> <strong>['&lt;GROUP1-UID&gt;']</strong>: The name of the first group. 
  <i>string</i> <strong>['&lt;GROUP2-UID&gt;']</strong>: The name of the second group.
  ...
)
</codeblock>
<h4><span id="Example_5">Example</span></h4>
<p><tt><strong>1.</strong></tt> Create three groups and assign a user to them. Create a grid Dynaform with two fields: <i>IDgroup</i> and <i>GroupName</i>, both of them in view mode. Add the grid inside a Dynaform with a field name of "gridGroups".</p>
<p><tt><strong>2.</strong></tt> Now, create a trigger which uses the <tt>PMFGetGroupsOfUser()</tt> function. Go to the <strong>TRIGGERS</strong> tab, then click on the <strong>WIZARD</strong> button. Expand <strong>ProcessMaker Advanced Triggers</strong>, click on the <strong><tt>PMFGetGroupsOfUser</tt></strong> <i>(Return the group(s) of a user)</i> function and fill in the following information:</p>
<img src="../sites/default/files/18_2.png" width="848" height="469" alt=""  />
<p>Its definition will be:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$res</span> <span style="color: #339933;">=</span> PMFGetGroupsOfUser<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;ACTIVE&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>The following trigger code creates an array with the same structure as a grid. The trigger will set the contents of a grid named "gridGroups". Make sure to use the same name for the case variable and the field name of the grid object embedded in a master Dynaform. In this example, the function will return all <i>ACTIVE</i> groups.</p>
<p>Don't  forget to create <a href="../3.0/Variables.html">variables</a> in order to associate them with the respective fields. For instance the following variables must be created: <tt>gridGroups</tt> and <tt>UserLogged</tt>. Associate gridGroups to the grid created, and UserLogged with the field where the logged user will appear. To do this, add the following code below the <tt>PMFGetGroupsOfUser</tt> function:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$res</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$c</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$array1</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$res</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$key</span><span style="color: #339933;">=&gt;</span><span style="color: #000088;">$value</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$array1</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$c</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'text0000000002'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$key</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'text0000000003'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$value</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><span style="color: #666666; font-style: italic;">//Use the ID of each grid field</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$c</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$c</span> <span style="color: #339933;">+</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>gridGroups <span style="color: #339933;">=</span> <span style="color: #000088;">$array1</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #339933;">@@</span>Data <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>UserLogged <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>Data<span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'firstname'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">' '</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>Data<span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'lastname'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></div>
<p>After running the case, the result will be:</p>
<img src="../sites/default/files/19_1.png" width="854" height="322" alt=""  />
</pre>
<p>Knowing a user's groups can be useful when doing <a href="../3.0/Tasks.html#Value_Based_Assignment" title="3.0/Tasks">value based assignment</a> in a case.</p>
<h3><span id="PMFGetInputsDocumentsOfCase.28.29"><tt>PMFGetInputsDocumentsOfCase()</tt></span></h3>
<p><tt>PMFGetInputsDocumentsOfCase()</tt> obtains the list of files uploaded for a case or for a particular Input Document in a case.</p>
<h4><span id="Function_Definition_7">Function Definition</span></h4>

<codeblock><i>array</i> <strong>PMFGetInputsDocumentsOfCase</strong>(<i>string</i> appUid, <i>string</i> $inputDocUid = '') 
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><tt><i>string</i> <strong>appUid</strong></tt>: The unique ID of the case. For the current case, set to the <tt>@@APPLICATION</tt> system variable.</li><li><tt><i>string</i> <strong>inputDocUid</strong></tt>: <i>Optional parameter</i>. The unique ID of an Input Document. If not included, then all the files uploaded during the case will be returned, including both Input Document files and any files uploaded to a <a href="../3.0/File_control.html" title="3.0/File_control">file</a> field in a Dynaform.</li></ul>
<p><strong>Return value:</strong></p>
<p>If no files are found, then returns an empty array. If files are found, then returns an array with the following structure:</p>
<dl><dd><tt>[0] <i>array</i></tt></dd><dd><tt>( <i>associative array</i></tt>
<dl><dd><tt><i>string</i> <strong>['APP_DOC_UID']</strong></tt>: The unique ID for the uploaded file.</dd><dd><tt><i>int</i> <strong>['DOC_VERSION']</strong></tt>: The version number of the file. The first version is <tt>1</tt>, the second is <tt>2</tt>, etc.</dd><dd><tt><i>string</i> <strong>['DOC_UID']</strong></tt>: The unique ID for the Input Document.</dd><dd><tt><i>string</i> <strong>['APP_DOC_COMMENT']</strong></tt>: Comment entered by the user when the file was uploaded.</dd><dd><tt><i>string</i> <strong>['APP_DOC_FILENAME']</strong></tt>: The original filename of the uploaded file.</dd><dd><tt><i>int</i> <strong>['APP_DOC_INDEX']</strong></tt>: The index of the uploaded file. The first file for an Input Document is <tt>1</tt>, the second is <tt>2</tt>, etc.</dd><dd><tt><i>string</i> <strong>['TITLE']</strong></tt>: The original filename, which is same as as <tt>['APP_DOC_FILENAME']</tt>.</dd><dd><tt><i>int</i> <strong>['POSITION']</strong></tt>: The number of the step when the file was uploaded. The first step in a task is <tt>1</tt>, the second is <tt>2</tt>, etc.</dd><dd><tt><i>string</i> <strong>['CONFIRM']</strong></tt>: Message to confirm the deletion of the file in the current system language.</dd><dd><tt><i>string</i> <strong>['REPLACE_LABEL']</strong></tt>: Label for the "replace" button, which is no longer used.</dd><dd><tt><i>string</i> <strong>['NEWVERSION_LABEL']</strong></tt>: Label shown on the button to add "New Version" in the current system language.</dd><dd><tt><i>string</i> <strong>['VERSIONHISTORY_LABEL']</strong></tt>: Label shown on the button to see the "Version History" in the current system language.</dd><dd><tt><i>string</i> <strong>['CREATOR']</strong></tt>: The full name (first name and last name) of the user who uploaded the file.</dd><dd><tt><i>string</i> <strong>['APP_DOC_CREATE_DATE']</strong></tt>: The datetime in the format <tt>YYYY-MM-DD HH:MM:SS</tt> when the file was uploaded. Ex: <tt>2014-09-26 11:07:09</tt></dd><dd><tt><i>string</i> <strong>['DOC_VERSION_LABEL']</strong></tt>: The label shown for the version of the file, so the first version is <tt>'1'</tt>, the second is <tt>'2'</tt>, etc.</dd><dd><tt><i>string</i> <strong>['DOWNLOAD_LABEL']</strong></tt>: The label for the "Download" button in the current system language.</dd><dd><tt><i>string</i> <strong>['DOWNLOAD_LINK']</strong></tt>: The partial URL to download the file, using its APP_DOC_UID and DOC_VERSION numbers.
<dl><dd>Ex: <tt>'cases_ShowDocument?a=106235827542580dfcfa708029871391&amp;v=2'</tt></dd></dl></dd><dd><tt><i>string</i> <strong>['COMMENT']</strong></tt>: The file's comment, which is the same as <tt>['APP_DOC_COMMENT']</tt>.</dd></dl></dd><dd><tt>) </tt></dd><dd><tt>...</tt></dd></dl>
<p>An Input Document is identified by its DOC_UID and can have multiple files uploaded to it. Each new file uploaded to an Input Document has a different APP_DOC_UID. If a file has a new version, it will have the same APP_DOC_UID, but its APP_DOC_INDEX will be incremented by 1. In addition, all files, regardless of whether they are new files or another version of an existing file, are numbered in the order in which they were uploaded in the APP_DOC_INDEX.</p>

<p>For example, a user uploads two files to an Input Document with the DOC_UID '747284426542478ef3e1a97070179701'. The first file is "Expense Report Part1.doc" and the second file is "Expense Report Part2.doc". Then the user revises the first file and uploads a new version with the filename "Expense Report Part1-revised.doc". These 3 files would be listed as:</p>
<div style="margin-left:25px"><ul><li>First file: "Expense Report Part1.doc"</li></ul>

<codeblock>APP_DOC_UID:   106235827542580dfcfa708029871391 
DOC_VERSION:   1                                
DOC_UID:       747284426542478ef3e1a97070179701 
APP_DOC_INDEX: 1                                
</codeblock>

<ul><li>Second file: "Expense Report Part2.doc"</li></ul>

<codeblock>APP_DOC_UID:   257039549542580f9e28723099832078   
DOC_VERSION:   1                                
DOC_UID:       747284426542478ef3e1a97070179701 
APP_DOC_INDEX: 2                                
</codeblock>

<ul><li>New version of first file: "Expense Report Part1-revised.doc"</li></ul>

<codeblock>APP_DOC_UID:   106235827542580dfcfa708029871391  
DOC_VERSION:   2                                
DOC_UID:       747284426542478ef3e1a97070179701 
APP_DOC_INDEX: 3
</codeblock>
</div>
<h4><span id="Example_6">Example</span></h4>
<p>This example obtains files uploaded during the execution of a case.</p>
<p><tt><strong>1.</strong></tt> Create an input document and assign it to a task. Then, create a trigger. Go to <strong>TRIGGERS</strong>, then click on the <strong>WIZARD</strong> button. Expand <strong>ProcessMaker Advanced Triggers</strong>, click on the <strong><tt>PMFGetInputsDocumentsOfCase</tt></strong> <i>(Get the list of input documents that belong to a case)</i> function and fill in the following information:</p>
<img src="../sites/default/files/20_1.png" width="845" height="467" alt=""  />
<p>Its definition will be:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span><span style="color: #b1b100;">return</span> <span style="color: #339933;">=</span> PMFGetInputsDocumentsOfCase<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>When the above trigger is executed, the list of Input Document files will be placed in an array in the <tt>@@return</tt> variable.</p>
<p><tt><strong>2.</strong></tt> Set the trigger to fire <i>after</i> an Input Document. Enable ProcessMaker debugger in order to see the value of the <tt>@@return</tt>, while executing a case. In this example, two files are uploaded to the Input Document:</p>
<img src="../sites/default/files/3PMPowerUp3-1-1FGetInputDocument.png" />
<p>Click on next step, and look for the <tt>return</tt> variable in the debugger, which shows that two files were uploaded:</p>
<img src="../sites/default/files/22_1.png" width="367" height="571" alt=""  />
<h4><span id="Create_a_download_link">Create a download link</span></h4>
<p>If the second parameter of the PMFGetInputsDocumentsOfCase() function isn't specified, then the function returns all the files uploaded to the case. To only get the files uploaded to a specific Input Document, set the second parameter to the Input Document UID. To get that ID, open a process for editing and go to the <strong>Input Documents</strong> tab. In the list of Input Documents, click on the <strong>Show ID</strong> button for a specific Input Document:</p>
<img src="../sites/default/files/23_0.png" width="565" height="204" alt=""  />
<p>Then use that ID in the second parameter of the PMFGetInputsDocumentsOfCase() function.</p>
<p>In order to construct the complete URL to download a file, prepend "<a class="external free">http://</a>&lt;IP-ADDRESS&gt;/sys&lt;WORKSPACE&gt;/&lt;LANG&gt;/&lt;SKIN&gt;/case" to the DOWNLOAD_LINK. For example, if the DOWNLOAD_LINK is "cases_ShowDocument?a=106235827542580dfcfa708029871391&amp;v=2", then prepend "<a class="external free">http://www.myserver.com/sysworkflow/en/neoclassic/cases/</a>" to create the complete URL.</p>
<p>In this example, the trigger searches for the last file uploaded to the Input Document with the ID '729919433559c43bf47e145079742369'. It cycles through all the files and looks for the one with the largest APP_DOC_INDEX. Then, it creates a complete URL to download that file, which is stored in the variable <tt>@@FileLink</tt>.</p>
<p>Do not forget to replace <i>www.myserver.com</i> with your ip or server addres, and replace <i>sysworkflow</i> with your workspace name.</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aFiles</span> <span style="color: #339933;">=</span> PMFGetInputsDocumentsOfCase<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'729919433559c43bf47e145079742369'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">//search for last uploaded file:</span><br />
<span style="color: #339933;">@@</span>FileLink <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$lastIndex</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">0</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$aFiles</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$aFile</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$lastIndex</span> <span style="color: #339933;">&lt;</span> <span style="color: #000088;">$aFile</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_INDEX'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$lastIndex</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$aFile</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_INDEX'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">@@</span>FileLink <span style="color: #339933;">=</span> <span style="color: #0000ff;">'http://www.myserver.com/sysworkflow/en/neoclassic/cases/'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$aFile</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'DOWNLOAD_LINK'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span></div></div>
<p>The result will be:</p>
<img src="../sites/default/files/3PMPowerUp3-1-1FGetInputDocument-result.png">
<p>If a subsequent Dynaform has a link field named "FileLink", then it will <a href="../3.0/Links.html#Manipulating_Links_in_Triggers" title="3.0/Links">use the URL</a> set in the above trigger:</p>
<img src="../sites/default/files/3PMPowerUp3-1-1FGetInputDocument-resultDyn.png">

<h3><span id="PMFGetRolUser.28.29"><tt>PMFGetRolUser()</tt></span></h3>
<p><tt>PMFGetRolUser()</tt> obtains the role of a specified user.</p>
<h4><span id="Function_Definition_8">Function Definition</span></h4>

<codeblock><i>string</i> <strong>PMFGetRolUser</strong>(<i>string</i> userUid) 
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><tt><i>string</i> <strong>userUid</strong></tt>: The user's unique ID, which can be found in the following ways:
<ul><li>Get the UID of the user currently logged-in with the <tt>@@USER_LOGGED</tt> system variable or <tt>$_SESSION['USER_LOGGED']</tt>.</li><li>Use the <a href="../3.0/ProcessMaker_Functions.html#PMFUserList.28.29">PMFUserList()</a> or <a href="../3.0/ProcessMaker_WSDL_Web_Services.html#userList.28.29" title="ProcessMaker WSDL Web Services">userList()</a> web service.</li><li>Query the <strong><tt>wf_&lt;WORKSPACE&gt;.USERS.USR_UID</tt></strong> field in the database with <a href="../3.0/ProcessMaker_Functions.html#executeQuery.28.29">executeQuery()</a>.</li></ul></li></ul>
<p><strong>Return value:</strong></p>
<p><tt><i>string</i></tt>. It returns the name of the role.</p>
<h4><span id="Example_7">Example</span></h4>
<p>This example obtains the role a user belongs to. Create a Dynaform with a text field named "Usr_Role". Then, create the trigger with the corresponding function, so go to the <strong>TRIGGERS</strong> tab, then click on the <strong>WIZARD</strong> button. Expand <strong>ProcessMaker Advanced Triggers</strong>, click on the <strong><tt>PMFGetRolUser</tt></strong> <i>(Obtain the role of a user)</i> function and fill in the following information:</p>
<img src="../sites/default/files/24_0.png" width="845" height="467" alt=""  />
<p>Its definition will be:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>Usr_Role <span style="color: #339933;">=</span> PMFGetRolUser <span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
Create a Dynaform with a textfield named <b>Usr_Role</b> and a <a href="../3.0/Variables.html">variable</a> with the same name and then associate the variable with the field created.

<p>Assign the trigger to fire <strong>before</strong> the Dynaform. When a case is executed, the user's role can be obtained:</p>
<img src="../sites/default/files/25_1.png" width="1127" height="190" alt=""  />
<p>This information may be used as a part of the user information displayed in a Dynaform. It can also be used in a condition to determine which tasks or steps are executed in the process.</p>
<h3><span id="PMFGetUserReportsTo.28.29"><tt>PMFGetUserReportsTo()</tt></span></h3>
<p><tt>PMFGetUserReportsTo()</tt> returns the unique ID of the supervisor of a specified user.</p>
<h4><span id="Function_Definition_9">Function Definition</span></h4>

<codeblock><i>string</i> <strong>PMFGetUserReportsTo</strong>(<i>string</i> userUid) 
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><tt><i>string</i> <strong>userUid</strong></tt>: The user's unique ID, which can be found in the following ways:
<ul><li>Get the UID of the user currently logged-in with the <tt>@@USER_LOGGED</tt> system variable or <tt>$_SESSION['USER_LOGGED']</tt>.</li><li>Use the <a href="../3.0/ProcessMaker_Functions.html#PMFUserList.28.29">PMFUserList()</a> or <a href="../3.0/ProcessMaker_WSDL_Web_Services.html#userList.28.29" title="ProcessMaker WSDL Web Services">userList()</a> web service.</li><li>Query the <strong><tt>wf_&lt;WORKSPACE&gt;.USERS.USR_UID</tt></strong> field in the database with <a href="../3.0/ProcessMaker_Functions.html#executeQuery.28.29">executeQuery()</a>.</li></ul></li></ul>
<p><strong>Return value:</strong></p>
<p><tt><i>string</i></tt>. It returns the unique ID of the supervisor.</p>
<h4><span id="Example_8">Example</span></h4>
<p>This example uses the sample "Expense Report" process, to obtain the ID of the supervisor of the user who is executing the current case. That ID is used to send an email to the supervisor, to get the Cash Advance Approved.</p>
<p>First create two users and assign them to a <a href="../3.0/Managing_Users.html#Departments_and_Sub-Departments" title="3.0/Managing Users">department</a> and make one of them a Supervisor:</p>
<img src="../sites/default/files/26_1.png" width="306" height="163" alt=""  />
<p>Then, inside the dynaform (in this case, the corresponding dynaform of the Expense report will be Cash Travel Advanced), create a hidden variable named <tt>IdSupervisor</tt>, there we will save the Supervisor ID that will be used in the trigger. In the following example, we will obtain the role the user belongs to, so, just create a Dynaform with a field name <tt>Usr_Role</tt>.</p>
<p>Then, create the trigger with the corresponding function, go to <strong>TRIGGERS</strong> inside the process you are working on, then click on the <strong>WIZARD</strong> button. Select <strong>ProcessMaker Advanced Triggers</strong>, look for the <strong><tt>PMFGetUserReportsTo</tt></strong> <i>(Returns the user's supervisor)</i> function and fill it with the following information:</p>
<img src="../sites/default/files/27_2.png" width="845" height="469" alt=""  />
<p>The function definition is saved to the variable <tt>@@IdSupervisor</tt> (the supervisor's ID):</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>IdSupervisor <span style="color: #339933;">=</span> PMFGetUserReportsTo <span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>Below the <tt>PMFGetUserReportsTo()</tt> definition, the <tt>@@IdSupervisor</tt> variable is then used in the <a href="../3.0/ProcessMaker_Functions.html#PMFInformationUser.28.29" title="ProcessMaker Functions">PMFInformationUser()</a> function to look up the email address of the supervisor and send him/her an email. Also use the <a href="../3.0/ProcessMaker_Functions.html#PMFSendMessage.28.29" title="ProcessMaker Functions">PMFSendMessage() function</a> to send the email with the <tt>@@mail</tt> variable where you will get the supervisor's email:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aUser</span> <span style="color: #339933;">=</span> PMFInformationUser<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>IdSupervisor<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span><a href="http://php.net/mail"><span style="color: #990000;">mail</span></a> <span style="color: #339933;">=</span> <span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'mail'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span><span style="color: #b1b100;">return</span><span style="color: #339933;">=</span>PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'liliana@colosa.com'</span><span style="color: #339933;">,</span> <span style="color: #339933;">@@</span><a href="http://php.net/mail"><span style="color: #990000;">mail</span></a><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Approve Advance Cash'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'template.html'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>Do not forget to configure your <a href="../3.0/Email_Settings.html">email server</a> and replace <i>'liliana@colosa.com'</i> by your personal email. Additionally, edit the <tt>template.html</tt> file in order to add information to send to the supervisor.</p>
<p>Assign this trigger to fire <i>before</i> the Dynaform.  After starting the case, the following Dynaform will be used in order to send information for the corresponding approval:</p>
<img src="../sites/default/files/28_1.png" width="303" height="483" alt=""  />
<p>This will help us to know if the values are being used properly. For instance, the value can be used to send information to that supervisor.</p>

<h3><span id="PMFGetUsersOfTask.28.29"><tt>PMFGetUsersOfTask()</tt></span></h3>
<p><tt>PMFGetUsersOfTask()</tt> obtains a list of users assigned to a task, no matter what type of assignment rule the task has. This function also includes users assigned to the task as members of groups.</p>
<h4><span id="Function_Definition_10">Function Definition</span></h4>

<codeblock><i>array</i> <strong>PMFGetUsersOfTask</strong>(<i>string</i> taskUid, <i>string</i> $statusGroup = 'ACTIVE', <i>string</i> $statusUser = 'ACTIVE') 
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><tt><i>string</i> <strong>taskUid</strong></tt>. The unique ID of the task, which can be found in the following ways:
<ul><li>Use the <tt>@@TASK</tt> system variable for the unique ID of the current task.</li><li>Use the <a href="../3.0/ProcessMaker_Functions.html#PMFTaskList.28.29">PMFTaskList()</a> function or <a href="../3.0/ProcessMaker_WSDL_Web_Services.html#taskList.28.29" title="3.0/ProcessMaker WSDL Web Services">taskList()</a> web service.</li><li>Query the <strong><tt>wf_&lt;WORKSPACE&gt;.TASK.TAS_UID</tt></strong> field in the database or get the starting task of the current process with the following query:</li></ul></li></ul>
<dl><dd><dl><dd><tt>"SELECT TAS_UID FROM TASK WHERE PRO_UID='" . @@PROCESS . "' AND TAS_START='TRUE'"</tt></dd></dl></dd></dl>
<ul><li><tt><i>string</i> <strong>statusGroup</strong></tt>. <i>Optional parameter</i>. Obtains groups with the specified status, which can be: <tt>'ACTIVE'</tt>, <tt>'INACTIVE'</tt> or <tt>'ALL'</tt></li><li><tt><i>string</i> <strong>statusUser</strong></tt>. <i>Optional parameter</i>. Obtains users with the specified status, which can be: <tt>'ACTIVE'</tt>, <tt>'INACTIVE'</tt> or <tt>'ALL'</tt></li></ul>
<p><strong>Return value:</strong></p>
<p>The list of users is returned in an array of associative arrays:</p>

<codeblock>[0]: <i>array</i> (
   <i>string</i> ["USR_UID"]:       The user's unique ID.
   <i>string</i> ["USR_FIRSTNAME"]: The user's first name.
   <i>string</i> ["USR_LASTNAME"]:  The user's last name.
   <i>string</i> ["USR_USERNAME"]:  The username.
   <i>string</i> ["USR_EMAIL"]:     The user's email address.
   <i>string</i> ["USR_STATUS"]:    The user's status which can be 'ACTIVE', 'INACTIVE' or 'VACATION'.
   <i>string</i> ["DEP_UID"]:       The unique ID of the user's department. 
                             If not a member of a department, then set to '' (empty string).
   <i>string</i> ["USR_ROLE"]:      The user's role, such as 'PROCESSMAKER_ADMIN', 'PROCESSMAKER_MANAGER' or 'PROCESSMAKER_OPERATOR'.
   <i>string</i> ["USR_REPORTS_TO"]:The unique ID of the supervisor to whom the user reports. 
                             If not a member of a department or are a top-level supervisor, then set to '' (empty string).
)
...
</codeblock>

<h4><span id="Example_9">Example</span></h4>
<p>Let's display users who are assigned in a task.</p>
<img src="../sites/default/files/3PMPowerUp3-1-1FGetUsersOfATask.png">
<p>First, create the trigger with the corresponding function. Go to <strong>TRIGGERS</strong> inside the process you are working on, then click on the <strong>WIZARD</strong> button. Expand <strong>ProcessMaker Advanced Triggers</strong>, look for the <strong><tt>PMFGetUsersOfTask</tt></strong> <i>(Get a list of users assigned to a task)</i> function and fill it with the following information:</p>
<img src="../sites/default/files/29_1.png" width="843" height="465" alt=""  />
<p>Its definition will be:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>res <span style="color: #339933;">=</span> PMFGetUsersOfTask<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>TASK<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;ACTIVE&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;ACTIVE&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>In the case of the example, the task ID will be defined inside the trigger, in our case it is <tt>@@TASK</tt>, the current task. We will get the information in the <tt>@@res</tt> variable. For this example, we use Active Groups and Users. In order to get the result you need to enable your <a href="../3.0/Triggers.html#Debugging_Triggers" title="3.0/Triggers">debug</a> mode.</p>
<p>Assign the trigger at any place in the process, depending on how [the process/the trigger] was designed; the important thing here is the result obtained. For example, there are three users assigned in the task, so when the process and trigger are executed, the following information will be obtained:</p>
<img src="../sites/default/files/30_1.png" width="366" height="587" alt=""  />
<p>As it can be seen, the information of all users assigned to a task is displayed. This information can help to decide which user will get the next task when using <a href="../3.0/Tasks.html#Value_Based_Assignment" title="3.0/Tasks">value based assignment</a>.</p>
<h3><span id="PMFLoadGrid.28.29"><tt>PMFLoadGrid()</tt></span></h3>
<p><tt>PMFLoadGrid()</tt> populates a grid with data stored in a <a href="../3.0/PM_Tables.html" title="3.0/PM Tables">PM Table</a> or other MySQL table in the <strong><tt>wf_&lt;WORKSPACE&gt;</tt></strong> database for the current ProcessMaker workspace.</p>
<h4><span id="Function_Definition_11">Function Definition</span></h4>

<codeblock><i>array</i> <strong>PMFLoadGrid</strong>(<i>string</i> sourceData, <i>array</i> gridFields=array(), <i>string</i> gridName='', <i>string</i> proUid='',
                  <i>string</i> dynUid='', <i>string</i> sortField='', <i>string</i> ord='ASC') 
</codeblock>

<p>There are two ways to call the PMFLoadGrid() function. The grid can be populated by <i>either</i> defining the <tt>gridFields</tt> parameter <i>or</i> by defining the <tt>gridName</tt>, <tt>proUid</tt> and <tt>dynUid</tt> parameters. If <tt>gridFields</tt> is an associative array of field names, then the first method will be used and the <tt>gridName</tt>, <tt>proUid</tt> and <tt>dynUid</tt> will be ignored.</p>
<p><strong>Parameters:</strong></p>
<ul><li><tt><i>string</i> <strong>sourceData</strong></tt>: The name of the table to query or an SQL SELECT statement. Remember that PM Table names are in uppercase by default and PM Tables have 'PMT_' prepended, so a PM Table named "CLIENTS_INFO" will be <tt>'PMT_CLIENTS_INFO'</tt>.</li><li><tt><i>array</i> <strong>gridFields</strong></tt>: <i>Optional parameter.</i> An associative array that maps the grid fields to their corresponding table fields. The keys in the array contain the names of the fields in a grid and their values are the corresponding names of the fields in the database table:</li></ul>
<dl><dd><dl><dd><tt>array("<i>grid-field1</i>"=&gt;"<i>table-field1</i>", "<i>grid-field2</i>"=&gt;"<i>table-field2</i>", ...)</tt></dd></dl></dd><dd>Note that it is necessary to list all the fields to be retrieved, even if the field names in the grid are the same as the field names in the database table. If the <tt>gridName</tt>, <tt>proUid</tt> and <tt>dynUid</tt> parameters will be defined, then set this parameter to <strong><tt>array()</tt></strong>, which is an empty array.</dd></dl>
<ul><li><tt><i>string</i> <strong>gridName</strong></tt>: <i>Optional parameter.</i> The field name of the grid in a master Dynaform. Do NOT use the name of the separate grid form.</li><li><tt><i>string</i> <strong>proUid</strong></tt>: <i>Optional parameter.</i> The unique ID of the process. To get the unique ID of the current process, use the <tt>@@PROCESS</tt> system variable.</li><li><tt><i>string</i> <strong>dynUid</strong></tt>: <i>Optional parameter.</i> The unique ID of the master Dynaform that contains the grid. To get this ID, open the process for editing, click on <strong>DYNAFORMS</strong> in the top bar and in the list click on the <strong>UID</strong> button for the Dynaform.</li><li><tt><i>string</i> <strong>sortField</strong></tt>: <i>Optional parameter</i>. The name of the field by which the grid will be sorted. If omitted or set to <tt>''</tt> (empty string), then the rows will be left in the order retrieved from the database.</li><li><tt><i>string</i> <strong>ord</strong></tt>: <i>Optional parameter</i>. The order by which the grid will be sorted, which is <tt>'ASC'</tt> (ascending order) by default. It can be either <tt>'ASC'</tt> or <tt>'DESC'</tt>.</li></ul>
<p><strong>Return value:</strong></p>
<p><tt><i>array</i></tt>. It returns data as a numbered array of associative arrays, where the keys in the associative arrays are the names of the fields in the grid. This is the same way that grids are represented in ProcessMaker:</p>

<codeblock>[1]: array (
   [field1]: Value1
   [field2]: Value2
   ...
)
...
</codeblock>

<p>Note that the array starts counting from <strong>1</strong>, not <strong>0</strong> like a normal array. If the return value PMFLoadGrid() is assigned to a case variable that has the same name as the field name of a grid in a master Dynaform, then the grid will display the data returned by PMFLoadGrid().</p>

<h3><span id="PMFSetOnVacation.28.29"><tt>PMFSetOnVacation()</tt></span></h3>
<p><tt>PMFSetOnVacation()</tt> sets a user's status to <strong>VACATION</strong> and reassigns that user's cases to another user. Note that the user will not be able to run any more cases, until his/her status is set back to <strong>ACTIVE</strong>.</p>
<p>Note that only cases which have "TO_DO" status are reassigned. Cases with "DRAFT" status are not reassigned.</p>
<h4><span id="Function_Definition_12">Function Definition</span></h4>

<codeblock><i>array</i> <strong>PMFSetOnVacation</strong>(<i>string</i> userUid, <i>string</i> userReplacer = '') 
</codeblock>

<p><strong>Parameters:</strong></p>
<ul><li><tt><i>string</i> <strong>userUid</strong></tt>. The unique ID of the user whose status will be changed to <strong>VACATION</strong>. The ID can be found in the following ways:
<ul><li>Get the UID of the currently logged-in user with the <tt>@@USER_LOGGED</tt> system variable or <tt>$_SESSION['USER_LOGGED']</tt>.</li><li>Use the <a href="../3.0/ProcessMaker_Functions.html#PMFUserList.28.29">PMFUserList()</a> or <a href="../3.0/ProcessMaker_WSDL_Web_Services.html#userList.28.29" title="ProcessMaker WSDL Web Services">userList()</a> web service.</li><li>Query the <strong><tt>wf_&lt;WORKSPACE&gt;.USERS.USR_UID</tt></strong> field in the database with <a href="../3.0/ProcessMaker_Functions.html#executeQuery.28.29">executeQuery()</a>.</li></ul></li><li><tt><i>string</i> <strong>userReplacer </strong></tt>. <i>Optional parameter</i>. The unique ID of the user who will replace the user who is on vacation and be reassigned to their cases. Make sure that this replacement user either has normal or ad hoc assignment to the tasks, so they are available to be reassigned. If this parameter is not defined, then the user selected in the <strong>Replace by</strong> field of the <a href="../3.0/Managing_Users.html#Creating_New_Users" title="3.0/Managing Users">user's profile</a> will be reassigned to the cases.</li></ul>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">The replaceBy parameter does not change the replaceby parameter value in the user profile. This parameter only applies to cases where the function is called.</font></p>
<p><strong>Return value:</strong></p>
<p>If the user to set on vacation or the replacement user do not currently have ACTIVE status, then returns a string with an error message. Otherwise, returns the following associative array:</p>

<codeblock>array ( 
   <i>int</i>   <strong>['TOTAL']</strong>:           The number of cases reassigned.
   <i>array</i> <strong>['CASES_REASSIGNED']</strong>: (  
      [0] array (
         <i>string</i> <strong>[APP_UID]</strong>:    The unique ID for the case.
         <i>string</i> <strong>[APP_TITLE]</strong>:  The case title, which is #&lt;CASE-NUMBER&gt; if there is no case label set.
         <i>int</i>    <strong>[APP_NUMBER]</strong>: The case number.
      )
      ...
   )
)
</codeblock>
<h4><span id="Example_10">Example</span></h4>
<p>In the example below, we will create a Dynaform where you will be able to decide which person will replace the user on vacation.</p>
<p><tt><strong>Step 1:</strong></tt> Let's create a Dynaform with two <a href="../3.0/DynaForm_Controls.html#Dropdown_Control">dropdown fields</a>.</p>
<p>Then create two <a href="../3.0/Variables.html">variables</a>, UserId, ReplacedBy, for each respective field and add the following SQL statement:
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> USR_UID<span style="color: #66cc66;">,</span> USR_FIRSTNAME <span style="color: #993333; font-weight: bold;">FROM</span> USERS</div></div>

<p>Both variables must have the same SQL statement:</p>

<img src="../sites/default/files/33_1.png" width="663" height="328" alt=""  />

<p>Then, each variable must be related to its corresponding Dynaform field.</p>

<p><tt><strong>Step 2:</strong></tt> Create the trigger with the corresponding function, go to <strong>TRIGGERS</strong> inside the process you are working on, then click on the <strong>WIZARD</strong> button. Expand <strong>ProcessMaker Advanced Triggers</strong>, look for the <strong><tt>PMFSetOnVacation</tt></strong> <i>(Change a user to ' on vacation' status)</i> function and fill it with the following information:</p>

<img src="../sites/default/files/3PMPowerUp3-1-1FSetOnVacation.png" >
<p>As you can see we are using Dynaform variables in both parameters.</p>
<p>Its definition will be:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span><span style="color: #b1b100;">Return</span> <span style="color: #339933;">=</span> PMFSetOnVacation<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>UserId<span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>ReplacedBy<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p><tt><strong>Step 3:</strong></tt> Make sure you have pending cases for the users you are going to use. We will use two users, Amy Johnson and Mark Peterson. Logging in with Mark Peterson and going to his inbox, we will see 4 cases:</p>

<img src="../sites/default/files/34_1.png" width="808" height="239" alt=""  />

<p>Then, execute a case. In the first field choose Mark Peterson, since he will be the person on vacation and will be replaced by Amy Johnson. This last user must be chosen on the second field:</p>
<img src="../sites/default/files/35_1.png" width="769" height="246" alt=""  />
<p>Click on the <strong>Submit</strong> button, and if you have the <a href="../3.0/Triggers.html#Debugging_Triggers" title="3.0/Triggers">debugger enabled</a>, inside the <tt><i>return</i></tt> variable you will see the number of reassigned cases and their corresponding information:
</p><img src="../sites/default/files/36_1.png" width="360" height="287" alt=""/>
<p>Logging in with the user 'Mark Peterson', we will see that the inbox folder is empty:</p>
<img src="../sites/default/files/37_1.png" width="818" height="261" alt=""  />
<p>Finally, logging in as 'Amy Johnson', we will see all reassigned cases in her inbox folder:</p>
<img src="../sites/default/files/38_1.png" width="1363" height="329" alt=""  /></div></div></div>  </div>

      <footer>
          </footer>
  
    </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
      </section>
    </div>
  
      
    </div>

      
</div>

 <!---add diego--->
  <div id="download-app-section" class="download-app mobile-none">
			<div class="row">
				<div class="col-md-12">
					<div class="text_app">Download our app</div>
							<a href="https://itunes.apple.com/us/app/processmaker/id992576284?ls=1&amp;mt=8" target="_blank">
								<img src="../themes/thecompany_responsive_theme/images/appstore.png">
							<a href="https://play.google.com/store/apps/details?id=com.colosa.processmaker" target="_blank">
								<img src="../themes/thecompany_responsive_theme/images/playstore.png">				
				</div>
			</div>
  </div>
  <!---end diego--->
<!----add diego----->    
		<div class="logo_processmaker"><a href="http://www.processmaker.com/">
		<img src="../themes/thecompany_responsive_theme/images/logo_processmaker.png"></div>
<!----end diego----->
<div id="footer">
  <div id="footer_wrapper">
      </div>

  <div class="social-media-wrapper">
         <div id="social-media-icons">
       <ul>
       	<div class="text_contact">Contact us</div>
				<div class="text_number">+1-617-340-3377</div>
        <!--<li><a class="rss" href="/rss.xml">rss</a></li> <!--edit diego-->
        <li><a class="facebook" href="http://facebook.com/processmaker/" target="_blank" rel="me">facebook</a></li>
        <li><a class="twitter" href="https://twitter.com/processmaker" target="_blank" rel="me">twitter</a></li>
        <li><a class="gplus" href="https://www.google.com/+ProcessMakerOpenSource" target="_blank" rel="me">Gplus</a></li>
        <li><a class="linkedin" href="https://www.linkedin.com/groups?mostRecent=&amp;gid=3970335&amp;trk=my_groups-tile-flipgrp" target="_blank" rel="me">Linked in</a></li>
        <!--<li><a class="dribbble" href="http://dribbble.com" target="_blank" rel="me">Dribbble</a></li>
        <li><a class="vimeo" href="http://vimeo.com" target="_blank" rel="me">Vimeo</a></li>-->
        <li><a class="youtube" href="https://www.youtube.com/user/processmaker" target="_blank" rel="me">Youtube</a></li>
       </ul>
      </div>
      </div>
  
  <div class="footer_credit">
    <div class="footer_inner_credit">
           <div id="foot"><div class="region region-footer">
  <div id="block-block-2" class="block block-block">

      
  <div class="content">
    <p><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">Automate your Workflow with Business Process Management<br>Software licensed under the <a 1px="" class="external text" href="http://www.gnu.org/licenses/agpl.html" rel="nofollow" style="padding-right: 13px; color:white;">GNU Affero General Public License version 3</a><br>Contact us:&nbsp;<a class="external free" href="mailto:community@processmaker.com" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">community@processmaker.com</a><br><a class="external free" href="https://www.processmaker.com/privacy-statement" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">Privacy Statement</a></font><br><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">© Copyright 2000-2024 ProcessMaker Inc. All rights reserved.</font></p>
  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
</div>
         
   <!-- <div id="copyright">
      <p class="copyright">Copyright &copy; 2024, Documentation@ProcessMaker </p>
      <!--<p class="credits"> Developed by  <a href="http://www.zymphonies.com">Zymphonies</a></p>
      <div class="clear"></div>
    </div>-->
  </div>
  
  </div>
</div>

</div>

<script type="text/javascript">
  /* <![CDATA[ */
  document.write (
    '<img src="https://marketing.processmaker.com/acton/bn/3812/visitor.gif?ts='+ new Date().getTime()+ '&ref='+escape(document.referrer) + '">'
  );
  /* ]]> */
</script>
  
</div>
    <style>
    .center-div{
        width: 100%;        
        margin: 0 auto;
        z-index:10000;
        position:fixed;
        bottom: 0px;
        cursor:pointer;
    }
    .round-popup{
        margin:0 auto;
        font-family: 'Montserrat', sans-serif;
        font-size: 15px;
        font-weight: lighter;
        width: 412px;
        height: 50px;
        padding-top: 7px;
        text-align: center;
        position:relative;
    }
    .round-popup-button{
        position:absolute;
        top: 11px;
        right: 15px;
        background: transparent;
        border:none;
        font-size:15px;
        font-weight:normal;
        line-height:20px;
        width:20px;
        height:20px;
        padding:0;
    }
    .round-background-blue{
        background: url('http://www.processmaker.com/uploads/blue.png')no-repeat;
        color:white;
        
    }
    #box-pm31-button-blue{
        color: rgba(255, 255, 255, 0.5);
    }
    
    #box-pm31-button-blue:active,#box-pm31-button-blue:focus{
        border:none;
        outline:none;
    }
    .round-background-blue a{
        color: white!important;
        text-decoration: none;
        font-size: 15px;
        line-height:45px;
        font-family:Montserrat, sans-serif;
    }
    .round-background-blue span{
        font-weight: bold;
    }
    /*WHITE background*/
    .round-background-white{
        background: url('http://www.processmaker.com/uploads/white.png')no-repeat;
        background-position-x: -9px;        
        color: #3397E1;
    }
    .round-background-white a:hover{
        color: #3397E1!important;
        text-decoration: none;
        font-size: 15px;
    }
    #box-pm31-button-white{
        color: rgba(51, 151, 225, 0.7);
    }
</style>
    <div id="box-pm31" class="center-div" style="display:none;">
        <div class="round-popup round-background-blue">
            <a onclick="ga('send', 'event', 'WikiBlueBanner','click','PM31Release');" href="http://www.processmaker.com/download-processmaker-landing-page">
                <span>ProcessMaker 3.1</span> is Here! Download Now <span style="font-size:20px;font-weigth:normal;">»</span>
            </a>
            <button id="box-pm31-button-blue" class="round-popup-button">&times;</button>
        </div>
    </div>
    <script>

function pmCreateCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function pmReadCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function pmEraseCookie(name) {
    createCookie(name,"",-1);
}



     jQuery(document).ready(function( $ ) {
        $('#box-pm31-button-blue').click(function(e){
                e.stopPropagation();
                $('#box-pm31').slideUp('fast');
                pmCreateCookie('ppcookie','val',10);
            });
        });
        jQuery(window).load(function() {
            if(pmReadCookie('ppcookie') !== 'val'){
                //jQuery('#box-pm31').delay( 2000 ).slideDown('slow');
            }
        });
    </script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">

<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
    // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
    // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.marinsm.com/serve/586a7ec3a2ae6b728400003d.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>

</body>

<!-- Mirrored from wiki.processmaker.com/node/367 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Feb 2024 09:47:53 GMT -->
</html>
