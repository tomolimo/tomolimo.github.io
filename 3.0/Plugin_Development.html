<!DOCTYPE html>

<!-- Mirrored from wiki.processmaker.com/3.0/Plugin_Development by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Feb 2024 09:06:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta name="keywords" content="BPM, business process management, workflow, processmaker, business, BPM Windows, BPM Linux, wiki, BPM documentation, BPM FAQ, task documentation, BPM PHP, BPM Open Source, BPM Variables, BPM Installation, BPM Programming, BPM Elements, BPM Concepts, BPM Frequently Asked Questions, BPM 3.0, BPM News, Release notes, DynaForms, BPM Community, BPM Enterprise, BPM Mobile, BPM Responsive Web Design, User Manual, BPM Resources" />
<link rel="alternate" hreflang="en" href="../index.html" />
<link rel="shortcut icon" href="../themes/thecompany_responsive_theme/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="description" content="ProcessMaker is commercial open source workflow and business process management software." />
<meta name="viewport" content="width=device-width" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="Plugin_Development.html" />
<link rel="shortlink" href="../node/479.html" />
<title>3.0 - 3.5 - Plugin Development | Documentation@ProcessMaker</title>
<style type="text/css" media="all">
@import url("../modules/system/system.base2af9.css?s743n7");
@import url("../modules/system/system.menus2af9.css?s743n7");
@import url("../modules/system/system.messages2af9.css?s743n7");
@import url("../modules/system/system.theme2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../modules/aggregator/aggregator2af9.css?s743n7");
@import url("../modules/comment/comment2af9.css?s743n7");
@import url("../modules/field/theme/field2af9.css?s743n7");
@import url("../modules/node/node2af9.css?s743n7");
@import url("../modules/search/search2af9.css?s743n7");
@import url("../modules/toc_filter/toc_filter2af9.css?s743n7");
@import url("../modules/user/user2af9.css?s743n7");
@import url("../modules/views/css/views2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../sites/all/modules/colorbox/styles/default/colorbox_style2af9.css?s743n7");
@import url("../modules/ctools/css/ctools2af9.css?s743n7");
@import url("../sites/all/modules/geshifilter/geshifilter2af9.css?s743n7");
@import url("../modules/panels/css/panels2af9.css?s743n7");
@import url("../modules/nice_menus/css/nice_menus2af9.css?s743n7");
@import url("../modules/nice_menus/css/nice_menus_default2af9.css?s743n7");
@import url("../modules/fivestar/css/fivestar2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../themes/thecompany_responsive_theme/css/style2af9.css?s743n7");
@import url("../themes/thecompany_responsive_theme/css/media2af9.css?s743n7");
</style>
<script type="text/javascript" src="../modules/jquery_update/replace/jquery/1.9/jquery.min4b17.js?v=1.9.1"></script>
<script type="text/javascript" src="../misc/jquery.once7839.js?v=1.2"></script>
<script type="text/javascript" src="../misc/drupal2af9.js?s743n7"></script>
<script type="text/javascript" src="../modules/nice_menus/js/jquery.bgiframef195.js?v=2.1"></script>
<script type="text/javascript" src="../modules/nice_menus/js/jquery.hoverIntent1f6b.js?v=0.5"></script>
<script type="text/javascript" src="../modules/nice_menus/js/superfish099d.js?v=1.4.8"></script>
<script type="text/javascript" src="../modules/nice_menus/js/nice_menusc619.js?v=1.0"></script>
<script type="text/javascript" src="../modules/jquery_update/replace/ui/external/jquery.cookie1683.js?v=67fb34f6a866c40d0570"></script>
<script type="text/javascript" src="../modules/jquery_update/replace/misc/jquery.form.min97e5.js?v=2.69"></script>
<script type="text/javascript" src="../misc/ajax2347.js?v=7.34"></script>
<script type="text/javascript" src="../modules/jquery_update/js/jquery_update241d.js?v=0.0.1"></script>
<script type="text/javascript" src="../modules/toc_filter/toc_filter2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/js/colorbox2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/styles/default/colorbox_style2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/google_analytics/googleanalytics2af9.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","../../www.google-analytics.com/analytics.js","ga");ga("create", "UA-3380652-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript" src="../misc/progress2347.js?v=7.34"></script>
<script type="text/javascript" src="../modules/fivestar/js/fivestar.ajax2af9.js?s743n7"></script>
<script type="text/javascript" src="../modules/fivestar/js/fivestar2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-1.10.2.min2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-ui2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-ui.min2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/custom2af9.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"thecompany_responsive_theme","theme_token":"PWFJ-2lr9HT13BtW6PKQaxKfkC_Tx0iCW_XY-J0iJrM","jquery_version":"1.9","js":{"modules\/jquery_update\/replace\/jquery\/1.9\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"modules\/nice_menus\/js\/jquery.bgiframe.js":1,"modules\/nice_menus\/js\/jquery.hoverIntent.js":1,"modules\/nice_menus\/js\/superfish.js":1,"modules\/nice_menus\/js\/nice_menus.js":1,"modules\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"modules\/jquery_update\/replace\/misc\/jquery.form.min.js":1,"misc\/ajax.js":1,"modules\/jquery_update\/js\/jquery_update.js":1,"modules\/toc_filter\/toc_filter.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox.js":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"misc\/progress.js":1,"modules\/fivestar\/js\/fivestar.ajax.js":1,"modules\/fivestar\/js\/fivestar.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-1.10.2.min.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.min.js":1,"themes\/thecompany_responsive_theme\/js\/custom.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/toc_filter\/toc_filter.css":1,"modules\/user\/user.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"modules\/panels\/css\/panels.css":1,"modules\/nice_menus\/css\/nice_menus.css":1,"modules\/nice_menus\/css\/nice_menus_default.css":1,"modules\/fivestar\/css\/fivestar.css":1,"themes\/thecompany_responsive_theme\/css\/style.css":1,"themes\/thecompany_responsive_theme\/css\/media.css":1}},"colorbox":{"opacity":"0.85","current":"{current} of {total}","previous":"\u00ab Prev","next":"Next \u00bb","close":"Close","maxWidth":"98%","maxHeight":"98%","fixed":true,"mobiledetect":true,"mobiledevicewidth":"480px","specificPagesDefaultValue":"admin*\nimagebrowser*\nimg_assist*\nimce*\nnode\/add\/*\nnode\/*\/edit\nprint\/*\nprintpdf\/*\nsystem\/ajax\nsystem\/ajax\/*"},"toc_filter_smooth_scroll_duration":"","googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip","trackColorbox":1},"nice_menus_options":{"delay":"800","speed":"slow"},"ajax":{"edit-vote--2":{"callback":"fivestar_ajax_submit","event":"change","url":"\/system\/ajax","submit":{"_triggering_element_name":"vote"}}}});
//--><!]]>
</script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','../../connect.facebook.net/en_US/fbevents.js');
// Insert Your Facebook Pixel ID below.
fbq('init', '735235999992228');
fbq('track', 'PageView');
</script>
<!-- Insert Your Facebook Pixel ID below. -->
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=735235999992228&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-479 node-type-processmakerbpm">
    
<div class="wrap">

<div id="header_wrapper">
  <div id="inner_header_wrapper">

    <header id="header" role="banner">
      
      <div class="header_inner_wrapper">
        <div class="header_left">
                      <div id="logo">
              <a href="../index.html" title="Home"><img src="../sites/default/files/full-logo.png"/></a>
            </div>
                    	  <div class="menu_wrapper">
            <nav id="main-menu"  role="navigation">
              <a class="nav-toggle" href="#">Navigation</a>
              <div class="menu-navigation-container">
                <ul class="menu"><li class="first leaf"><a href="../PM_Classic.html" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="leaf"><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="leaf"><a href="../3.1/user_guide.html">User Guide</a></li>
<li class="leaf"><a href="../3.1/developer_info.html">Developer Info</a></li>
<li class="leaf"><a href="../3.2/sys_administration.html">Sys Administration</a></li>
<li class="leaf"><a href="../3.1/resources.html">Helpful Resources</a></li>
<li class="leaf"><a href="../Sitemap.html">Sitemap</a></li>
<li class="last leaf"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>              </div>
              <div class="clear"></div>
            </nav>
          </div>
                  <!--  <h1 id="site-title">
            <a href="/" title="Home">Documentation@ProcessMaker</a>
            <div id="site-description"></div>
          </h1> -->
            
        </div>
      </div>
      <div class="header_right">
          <div class="region region-search">
  <div id="block-search-form" class="block block-search">

        <h2 >_</h2>
    
  <div class="content">
    <form action="https://wiki.processmaker.com/3.0/Plugin_Development" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." placeholder="Search" type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-pRzYgjgoFSdKycHdwWi79VrpHbitb6yU3U3em87Aq-E" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
                  <h1 class="page-title">3.0 - 3.5 - Plugin Development</h1>                <p class="page-title-suffix"></p>
                 <div style="margin-top: 5px;"></div>
      </div>
    </header>
    <div class="region-version">
      <span>Version: </span><ul><li><a href="../3.6/Plugin_Development.html" class="">3.8</a></li><li><a href="../3.6/Plugin_Development.html" class="">3.7</a></li><li><a href="../3.6/Plugin_Development.html" class="">3.6</a></li><li><a  class="active-version">3.5</a></li><li><a  class="active-version">3.4</a></li><li><a  class="active-version">3.3</a></li><li><a  class="active-version">3.2</a></li><li><a  class="active-version">3.1</a></li><li><a  class="active-version">3.0</a></li><li><a href="../index.php/2.0.36/Plugin_Development.html" class="">2.x</a></li></ul>    </div>
  </div>
</div>
<!-- <ul class="nice-menu nice-menu-down nice-menu-main-menu" id="nice-menu-0"><li class="menu-506 menu-path-node-1078 first odd "><a href="/PM_Classic" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="menu-319 menu-path-processmakercom-tutorials  even "><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="menu-320 menu-path-node-571  odd "><a href="/3.1/user_guide">User Guide</a></li>
<li class="menu-1138 menu-path-node-572  even "><a href="/3.1/developer_info">Developer Info</a></li>
<li class="menu-1197 menu-path-node-876  odd "><a href="/3.2/sys_administration">Sys Administration</a></li>
<li class="menu-1140 menu-path-node-236  even "><a href="/3.1/resources">Helpful Resources</a></li>
<li class="menu-1141 menu-path-node-554  odd "><a href="/Sitemap">Sitemap</a></li>
<li class="menu-1213 menu-path-sprocessmakergitbookio-processmaker-  even last"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>
-->
  
  <div id="container">
    
    <div class="content-sidebar-wrap">

    <div id="content">

              <!-- <div id="breadcrumbs">
        <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="/">Home</a></div></div> -->
      
      <section id="post-content" role="main">
                                        <div class="region region-content">
  <div id="block-system-main" class="block block-system">

      
  <div class="content">
                          <span property="dc:title" content="3.0 - 3.5 - Plugin Development" class="rdf-meta element-hidden"></span>  
      
    
  <div class="content node-processmakerbpm">
    <div class="field field-name-field-how-useful-did-you-find-th field-type-fivestar field-label-above"><div class="field-label">Please rate how useful you found this document:&nbsp;</div><div class="field-items"><div class="field-item even"><form class="fivestar-widget" action="https://wiki.processmaker.com/3.0/Plugin_Development" method="post" id="fivestar-custom-widget" accept-charset="UTF-8"><div><div  class="clearfix fivestar-average-text fivestar-average-stars fivestar-form-item fivestar-default"><div class="form-item form-type-fivestar form-item-vote">
 <div class="form-item form-type-select form-item-vote">
 <select id="edit-vote--2" name="vote" class="form-select"><option value="-">Select rating</option><option value="20">Give 3.0 - 3.5 - Plugin Development 1/5</option><option value="40">Give 3.0 - 3.5 - Plugin Development 2/5</option><option value="60">Give 3.0 - 3.5 - Plugin Development 3/5</option><option value="80" selected="selected">Give 3.0 - 3.5 - Plugin Development 4/5</option><option value="100">Give 3.0 - 3.5 - Plugin Development 5/5</option></select>
<div class="description"><div class="fivestar-summary fivestar-summary-average-count"><span class="average-rating">Average: <span >3.1</span></span> <span class="total-votes">(<span >9</span> votes)</span></div></div>
</div>

</div>
</div><input class="fivestar-submit form-submit" type="submit" id="edit-fivestar-submit" name="op" value="Rate" /><input type="hidden" name="form_build_id" value="form-jrPVLOUyQLwxN2l37524Rt1PBoeTdHWZcWq07v9sbmM" />
<input type="hidden" name="form_id" value="fivestar_custom_widget" />
</div></form></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><div style="float: right; margin-left: 5px; background-color: #f9f9f9; border: 1px solid #aaaaaa; padding: 5px;"><center><strong>Contents:</strong> [<a href="#" onclick="var el = document.getElementById('toc');
        var txt = ('innerText' in el)? 'innerText' : 'textContent';
        if (el.style.display=='none') { 
           el.style.display = '';
           document.getElementById('hideLabel')[txt] = 'hide';
        }
        else {
	        el.style.display = 'none';
           document.getElementById('hideLabel')[txt] = 'show';
        }"><span id="hideLabel">hide</span></a>]</b></center><div id="toc" ><ol class="toc">
<li class="toc"><a href="#Overview">Overview</a></li>
<li class="toc"><a href="#Restriction">Restriction</a></li>
<li class="toc"><a href="#Setting_up_the_gulliver_script">Step 1: Setting Up the gulliver Script</a></li>
<ol class="toc">
<li class="toc"><a href="#Using_the_gulliver_script">Options of the gulliver Script</a></li>
</ol>
<li class="toc"><a href="#Creating_a_new_Plugin">Step 2: Creating a New Plugin</a></li>
<ol class="toc">
<li class="toc"><a href="#Plugin_Files">Plugin Files</a></li>
<ol class="toc">
<li class="toc"><a href="#pluginName.php">pluginName.php</a></li>
<li class="toc"><a href="#Importing_Additional_Files_into_a_Plugin">Importing Additional Files into a Plugin</a></li>
</ol>
</ol>
<li class="toc"><a href="#Yes.2FNo_Questions">Step 3: Yes/No Questions</a></li>
<ol class="toc">
<li class="toc"><a href="#System_Logo">System Logo</a></li>
<li class="toc"><a href="#Example_Page">Example Page</a></li>
<ol class="toc">
<li class="toc"><a href="#Embedding_in_an_.3Ciframe.3E">Embedding in an &lt;iframe&gt;</a></li>
</ol>
<li class="toc"><a href="#New_Options_in_the_Cases_Sidebar">New Options in the Cases Sidebar</a></li>
<li class="toc"><a href="#New_Role_and_Permission"> New Role and Permission</a></li>
<ol class="toc">
<li class="toc"><a href="#Creating_the_New_Role_and_Permission">Creating the New Role and Permission</a></li>
</ol>
<li class="toc"><a href="#Redirect_after_Login">Redirect After Login</a></li>
<li class="toc"><a href="#External_Step">External Step</a></li>
<ol class="toc">
<li class="toc"><a href="#Adding_an_External_Step_to_a_Process">Adding an External Step to a Process</a></li>
<li class="toc"><a href="#Editing_External_Steps">Editing External Steps</a></li>
</ol>
<li class="toc"><a href="#Dashlet_for_Dashboard">Dashlet for the Dashboard</a></li>
<li class="toc"><a href="#PMFunction_Class">PMFunction Class</a></li>
<ol class="toc">
<li class="toc"><a href="#PMPlugin_Class_Methods">PMPlugin Class Methods</a></li>
<li class="toc"><a href="#The_pluginNameClass_class">The pluginNameClass Class</a></li>
<li class="toc"><a href="#Custom_pmFunctions">Custom pmFunctions</a></li>
</ol>
</ol>
<li class="toc"><a href="#Linking_the_Plugin_Files_into_ProcessMaker">Step 4: Linking the Plugin Files into ProcessMaker</a></li>
<li class="toc"><a href="#Activate_the_New_Plugin">Step 5: Activate the New Plugin</a></li>
<li class="toc"><a href="#Altering_the_Database_Structure">Altering the Database Structure</a></li>
<ol class="toc">
<li class="toc"><a href="#Editing_the_Propel_XML_schema_file">Editing the Propel XML Schema File</a></li>
<li class="toc"><a href="#Creating_Classes_with_gulliver_propel-build-model">Creating Classes with gulliver propel-build-model</a></li>
<li class="toc"><a href="#Creating_SQL_files_with_gulliver_propel-build-sql">Creating SQL Files with gulliver propel-build-sql</a></li>
<li class="toc"><a href="#Applying_changes_with_gulliver_propel-build-crud">Applying Changes With gulliver propel-build-crud</a></li>
</ol>
<li class="toc"><a href="#Creating_Exportable_Plugins">Step 6: Creating Exportable Plugins</a></li>
<ol class="toc">
<li class="toc"><a href="#Using_the_gulliver_pack-plugin_script">Using the <b>gulliver pack-plugin</b> Script</a></li>
<li class="toc"><a href="#Importing_a_Plugin">Importing a Plugin</a></li>
</ol>
<li class="toc"><a href="#Creating_Custom_Pages">Creating Custom Pages</a></li>
<ol class="toc">
<li class="toc"><a href="#Custom_pages_with_HTML_.2B_Ext_JS">Custom Pages with HTML + Ext JS</a></li>
<ol class="toc">
<li class="toc"><a href="#PHP_Page_Setup">PHP Page Setup</a></li>
</ol>
</ol>
<li class="toc"><a href="#Creating_a_cron_using_ProcessMaker_classes">Creating a cron Using ProcessMaker Classes</a></li>
<li class="toc"><a href="#Extending_the_ProcessMaker_REST_API">Extending the ProcessMaker REST API</a></li>
<ol class="toc">
<li class="toc"><a href="#Consumings_an_API_Endpoint">Consuming an API Endpoint</a></li>
</ol>
</div></div>

<h2><span id="Overview">Overview</span></h2>
<p>Plugins are used to give additional functionality to ProcessMaker and/or customize its interface and databases. Version 3.0.1.8 and later offers a new plugin creation script, which is based upon the new 3.0 interface using the <a href="http://www.sencha.com/products/extjs/" rel="nofollow">Ext JS</a> framework.</p>
<p>Although the ProcessMaker core is open source, it is not recommended to edit it, because each version upgrade will overwrite any changes in the code. Instead, it is recommended to develop a plugin to modify the source code.</p>

<p>Plugins are developed using the <code>gulliver new-plugin</code> command on a Linux/UNIX server. Plugins cannot be developed on Windows servers, because symbolic links are needed. After the plugin has been created, it can be exported to other installations of ProcessMaker, including Windows servers.</p>

<h2><span id="Restriction">Restriction</span></h2>
<p>Files within the custom plugins must have the <code>UTF-8</code> encoding. The use of <code>UTF-8-BOM</code> or other encodings may cause issues with other ProcessMaker plugins.</p>

<h2><span id="Setting_up_the_gulliver_script">Step 1: Setting Up the gulliver Script</span></h2>

<p>ProcessMaker is programmed using a custom PHP development framework named Gulliver. To create a plugin in Gulliver, symbolic links have to first be established in the server where ProcessMaker is installed.</p>

<p>The <strong><tt>gulliver</tt></strong> script needs to be executed inside the <strong><tt>workflow/engine</tt></strong> directory. Log in to the ProcessMaker server as the root user or a user with administrative powers. Then, make a symbolic link from<br>

<div style="margin-left: 25px;"><b><tt><a href="File_Locations.html#Installation_Directory" title="File Locations">&lt;install-directory&gt;</a>/gulliver/bin/gulliver</tt></b>  to  <tt><b><a href="File_Locations.html#Installation_Directory" title="File Locations">&lt;install-directory&gt;</a>/workflow/engine/gulliver</b></tt></div></p>

<p>For example:<br>
<codeblock style="align-content: left">ln -s /opt/processmaker/gulliver/bin/gulliver /opt/processmaker/workflow/engine/gulliver</codeblock>
</p>

<p>Plugins <b>cannot</b> be created on Windows servers, because Windows does not support symbolic links; however, there is an experimental script for Windows servers available at:</p>

<div style="margin-left: 25px;"><b><tt><a href="File_Locations.html#Installation_Directory" title="File Locations">&lt;install-directory&gt;</a>/processmaker/workflow/engine/gulliver-win.bat</tt></b></div>

<h3><span id="Using_the_gulliver_script">Options of the gulliver Script</span></h3>
<p>As the root user (or a user with administrative permissions), go to the <strong><tt>&lt;INSTALL-DIRECTORY&gt;/processmaker/workflow/engine/</tt></strong> directory. Then, execute the <code>php gulliver</code> command to see a list of the available options.</p>
<p>For example:</p>

<codeblock># <b>cd /opt/processmaker/workflow/engine</b>
# <b>php gulliver</b>
available pake tasks:
  <font color=green>create-poedit-file</font>        > create poedit file for system labels
   args: [&lt;lang-id&gt; [&lt;country-id&gt; [verbose]]] 
  <font color=green>generate-unit-test-class</font>  > generate a unit test file for an existing class
   args: &lt;class-filename&gt;
  <font color=green>new-plugin</font>                > build new plugin 
   args: &lt;name&gt;
  <font color=green>pack-plugin</font>               > pack plugin in .tar file 
   args: &lt;plugin&gt;
  <font color=green>propel-build-crud</font>         > generate basic CRUD files for an existing class
   args: &lt;class-name&gt; &lt;table-name&gt; &lt;plugin-name&gt;
  <font color=green>propel-build-db</font>           > create database for current model
  <font color=green>propel-build-model</font>        > create classes for current model
  <font color=green>propel-build-schema</font>       > create schema.xml from existing database
  <font color=green>propel-build-sql</font>          > create sql for current model
  <font color=green>propel-dump-data</font>          > dump data to fixtures directory
  <font color=green>propel-insert-sql</font>         > insert sql for current model
  <font color=green>test-all</font>                  > launch all tests
  <font color=green>test-functional</font>           > launch functional tests for an application
  <font color=green>test-unit</font>                 > launch unit tests
  <font color=green>update-plugin-attributes</font>  > Update the plugin attributes in all workspaces
   args: &lt;plugin-name&gt;
  <font color=green>version</font>                   > gulliver version
</codeblock>

<p>The gulliver script can only be executed when the current working directory is <tt>/processmaker/workflow/engine/</tt>, so don't try to execute it without first changing to that directory.</p>

<h2><span id="Creating_a_new_Plugin">Step 2: Creating a New Plugin</span></h2>
<p>Before creating a plugin, read the following considerations about the name:</p>

<p>
<ul>
<li>Plugin names must include only ASCII characters that can easily be used in a web address.</li>
<li>Do not use characters like "ë", "Ñ", "?", "%", or " " (space).</li>
<li>Do not use hyphens; otherwise, ProcessMaker will not be able to import the plugin.</li>
<li>"<b>Plugin</b>" is a reserved word in ProcessMaker, so do not include it in the name of the new plugin.</li>
<li>Plugin names are case sensitive.</li>
<li>Plugin names must start with letters. Do not start with numbers.</li>
</ul>
</p>

<p>To create a new plugin, use the command:</p>

<codeblock>php gulliver new-plugin <font color="blue">pluginName</font>
</codeblock>

<p>For example, create a plugin named "deleteCases":</p>

<codeblock># <b>cd /opt/processmaker/workflow/engine</b>
# <b>php gulliver new-plugin deleteCases</b>
using DSN Connection mysql://wf_workflow2033:c3s07f98zgyx@localhost:3306/wf_workflow2036?encoding=utf8 
creating plugin directory <font color=green>/opt/plugins/deleteCases</font>
saved <font color=green>388</font> bytes in file <font color=green>deleteCases/setup.xml</font> [<font color=green>pluginSetup.xml</font>]
saved <font color=green>183</font> bytes in file <font color=green>deleteCases/messageShow.xml</font> [<font color=green>pluginMessageShow.xml</font>] 
saved <font color=green>3056</font> bytes in file <font color=green>deleteCases/config/schema.xml</font> [<font color=green>pluginSchema.xml</font>]
saved <font color=green>2067</font> bytes in file <font color=green>deleteCases/config/propel.ini</font> [<font color=green>pluginPropel.ini</font>]
saved <font color=green>2061</font> bytes in file <font color=green>deleteCases/config/propel.mysql.ini</font> [<font color=green>pluginPropel.mysql.ini</font>]
</codeblock>
<p>The new-plugin script will ask a series of <a href="#Yes.2FNo_Questions">Yes/No questions</a>:
<ul> 
<li><code>Change system logo [y/N]:</code> See <a href="#System_Logo">System Logo</a> below.</li>
<li><code>Create an example Page [y/N]:</code> See <a href="#Example_Page">Example Page</a> below.</li>
<li><code>Create new option in the menu of cases [y/N]:</code> See <a href="#New_Options_in_the_Cases_Sidebar">New Options in the Cases Sidebar</a> below.</li>
<li><code>Create the Role 'PROCESSMAKER_<font color="blue">PLUGIN-NAME</font>' and 
       the Permission 'PM_<font color="blue">PLUGIN-NAME</font>' [y/N]:</code> See <a href="#New_Role_and_Permission">New Role and Permission</a> below.</li>
<li><code>Create external step for Processmaker [y/N]:</code> See <a href="#External_Step">External Step</a> below.</li>
<li><code>Create an element for the Processmaker Dashboards [y/N]:</code> See <a href="#Dashlet_for_Dashboard">Dashlet for the Dashboard</a> below.</li>
<li><code>Create a PmFunction Class for extending Processmaker [y/N]:</code> See <a href="#PMFunction_Class">PMFunction Class</a> below.</li>
</ul>

<h3><span id="Plugin_Files">Plugin Files</span></h3>
<p>The new plugin will be created in a new <strong><tt>plugins/<i>pluginName</i></tt></strong> directory located in the parent directory where ProcessMaker is installed. The new plugin directory will have a minimum of 4 subdirectories (classes, config, data and public_html), 2 php files, 3 xml files and 2 ini files:</p>

<codeblock><font color=blue><i>parent-directory</i></font>/
+-- plugins/
    +-- <font color=blue><i>pluginName</i></font>/
        +-- <font color=blue><i>pluginName</i></font>.php
        +-- <font color=blue><i>pluginName</i></font>/
            +-- class.<font color=blue><i>pluginName</i></font>.php
            +-- classes/
            +-- config/
            ¦   +-- propel.ini
            ¦   +-- propel.mysql.ini
            ¦   +-- schema.xml
            +-- data/
            +-- messageShow.xml
            +-- public_html/
            +-- setup.xml
</codeblock>

<p>These files and directories have the following purpose:</p>
<p>
<table>
<tbody>
<tr>
<td><tt><b><i>pluginName</i></b>.php</tt></td>
<td>Defines a PHP class for the plugin (which inherits from the <code>PmPlugin</code> class) to register the new plugin and define its methods to setup, install, activate, deactivate and uninstall the plugin. </td>
</tr>
<tr>
<td><tt><b><i>pluginName</i></b></tt></td>
<td>Directory to hold all the rest of the plugin's directories and files.</td>
</tr>
<tr>
  <td><tt><i>pluginName</i>/class.<i><strong>pluginName</strong></i>.php</tt></td>
  <td>Defines another class for the plugin (which also inherits from the <code>PmPlugin</code> class), where custom methods and member variables for the plugin can be added.</td>
</tr>
<tr>
  <td><tt><i><strong>pluginName</strong></i>/classes</tt></td><td>A directory that holds additional class definition files for the plugin. For more information, see <a href="#Plugin_Classes">Plugin Clases</a>.</td>
</tr>
<tr>
  <td><tt><i><strong>pluginName</strong></i>/config</tt></td>
  <td>A directory containing 3 files that defines the database tables that hold information for the new plugin.</td>
</tr>
<tr>
  <td><tt><i><strong>pluginName</strong></i>/config/propel.ini</tt></td>
  <td>A file that initializes the configuration variables for <a href="http://www.propelorm.org/">Propel</a>, which is a library that maps PHP objects to database tables and fields.</td>
</tr>
<tr>
  <td style="white-space: nowrap; vertical-align: top;"><tt><i><strong>pluginName</strong></i>/config/propel.mysql.ini</tt></td>
  <td>A file that initializes the configuration variables for the MySQL database used by Propel.</td>
</tr>
<tr>
  <td><tt><i><strong>pluginName</strong></i>/config/schema.xml</tt></td>
  <td>An XML file that defines the database table(s) that store data needed by the plugin.</td>
</tr>
<tr>
  <td><tt><i><strong>pluginName</strong></i>/data</tt></td>
  <td>A directory that holds any data to be inserted into the database.</td>
</tr>
<tr>
  <td><tt><i><strong>pluginName</strong></i>/messageShow.xml</tt></td>
  <td>A sample XML file that displays error messages.</td>
</tr>
<tr>
  <td><tt><i><strong>pluginName</strong></i>/public_html</tt></td>
  <td>A directory that holds any images, style sheets, JavaScript, and other files that need to be publicly accessible.</td>
</tr>
<tr>
  <td><tt><i><strong>pluginName</strong></i>/setup.xml</tt></td>
  <td>An sample XML file used to configure the plugin. See <a href="#Plugin_Configuration_Page">Plugin Configuration Page</a></td>
</tr>
</tbody>
</table>
</p>

<p>For example, if the "deleteCases" plugin is created in an installation of ProcessMaker at <tt>/opt/processmaker/</tt>, then the following directories and files will be automatically created:</p>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">opt/<br />
+-- plugins/<br />
&nbsp; &nbsp; +-- deleteCases/<br />
&nbsp; &nbsp; &nbsp; &nbsp; +-- deleteCases.php<br />
&nbsp; &nbsp; &nbsp; &nbsp; +-- deleteCases/<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +-- class.deleteCases.php<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +-- classes/<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +-- config/<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ¦ &nbsp; +-- propel.ini<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ¦ &nbsp; +-- propel.mysql.ini<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ¦ &nbsp; +-- schema.xml<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +-- data/<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +-- messageShow.xml<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +-- public_html/<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +-- setup.xml</div></div>

<h4><span id="pluginName.php">pluginName.php</span></h4>
<p>Inside this file the class of the plugin can be found where the user can modify the basic elements or information about the plugin.</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> Lili1Plugin<span style="color: #009900;">&#40;</span><span style="color: #000088;">$sNamespace</span><span style="color: #339933;">,</span> <span style="color: #000088;">$sFilename</span> <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span><br />
&nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$res</span> <span style="color: #339933;">=</span> parent<span style="color: #339933;">::</span><span style="color: #004000;">PMPlugin</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$sNamespace</span><span style="color: #339933;">,</span> <span style="color: #000088;">$sFilename</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">sFriendlyName</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;Example Plugin&quot;</span><span style="color: #339933;">;</span> &nbsp; <span style="color: #666666; font-style: italic;">//Change your plugin's name</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">sDescription</span> &nbsp;<span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;Autogenerated plugin for class Example&quot;</span><span style="color: #339933;">;</span> &nbsp; <span style="color: #666666; font-style: italic;">//Change your plugin's description</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">sPluginFolder</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;Example&quot;</span><span style="color: #339933;">;</span> &nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//plugin's folder--strongly recommended to NOT change this.</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">sSetupPage</span> &nbsp; &nbsp;<span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">;</span> &nbsp; <span style="color: #666666; font-style: italic;">//xml configuration page.</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">iVersion</span> &nbsp; &nbsp; &nbsp;<span style="color: #339933;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span> &nbsp; <span style="color: #666666; font-style: italic;">//version of the plugin, which can be an integer, float or string</span><br />
&nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//$this-&gt;iPMVersion &nbsp; = &quot;3.3.10&quot;; &nbsp; //ProcessMaker version for which this plugin was created</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">aWorkspaces</span> &nbsp; <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #339933;">;</span> &nbsp; <span style="color: #666666; font-style: italic;">//set to null to allow plugin to be used in all workspaces</span><br />
&nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//To limit the plugin to certain workspaces, list the workspace names separated by semicolons:</span><br />
&nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//$this-&gt;aWorkspaces = array(&quot;workflow;clients;accounting&quot;);</span><br />
<br />
&nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//Modify the dashboard information in case you've created it </span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">dashletsUids</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;DAS_UID&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;28865334652d40b2e9caa98030647555&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;DAS_CLASS&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;dashletLili1&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;DAS_TITLE&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Dashlet Lili1&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;DAS_DESCRIPTION&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Dashlet Lili1&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;DAS_VERSION&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;1.0&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;DAS_CREATE_DATE&quot;</span> <span style="color: #339933;">=&gt;</span> <a href="http://php.net/date"><span style="color: #990000;">date</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Y-m-d&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;DAS_UPDATE_DATE&quot;</span> <span style="color: #339933;">=&gt;</span> <a href="http://php.net/date"><span style="color: #990000;">date</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Y-m-d&quot;</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
&nbsp; <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> setup<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><br />
&nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">setCompanyLogo</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;/plugin/Lili1/Lili1.png&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//change ProcessMaker logo</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">registerMenu</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;processmaker&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;menuLili1.php&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//file where you can modify the menu</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">registerMenu</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;cases&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;menuCasesLili1.php&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//file where you can modify the cases menu</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">registerStep</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;88110927552d40b2e206a16023508301&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;stepLili1Application&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;Lili1 external step&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//external step file and name</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">registerPmFunction</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">redirectLogin</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;PROCESSMAKER_LILI1&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;users/users_List&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">registerDashlets</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">registerCronFile</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Plugin_File_Name&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">// plugins can register files to be executed when the cron is enabled. * See note below</span><br />
&nbsp; <span style="color: #009900;">&#125;</span></div></div>

<div style="margin-left:25px">
<p><font color="red"><b>Warning:</b></font> <font color=dimgrey> Any code added to the <code>setup()</code> method in the <tt><i>pluginName</i>.php</tt> file will be executed every time ProcessMaker loads a web page, so do not add code that takes too long to execute or may cause errors.</font></p>
</div>

<div style="margin-left:25px">
<p><strong><font color="green">Note 1:</font></strong> <font color=dimgrey>To use the <a href="Executing_cron.html">cron.php</a> script to execute the plugin, add the following line to the code:</font>

<codeblock>this->registerCronFile("<font color="blue"><i>plugin-filename</i></font>");
</codeblock>

<p><font color=dimgrey><i>registerCronFile()</i> allows the plugin to be executed by <b><tt>cron.php</b></tt> if the plugin is enabled. Remember that an error in the plugin code will cause the <b><tt>cron.php</tt></b> script to stop, so it is recommended to test the execution of <b><tt>cron.php</tt></b> with the custom plugin code before deploying it.</font>
</div>

<div style="margin-left:25px">
<p><font color="green"><b>Note 2:</b></font> <font color=dimgrey>The custom XML configuration page <code>$this->sSetupPage = "setup";</code> can cause problems importing in some installations of ProcessMaker, so it is recommended to set it ito an empty string:
<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">$this-&gt;sSetupPage &nbsp; &nbsp;= &quot;&quot;; </div></div>
</font></p>
</div>

<h4><span id="Importing_Additional_Files_into_a_Plugin">Importing Additional Files into a Plugin</span></h4>
<p>The recommended way to import an additional file into a plugin is to use the defined constant <b>PATH_PLUGINS</b>, which is set to the path of your <font color="blue"><INSTALL-DIRECTORY></font>/<b>workflow</b>/<b>engine</b>/<b>plugins</b>/ directory. If wishing the additional file to be automatically imported when the plugin is loaded, then add it to the <code>setup()</code> function.</p> 

<p>For example, an additional PHP code file is placed in the location <b><tt>/opt/plugins/deleteCases/deleteCases/classes/validation.php</tt></b>. To import this code, when the plugin is loaded, add the following line to the <code>setup()</code> function:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> setup<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><br />
<span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">require_once</span><span style="color: #009900;">&#40;</span>PATH_PLUGINS <span style="color: #339933;">.</span> <span style="color: #0000ff;">'deleteCases/classes/validation.php'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>Files which are placed in the plugin's <b><tt>public_html</tt></b> directory are publicly accessible under the URL:<br>
&nbsp; &nbsp;<code>http://<i><font color=salmon>domainOrIP</font></i>/plugin/<font color=salmon>pluginName</font></i>/<i><font color=salmon>filename.ext</font></i></code></p>

<p>For example, the file <b><tt>/opt/plugins/deleteCases/deleteCases/public_html/icon.png</tt></b> which is included in a plugin and then imported into a ProcessMaker server located at <b><tt>https://pm.example.com</tt></b> can be accessed at the URL:<br>
&nbsp; &nbsp;<code>http://pm.example.com/plugin/deleteCases/icon.png</code></p>
<p>It is recommended to use a relative URL, that doesn't include the domain name or IP number, so that the file can be accessed in any server that imports the plugin. For example, the same file could be displayed in an HTML file with this code:</p>
<div class="geshifilter"><div class="html5 geshifilter-html5" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;&lt;<a href="http://december.com/html/4/element/img.html"><span style="color: #000000; font-weight: bold;">img</span></a> <span style="color: #000066;">src</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;/plugin/deleteCases/icon.png&quot;</span>&gt;&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;</span></div></div>

<p>The file can also be accessed using its path on the ProcessMaker server with the <code>PATH_PLUGINS</code> constant:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$filePath</span> <span style="color: #339933;">=</span> PATH_PLUGINS <span style="color: #339933;">.</span> <span style="color: #0000ff;">'deleteCases/public_html/icon.png'</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$fp</span> <span style="color: #339933;">=</span> <a href="http://php.net/fopen"><span style="color: #990000;">fopen</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$filePath</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'rb'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$image</span> <span style="color: #339933;">=</span> <a href="http://php.net/fread"><span style="color: #990000;">fread</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$fp</span><span style="color: #339933;">,</span> <a href="http://php.net/filesize"><span style="color: #990000;">filesize</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$filePath</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/fclose"><span style="color: #990000;">fclose</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$fp</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>


<h2><span id="Yes.2FNo_Questions">Step 3: Yes/No Questions</span></h2>
<p>The gulliver new-plugin script will ask a series of yes/no questions about the new plugin. If the response is "y" (yes), then additional files will be created in the new plugin directory and additional code will be added to the <tt><font color="blue">pluginName</font>.php</tt> file. To better understand the plugin methods used in this file, see the code in:</p>
<div style="margin-left: 25px;"><b><tt><a href="File_Locations.html#Installation_Directory" title="File Locations">&lt;install-directory&gt;</a>/processmaker/workflow/engine/classes/class.pluginRegistry.php</tt></b></div>

<h3><span id="System_Logo">System Logo</span></h3>
<p>To display a new logo (the image in the upper, left hand corner of the interface) in ProcessMaker, then enter "y" for the following option:</p>

<codeblock>Change system logo [y/N]:
</codeblock>

<p>Entering "<b>y</b>" will generate the following file:</p>

<codeblock>saved <font color=green>750</font> bytes in file <font color=green>public_html/deleteCases.png</font> [<font color=green>deleteCases.png</font>]
</codeblock>

<p>A PNG image file will be generated in the plugin's <strong><tt>public_html</tt></strong> directory, such as:</p>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">/opt/plugins/deleteCases/deleteCases/public_html/deleteCases.png</div></div>

<p>The image will appear as:</p>
<p><img alt="" src="../sites/default/files/PluginImage.png"></p>
<p>The following code will also be added to the <b><tt>/plugins/<font color="blue"><i>pluginName</i></font>/<font color="blue"><i>pluginName</i></font>.php</tt></b> file:</p>
<codeblock>
function setup() {
    $this->setCompanyLogo ('/plugin/<font color=salmon><i>pluginName</i></font>/<font color=salmon><i>pluginName</i></font>.png');
  }
</codeblock>

<p>To use a different image, simply place the image file in the <strong><tt>public_html</tt></strong> directory and change the path to reference that new image. For example, if using a logo located at <strong><tt>/opt/plugins/deleteCases/deleteCases/public_html/myCompanyLogo.png</tt></strong>, then change the path to:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">function</span> setup<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">setCompanyLogo</span> <span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'/plugin/deleteCases/myCompanyLogo.png'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span></div></div>
<div style="margin-left:25px;">
<font color=green><b>Note:</b></font> <font color=dimgrey>Additional image files can be added to the plugin's <b><tt>public_html</tt></b> directory. Image files in the plugin's <b><tt>public_html</tt></b> directory can be displayed with the HTML code in a email or Output Document template as <code>&lt;img src="http://<font color=salmon><i>domain-or-ip</i></font>/plugin/<font color=salmon><i>pluginName</i></font>/<font color=salmon><i>file.ext</i></font>"&gt;</code>. If displaying the image in a plugin file, it can be accessed more succinctly as <code>&lt;img src="/plugin/<font color=salmon><i>pluginName</i></font>/<font color=salmon><i>file.ext</i></font>"&gt;</code>. For example, the file <b><tt>/opt/plugins/deleteCases/deleteCases/public_html/employee-profile.png</tt></b> can be accessed as: <code>&lt;img src=</nowiki>"/plugin/deleteCases/employee-profile.png"&gt;</code></font>
</div>

<h3><span id="Example_Page">Example Page</span></h3>
<p>To allow the plugin to create a new top-level menu and display a new page in ProcessMaker, then enter "<b>y</b>" for the following option:</p>
<codeblock>Create an example Page [Y/n]:
</codeblock>

<p>Entering "<b>y</b>" will generate 5 sample files that can be used as a model for creating pages in ProcessMaker:</p>

<p>For example:</p>

<codeblock>saved <font color=green>147</font> bytes in file <font color=green>deleteCases/menudeleteCases.php</font> [<font color=green>pluginMenu</font>]
saved <font color=green>924</font> bytes in file <font color=green>deleteCases/deleteCasesApplication.php</font> [<font color=green>pluginApplication.php</font>]
saved <font color=green>45</font> bytes in file <font color=green>deleteCases/deleteCasesApplication.html</font> [<font color=green>pluginApplication.html</font>]
saved <font color=green>6512</font> bytes in file <font color=green>deleteCases/deleteCasesApplication.js</font> [<font color=green>pluginApplication.js</font>]
saved <font color=green>1516</font> bytes in file <font color=green>deleteCases/deleteCasesApplicationAjax.php</font> [<font color=green>pluginApplicationAjax.php</font>]
</codeblock>

<p>The <tt><i>pluginName</i>/menu<i>pluginName</i>.php</tt> file contains code that adds a new top-level menu to the ProcessMaker interface, which appears as <b><i>pluginName</i> - APPLICATION1</b> by default.</p>
<p><img src="../sites/default/files/1PM3_PluginDevelopment_EnablePlugin.png"></p>

<p>Take into consideration that only one top-level menu item can be created per plugin, so create multiple plugins for multiple top-level menus.</p>

<p>By default, clicking on this new menu item will direct the web browser to the address:</p>

<p>
<dl><dd><code>http://&#60;IP-ADDRESS&#62;:&#60;PORT&#62;/sys&#60;WORKSPACE>/&#60;LANG&#62;/&#60;SKIN&#62;/&#60;pluginName&#62;/&#60;pluginName&#62;Application</code></dd></dl>
</p>

<p>For example:</p>
<p>
<dl><dd><code>http://www.example.com/sysworkflow/en/classic/deleteCases/deleteCasesApplication</code></dd></dl>
</p>

<p>When the browser is redirected, a list of users will be displayed:</p>
<p><img src="../sites/default/files/2PM3_PluginDevelopment_ThePluginTab.png"></p>

<p>This page is generated by the following four files:</p>
<p>
<table><tbody>
<tr>
<td><b><u>File</u></b></td>
<td><b><u>Description</u></b></td>
</tr>
<tr><td><tt><strong><i>pluginName</i>/<i>pluginName</i>Application.html</strong></tt></td><td>HTML code to display on the page, which is none in this case.</td></tr><tr><td><tt><strong><i>pluginName</i>/<i>pluginName</i>Application.js</strong></tt></td><td>JavaScript code to execute, which in this case defines the table, its fields and its controls.</td></tr>
<tr>
  <td><tt><strong><i>pluginName</i>/<i>pluginName</i>Application.php</strong></tt></td>
  <td>PHP code to be executed on the server side to publish the page.</td>
</tr>
<tr>
  <td><tt><strong><i>pluginName</i>/<i>pluginName</i>ApplicationAjax.php</strong></tt></td><td>PHP code to complete any AJAX requests that come from the page.</td>
</tr>
</tbody>
</table>
</p>

<p>Data generally comes from a database query, but in this sample page, all the names in the list come from an array in the <strong><tt><i>pluginName</i>Application.js</tt></strong> file and the numbers are randomly generated.</p>

<p>Another new menu option will be added the top-level ProcessMaker menu, with code that is inserted in the <strong><tt>plugins/<i>pluginName</i>/<i>pluginName</i>.php</tt></strong> file.</p> 

<p>The <a href="../index.php/Internal_Functions_and_Classes.html#PMPlugin::registerMenu.28.29" title="Internal Functions and Classes">PMPlugin::registerMenu()</a> method is used to register the new menu option. The first parameter is the name of the menu where the option will be added at the end. 'processmaker' is the main ProcessMaker menu. The second parameter is the name of the file that defines the new menu option, which should be located in the <strong><tt>plugins/pluginName/pluginName/</tt></strong> directory.</p>

<p>For example:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">function</span> setup<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">registerMenu</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;processmaker&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;menudeleteCases.php&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span></div></div>

<p>The <strong><tt>menu<i>pluginName</i>.php</tt></strong> file (which in this example is <strong><tt>menudeleteCases.php</tt></strong>) will be created to define the new menu option. The following code adds the new menu to the ProcessMaker main menu with the <code>Menu::AddIDRawOption()</code> method:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span><br />
<span style="color: #000000; font-weight: bold;">global</span> <span style="color: #000088;">$G_TMP_MENU</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$G_TMP_MENU</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">AddIdRawOption</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;ID_DELETECASES_MNU_01&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;deleteCases/deleteCasesApplication&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;deleteCases - application1&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000000; font-weight: bold;">?&gt;</span></div></div>

<p><code>$G_TMP_MENU</code> is a global variable that is an instance of the <a href="../index.php/Internal_Functions_and_Classes.html#Menus" title="Internal Functions and Classes">Menu</a> class defined in <strong><tt>gulliver/system/class.menu.php</tt></strong>. The <a href="../index.php/Internal_Functions_and_Classes.html#Menu::AddIdRawOption.28.29" title="Internal Functions and Classes">Menu::AddIdRawOption()</a> method is used to add a new menu option to the <code>$G_TMP_MENU</code> global variable. The parameters of this method can be edited to define a different menu ID, execute a different file when the user clicks on the menu option, and/or change its text label.</p>

<p>For example, to make the menu option execute a custom code file located at <strong><tt>/opt/plugins/deleteCases/deleteCases/manageCases.php</tt></strong> and use the text label "Manage Cases" instead of "deleteCases - application1", change the code to:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">global</span> <span style="color: #000088;">$G_TMP_MENU</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$G_TMP_MENU</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">AddIdRawOption</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;ID_DELETECASES_MNU_01&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;deleteCases/manageCases&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;Manage Cases&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h4><span id="Embedding_in_an_.3Ciframe.3E">Embedding in an &lt;iframe&gt;</span></h4>
<p>By default, the sample page will be displayed inside the principal window of the web browser. If the sample page should be displayed inside an <a href="http://www.w3.org/TR/html4/present/frames.html#h-16.5">&lt;iframe&gt;</a> under the main ProcessMaker menu, then the plugin files need to be edited.</p>

<p>First, edit the <code>$G_TMP_MENU-&gt;AddIdRawOption()</code> function in the <strong><tt>menu<i>pluginName</i>.php</tt></strong> file so that it executes a different code file when the user clicks on the menu item.</p>

<p>For example, change <strong><tt>menudeleteCases.php</tt></strong> file from:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span><br />
<span style="color: #000000; font-weight: bold;">global</span> <span style="color: #000088;">$G_TMP_MENU</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$G_TMP_MENU</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">AddIdRawOption</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;ID_DELETECASES_MNU_01&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;deleteCases/deleteCasesApplication&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;deleteCases - application1&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000000; font-weight: bold;">?&gt;</span></div></div>
<p>To:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span><br />
<span style="color: #000000; font-weight: bold;">global</span> <span style="color: #000088;">$G_TMP_MENU</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$G_TMP_MENU</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">AddIdRawOption</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;ID_DELETECASES_MNU_01&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;deleteCases/main&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;deleteCases - application1&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000000; font-weight: bold;">?&gt;</span></div></div>

<p>Then, create a file named <strong><tt>main.php</tt></strong> in the same directory with the following content:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span><br />
<span style="color: #000088;">$G_MAIN_MENU</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #339933;">=</span> <span style="color: #0000ff;">'processmaker'</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$G_ID_MENU_SELECTED</span> &nbsp; &nbsp; <span style="color: #339933;">=</span> <span style="color: #0000ff;">'ID_DELETECASES_MNU_01'</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$G_PUBLISH</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> Publisher<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$G_PUBLISH</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">AddContent</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'view'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'deleteCases/mainLoad'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
G<span style="color: #339933;">::</span><span style="color: #004000;">RenderPage</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'publish'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000000; font-weight: bold;">?&gt;</span></div></div>
<p>Finally, create another file named <strong><tt>mainLoad.php</tt></strong> in the same directory, with the following content:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">&lt;</span>iframe src<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;../deleteCases/deleteCasesApplication&quot;</span> frameborder<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;0&quot;</span> width<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;100%&quot;</span> height<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;600&quot;</span><span style="color: #339933;">&gt;&lt;/</span>iframe<span style="color: #339933;">&gt;</span></div></div>

<p>Now, when the user clicks on the menu item, it will first load the main ProcessMaker menu, then create an <span class="geshifilter"><code class="text geshifilter-text">&lt;iframe&gt;</code></span> under the menu that displays the contents generated by the <strong><tt>deleteCases/deleteCasesApplication*</tt></strong> files.</p>

<h3><span id="New_Options_in_the_Cases_Sidebar">New Options in the Cases Sidebar</span></h3>
<p>To add several new options to the cases sidebar under the <strong>Home</strong> menu, enter "<b>y</b>" at the following question:</p>

<codeblock>Create new option in the menu of cases [Y/n]:
</codeblock>

<p>Entering "<b>y</b>" will cause the following 11 files to be created:</p>

<codeblock>saved <font color=green>2412</font> bytes in file <font color=green>deleteCases/menudeleteCases.php</font> [<font color=green>pluginMenuCases</font>]
saved <font color=green>948</font> bytes in file <font color=green>deleteCases/deleteCasesApplication.php</font> [<font color=green>pluginApplication.php</font>]
saved <font color=green>45</font> bytes in file <font color=green>deleteCases/deleteCasesApplication.html</font> [<font color=green>pluginApplication.html</font>]
saved <font color=green>6530</font> bytes in file <font color=green>deleteCases/deleteCasesApplication.js</font> [<font color=green>pluginApplication.js</font>]
saved <font color=green>1516</font> bytes in file <font color=green>deleteCases/deleteCasesApplicationAjax.php</font> [<font color=green>pluginApplicationAjax.php</font>]
saved <font color=green>557</font> bytes in file <font color=green>deleteCases/deleteCasesApplication2.php</font> [<font color=green>pluginApplication2.php</font>]
saved <font color=green>45</font> bytes in file <font color=green>deleteCases/deleteCasesApplication2.html</font> [<font color=green>pluginApplication2.html</font>]
saved <font color=green>7607</font> bytes in file <font color=green>deleteCases/deleteCasesApplication2.js</font> [<font color=green>pluginApplication2.js</font>]
saved <font color=green>557</font> bytes in file <font color=green>deleteCases/deleteCasesApplication3.php</font> [<font color=green>pluginApplication3.php</font>]
saved <font color=green>45</font> bytes in file <font color=green>deleteCases/deleteCasesApplication3.html</font> [<font color=green>pluginApplication3.html</font>]
saved <font color=green>573</font> bytes in file <font color=green>deleteCases/deleteCasesApplication3.js</font> [<font color=green>pluginApplication3.js</font>]
</codeblock>

<p>The file <tt><b><font color=salmon><i>pluginName</i></font>/menu<font color=salmon><i>pluginName</i></font>.php</b></tt> is created to define 3 new options to be added to the cases sidebar. In addition, code is inserted into <tt><b><font color=salmon><i>pluginName</i></font>/<font color=salmon><i>pluginName</i></font>.php</b></tt> to register a new option in the cases sidebar with the <a href="../index.php/ProcessMaker_Functions.html#PMPlugin::registerMenu.28.29" title="ProcessMaker Functions">PMPlugin::registerMenu()</a> method. For example:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">&nbsp;<span style="color: #000000; font-weight: bold;">function</span> setup<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">registerMenu</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;cases&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;menudeleteCases.php&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span></div></div>

<p>A new option named "deleteCases application1" has been added above the inbox in the sidebar of the Home panel. When clicked, it displays the same list of users as the <a href="#Example_Page">Example Page</a>, but the page will be embedded in the <code>casesSubFrame</code> frame.</p>

<p><img src="../sites/default/files/3PM3_PluginDevelopment_NewOptionInCases.png"></p>

<p><span>A new header has also been added to the bottom of the sidebar named "deleteCases application2". Under that header is an item named "deleteCases application2", which displays the following page when clicked:</span></p>

<p><img src="../sites/default/files/4PM3_PluginDevelopment_deleteCasesApplication2.png"></p>

<p>This page is generated with the following files:</p>
<p>
<ul>
  <li><strong><tt>deleteCases/deleteCasesApplication2.php</tt></strong></li><li><strong><tt>deleteCases/deleteCasesApplication2.html</tt></strong></li><li><strong><tt>deleteCases/deleteCasesApplication2.js</tt></strong></li>
</ul>
</p>

<p>Another header was also added to the sidebar named "deleteCases application3". Clicking on it displays a panel with the text "Content 3":</p>
<p><img src="../sites/default/files/5PM3_PluginDevelopment_deleteCasesApplication3.png"></p>
<p>This page is created with the files:</p>
<ul><li><strong><tt>deleteCases/deleteCasesApplication3.php</tt></strong></li><li><strong><tt>deleteCases/deleteCasesApplication3.html</tt></strong></li><li><strong><tt>deleteCases/deleteCasesApplication3.js</tt></strong></li></ul>

<h3><span id="New_Role_and_Permission"> New Role and Permission</span></h3>
<p>To use ProcessMaker's role based access control (RBAC) so only users with the designated permission in their <a href="../3.1/Roles.html" title="3.1/Roles">role</a> will be able to access the plugin and its functionality, then enter "<b>y</b>" for the following option:</p>

<codeblock>Create the Role 'PROCESSMAKER_DELETECASES' and the Permission 'PM_DELETECASES' [y/N]:
</codeblock>

<p>Entering "<b>y</b>" will add the following code to the <strong><tt><i>pluginName</i>.php</tt></strong> file to generate a new role and permission:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">function</span> install<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$RBAC</span> <span style="color: #339933;">=</span> RBAC<span style="color: #339933;">::</span><span style="color: #004000;">getSingleton</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$RBAC</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">initRBAC</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$roleData</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$roleData</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'ROL_UID'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> G<span style="color: #339933;">::</span><span style="color: #004000;">GenerateUniqueId</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$roleData</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'ROL_PARENT'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$roleData</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'ROL_SYSTEM'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'00000000000000000000000000000002'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$roleData</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'ROL_CODE'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'PROCESSMAKER_pluginName'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$roleData</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'ROL_CREATE_DATE'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <a href="http://php.net/date"><span style="color: #990000;">date</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Y-m-d H:i:s'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$roleData</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'ROL_UPDATE_DATE'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <a href="http://php.net/date"><span style="color: #990000;">date</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Y-m-d H:i:s'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$roleData</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'ROL_STATUS'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'1'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$RBAC</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">createRole</span> <span style="color: #009900;">&#40;</span> <span style="color: #000088;">$roleData</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$RBAC</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">createPermision</span> <span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'PM_pluginName'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span></div></div>
<p>Where:</p>
<p>
<ul>
  <li><code>$roleData['ROL_UID']</code><strong>:</strong> The unique ID of the new role.</li>

  <li><code>$roleData['ROL_PARENT']</code><strong>:</strong> It's outdated and should always be set to <code>''</code> (an empty string).</li>

  <li><code>$roleData['ROL_SYSTEM']</code><strong>:</strong> It should always be set to <code>'00000000000000000000000000000002'</code>, which is the ID of the ProcessMaker system.</li>
  <li><code>$roleData['ROL_CODE']</code> The name of the new role, which is set to <font color="blue"><code>PROCESSMAKER_<i>pluginName</i></code></font> in upper case by default. The name can be changed, just make sure that it doesn't conflict with the names of any existing roles.</li>

  <li><code>$roleData['ROL_CREATE_DATE']</code><strong>:</strong> The date and time in the format <code>"YYYY-MM-DD HH:MM:SS"</code> when the plugin was created.</li>

  <li><code>$roleData['ROL_UPDATE_DATE']</code><strong>:</strong> The date and time in the format <code>"YYYY-MM-DD HH:MM:SS"</code> when the plugin was last updated.</li>

  <li><code>$roleData['ROL_STATUS']</code><strong>:</strong> Set to <code>'1'</code> to activate the new role and assign it to users. Otherwise, set to <code>'0'</code> if the new role shouldn't be assigned to users.</li>

  <li><code>$RBAC-&gt;createPermision ('PM_<i>pluginName'</i> )</code><strong>:</strong> Creates the name of the new permission, which is set to <font color="blue"><code>PM_<i>pluginName</i></code></font> in upper case by default. It can be changed as long as it doesn't conflict with the names of any existing permissions.</li></ul>
</p>

<h4><span id="Creating_the_New_Role_and_Permission">Creating the New Role and Permission</span></h4>
<p>The code in the <code>install()</code> function will be executed when the plugin is imported into ProcessMaker. Therefore, the new role and permission will <i>only</i> be created in ProcessMaker when the new plugin is imported.</p>

<p>First, use the <a href="#Creating_Exportable_Plugins">gulliver pack-plugin</a> script to create an exportable <tt>.tar</tt> file for the plugin to be imported. Then, go to <strong>ADMIN &gt; Plugins &gt; Plugin Manager</strong>. Click on the <b>Import</b> button and select the plugin's <tt>.tar</tt> file to import it. Even if the plugin already appears in the list of available plugins, import the plugin again so it will execute the <code>install()</code> function and create the new role and permission. Finally, <a href="#Activate_the_New_Plugin">activate the new plugin</a>, and the new role and permission will be available in ProcessMaker.</p>

<h3><span id="Redirect_after_Login">Redirect After Login</span></h3>
<p>If a new role and permission was created in the previous step, another option to redirect users with that role to a specified page after logging into ProcessMaker will be shown. To redirect, enter "<b>y</b>" at this option:</p>

<codeblock>Create a Redirect Login for the Role 'PROCESSMAKER_<i><font color="blue">pluginName'</font></i> [y/N]:
</codeblock>
<p>Entering "<b>y</b>" will add code like the following to the <strong><tt><i>pluginName</i>.php</tt></strong> file:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">function</span> setup<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">redirectLogin</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'PROCESSMAKER_DELETECASES'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'users/users_List'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>By default, the plugin redirects to the user list, but this can be changed. For example, to redirect all users with the PROCESSMAKER_DELETECASES role to the <strong><tt>deleteCases/deleteCasesApplication.php</tt></strong> page on login use the following code:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">redirectLogin</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'PROCESSMAKER_DELETECASES'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'deleteCases/deleteCasesApplication'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="External_Step">External Step</span></h3>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">The External Step feature is not available for ProcessMaker Mobile as step: it will not open the case or create a case if the External Step is the first on the display list. This feature will be implemented in future versions.</font></p>

<p>To create a custom external step for tasks, similar to steps like Dynaforms, Input Documents and Output Documents, enter "<b>y</b>" at this option:</p>
<codeblock>Create external step for Processmaker[y/N]:
</codeblock>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> The external step will appear as an available step in all processes in the workspace.</font></p>

<p>Entering "<b>y</b>" will add a file like the following:</p>

<codeblock>saved <font color=green>166</font> bytes in file <font color=green>deleteCases/stepdeleteCases.php</font> [<font color=green>pluginStep</font>]
</codeblock>

<p>This file will need to be edited to add the code to handle the external step. Code will also be added to the <strong><tt><i>pluginName</i>.php</tt></strong> file, like the following:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">function</span> setup<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">registerStep</span><span style="color: #009900;">&#40;</span> <span style="color: #0000ff;">'2194269554e95dacc74c6d2077314289'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'stepdeleteCasesApplication'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'deleteCases external step'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>The first parameter of the <a href="../3.2/ProcessMaker_Functions.html#Plugins::registerStep.28.29" title="ProcessMaker Functions">registerStep()</a> method is the external step's unique ID number, which was automatically generated by ProcessMaker. The second parameter is the name of the file(s) (without the extension) that will be executed when running the step. The third parameter is the name of the external step that is displayed to the user in ProcessMaker. Feel free to edit the external step's name.</p>

<p>The following files will be added to the plugin:</p>
<p>
<ul>
<li><tt><i><strong>pluginName</strong></i>/step<i><strong>pluginName</strong></i>ApplicationAjax.php</tt>: Defines custom functions built by the user, which can be invoked from the <tt>step<i><strong>pluginName</strong></i>Application.php</tt> file.</li>

<li><tt><i><strong>pluginName</strong></i>/step<i><strong>pluginName</strong></i>Application.html</tt>: Defines the HTML code for the external step. By default, just defines an empty div with the id "{$form_id}".</li>

<li><tt><i><strong>pluginName</strong></i>/step<i><strong>pluginName</strong></i>Application.js</tt>: Gives the external step the functionality to hide or show fields using JavaScript code.</li>

<li><tt><i><strong>pluginName</strong></i>/step<i><strong>pluginName</strong></i>Application.php</tt>: Contains code to invoke the functions of the <tt>step<i><strong>pluginName</strong></i>ApplicationAjax.php</tt> file and to call functions of the ProcessMaker core.</li>
</ul>
</p>

<p>When a case is executed with an external step, these files will display the following table of system variables from the case:</p>

<p><img src="../sites/default/files/6PM3_PluginDevelopment_ExternalStep.png"></p>

<h4><span id="Adding_an_External_Step_to_a_Process">Adding an External Step to a Process</span></h4>

<p>After importing and activating a plugin with an external step, the external step can be assigned as a step in a task.</p>

<p>Go to the <strong>DESIGNER</strong> and open a process for editing. Then, right click on a task in the process and select <b>Steps</b> from the dropdown menu. Locate the External(s) option where the "deleteCases" external step will be found. The external step created by the plugin should appear in the list of available steps. Drag and drop the "deleteCases external step" from the Available Elements section to the Assigned Elements section as seen in the image below.</p>

<p><img src="../sites/default/files/7PM3_PluginDevelopment_AssignStep.png"></p>

<p>Once the external step is dropped into the Assigned Elements section it should now appear in the list of steps added to the task.</p>

<p><span><img src="../sites/default/files/8PM3_PluginDevelopment_StepedAssigned.png"></span></p>
<p>Now the external step will be executed at this task when a case is executed.</p>


<h4><span id="Editing_External_Steps">Editing External Steps</span></h4>

<p>The default external step files created by the <code><strong>gulliver new-plugin</strong></code> script can be edited to add custom content. It is important that the external step page contains links or buttons to go to the previous and next steps.</p>

<p>If using Ext JS to generate the page, the following JavaScript code can be used to create a previous step button in an Ext JS toolbar:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">new</span> Ext<span style="color: #339933;">.</span>Action<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;text<span style="color: #339933;">:</span> <span style="color: #0000ff;">&quot;&amp;nbsp;&lt; &quot;</span> <span style="color: #339933;">+</span> CONFIG<span style="color: #339933;">.</span>previousStepLabel <span style="color: #339933;">+</span> <span style="color: #0000ff;">&quot;&amp;nbsp;&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;handler<span style="color: #339933;">:</span> <span style="color: #000000; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; window<span style="color: #339933;">.</span>location<span style="color: #339933;">.</span>href <span style="color: #339933;">=</span> CONFIG<span style="color: #339933;">.</span>previousStep<span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span></div></div>
<p>Likewise, the following JavaScript code can be used to create a next step button in an Ext JS toolbar:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">new</span> Ext<span style="color: #339933;">.</span>Action<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;text<span style="color: #339933;">:</span> <span style="color: #0000ff;">&quot;&amp;nbsp;&quot;</span> <span style="color: #339933;">+</span> CONFIG<span style="color: #339933;">.</span>nextStepLabel <span style="color: #339933;">+</span> <span style="color: #0000ff;">&quot; &gt;&amp;nbsp;&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;handler<span style="color: #339933;">:</span> <span style="color: #000000; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; window<span style="color: #339933;">.</span>location<span style="color: #339933;">.</span>href <span style="color: #339933;">=</span> CONFIG<span style="color: #339933;">.</span>nextStep<span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span></div></div>
<p>In order for these links to have the proper URL and label, the <code>CONFIG</code> variable needs to be passed to the JavaScript file with the <a href="../index.php/Internal_Functions_and_Classes.html#HeadPublisher::Assign.28.29" title="Internal Functions and Classes">HeadPublisher::Assign()</a> method in the PHP file.</p>
<p>By default, the <code><strong>gulliver new-plugin</strong></code> script creates the <strong><tt>step<i><font color="blue">pluginName</font></i>Application.php</tt></strong> file to set the URLs and labels for the "Previous Step" and "Next Step" links:</p>
<p>For example, the <strong><tt>stepdeleteCasesApplication.php</tt></strong> file contains:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span><br />
try <span style="color: #009900;">&#123;</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">global</span> <span style="color: #000088;">$Fields</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #000088;">$oHeadPublisher</span> <span style="color: #339933;">=</span> <span style="color: #339933;">&amp;</span>headPublisher<span style="color: #339933;">::</span><span style="color: #004000;">getSingleton</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
&nbsp; <span style="color: #666666; font-style: italic;">//SYS_SYS &nbsp; &nbsp; //Workspace name</span><br />
&nbsp; <span style="color: #666666; font-style: italic;">//PROCESS &nbsp; &nbsp; //Process UID</span><br />
&nbsp; <span style="color: #666666; font-style: italic;">//APPLICATION //Case UID</span><br />
&nbsp; <span style="color: #666666; font-style: italic;">//INDEX //Number delegation</span><br />
&nbsp;<br />
&nbsp; <span style="color: #000088;">$config</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #000088;">$config</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;previousStep&quot;</span><span style="color: #009900;">&#93;</span> &nbsp; &nbsp; &nbsp;<span style="color: #339933;">=</span> <span style="color: #000088;">$Fields</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;APP_DATA&quot;</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;__DYNAFORM_OPTIONS&quot;</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;PREVIOUS_STEP&quot;</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #000088;">$config</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;previousStepLabel&quot;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$Fields</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;APP_DATA&quot;</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;__DYNAFORM_OPTIONS&quot;</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;PREVIOUS_STEP_LABEL&quot;</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #000088;">$config</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;nextStep&quot;</span><span style="color: #009900;">&#93;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #339933;">=</span> <span style="color: #000088;">$Fields</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;APP_DATA&quot;</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;__DYNAFORM_OPTIONS&quot;</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;NEXT_STEP&quot;</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #000088;">$config</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;nextStepLabel&quot;</span><span style="color: #009900;">&#93;</span> &nbsp; &nbsp; <span style="color: #339933;">=</span> <span style="color: #000088;">$Fields</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;APP_DATA&quot;</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;__DYNAFORM_OPTIONS&quot;</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;NEXT_STEP_LABEL&quot;</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
&nbsp; <span style="color: #000088;">$oHeadPublisher</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">addContent</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;extstep/stepextstepApplication&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//Adding a html file .html.</span><br />
&nbsp; <span style="color: #000088;">$oHeadPublisher</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">addExtJsScript</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;extstep/stepextstepApplication&quot;</span><span style="color: #339933;">,</span> <span style="color: #009900; font-weight: bold;">false</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//Adding a javascript file .js</span><br />
&nbsp; <span style="color: #000088;">$oHeadPublisher</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">assign</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;CONFIG&quot;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$config</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
&nbsp; G<span style="color: #339933;">::</span><span style="color: #004000;">RenderPage</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;publish&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;extJs&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <a href="http://php.net/exit"><span style="color: #990000;">exit</span></a><span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span> catch <span style="color: #009900;">&#40;</span>Exception <span style="color: #000088;">$e</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; <span style="color: #b1b100;">echo</span> <span style="color: #000088;">$e</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getMessage</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <a href="http://php.net/exit"><span style="color: #990000;">exit</span></a><span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #000000; font-weight: bold;">?&gt;</span></div></div>

<h3><span id="Dashlet_for_Dashboard">Dashlet for the Dashboard</span></h3>
<p>To create a custom dashlet that will be added to the <a href="Dashboards.html">Dashboard</a>, enter "<b>y</b>" at this option:</p>

<codeblock>Create an element for the Processmaker Dashboards [y/N]:</codeblock>

<p>Entering "<b>y</b>" will create two additional files in the plugin like the following:</p>

<codeblock>Create an element for the Processmaker Dashboards [y/N]:  <b>y</b>
saved <font color=green>3692</font> bytes in file <font color=green>deleteCases/classes/class.dashletdeleteCases.php</font> [<font color=green>pluginDashletClass.php</font>]
saved <font color=green>1788</font> bytes in file <font color=green>pluginDashlet.html</font> 
</codeblock>

<p>Inside the <b><tt>plugins/<font color=purple><i>pluginName</i></font>/<font color=purple><i>pluginName</i></font>.php</tt></b> file, the following lines will be added to the <code><font color=purple><i>pluginName</i></font>Plugin</code> class:
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">class</span> deleteCasesPlugin <span style="color: #000000; font-weight: bold;">extends</span> PMPlugin<br />
<span style="color: #009900;">&#123;</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">private</span> <span style="color: #000088;">$dashletsUids</span><span style="color: #339933;">;</span><br />
&nbsp; <br />
&nbsp; <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> deleteCasesPlugin<span style="color: #009900;">&#40;</span><span style="color: #000088;">$sNamespace</span><span style="color: #339933;">,</span> <span style="color: #000088;">$sFilename</span> <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span><br />
&nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">...</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">dashletsUids</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp; &nbsp; <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;DAS_UID&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;7381091625893a2c9a9eac8089244259&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;DAS_CLASS&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;dashletdeleteCases&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;DAS_TITLE&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Dashlet deleteCases&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;DAS_DESCRIPTION&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Dashlet deleteCases&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;DAS_VERSION&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;1.0&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;DAS_CREATE_DATE&quot;</span> <span style="color: #339933;">=&gt;</span> <a href="http://php.net/date"><span style="color: #990000;">date</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Y-m-d&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;DAS_UPDATE_DATE&quot;</span> <span style="color: #339933;">=&gt;</span> <a href="http://php.net/date"><span style="color: #990000;">date</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Y-m-d&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">...</span><br />
&nbsp; <span style="color: #009900;">&#125;</span></div></div>
<p>To change the title and description of the new dashlet, edit the values of the <code>"DAS_TITLE"</code> and <code>"DAS_DESCRIPTION"</code> keys in the <code>dashletsUids</code> array.</p>
<p>Code to control the new dashlet is located in the file <b><tt>plugins/<font color=purple><i>pluginName</i></font>/<font color=purple><i>pluginName</i></font>/classes/class.dashlet<font color=purple><i>pluginName</i></font>.php</tt></b> and a template for the content of the new dashlet is located in the file <b><tt>plugins/<font color=purple><i>pluginName</i></font>/<font color=purple><i>pluginName</i></font>/views/dashlet<font color=purple><i>pluginName</i></font>.html</tt></b>. Edit these two files to modify the dashlet or simply add content to the <tt><b>public_html</b></tt> directory and change the code to use that content. 

<p>To display tables or graphs based on case data, it is recommended to export the case data in <a href="Report_Tables.html">Report Tables</a>, so it can be more easily queried. To display information in the dashlet about cases, query the <b><code>wf_<font color=purple><i>workspace</i></font>.APPLICATION</code></b> table in the database to get a list of cases and the <b><code>wf_<font color=purple><i>workspace</i></font>.APP_CACHE_VIEW</code></b> table to get a list of the tasks that have been assigned to the users in each case.</p> 

<h3><span id="PMFunction_Class">PMFunction Class</span></h3>
<p>The last option sets the configuration, classes, and additional functions for the plugin:</p>

<codeblock>Create a PmFunction Class for extend Processmaker [y/N]:
</codeblock>

<p>Regardless of entering "<b>y</b>" or "<b>n</b>", the following files will be created:</p>

<codeblock>saved <font color=green>1760</font> bytes in file <font color=green>deleteCases.php</font> [<font color=green>pluginMainFile</font>]
saved <font color=green>5263</font> bytes in file <font color=green>deleteCases/class.deleteCases.php</font> [<font color=green>pluginClass</font>]
</codeblock>

<p>The <strong><tt><i>pluginName</i>.php</tt></strong> file defines a class for the plugin named <code><i><strong>pluginName</strong></i>Plugin</code>, which is based upon the <code>PmPlugin</code> class defined in <strong><span class="geshifilter"><code class="text geshifilter-text">workflow/engine/classes/class.plugin.php</code></span></strong>. This class sets up the plugin and registers it in ProcessMaker. The contents of the <code>setup()</code> and <code>install()</code> methods depend on which of the previous options were selected, but at a minimum this file contains code similar to the following:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span><br />
G<span style="color: #339933;">::</span><span style="color: #004000;">LoadClass</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'plugin'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
<span style="color: #000000; font-weight: bold;">class</span> deleteCasesPlugin <span style="color: #000000; font-weight: bold;">extends</span> PMPlugin<br />
<span style="color: #009900;">&#123;</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">function</span> deleteCasesPlugin<span style="color: #009900;">&#40;</span><span style="color: #000088;">$sNamespace</span><span style="color: #339933;">,</span> <span style="color: #000088;">$sFilename</span> <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$res</span> <span style="color: #339933;">=</span> parent<span style="color: #339933;">::</span><span style="color: #004000;">PMPlugin</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$sNamespace</span><span style="color: #339933;">,</span> <span style="color: #000088;">$sFilename</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">sFriendlyName</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'deleteCases Plugin'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">sDescription</span> &nbsp;<span style="color: #339933;">=</span> <span style="color: #0000ff;">'Autogenerated plugin for class deleteCases'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">sPluginFolder</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'deleteCases'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">sSetupPage</span> &nbsp; &nbsp;<span style="color: #339933;">=</span> <span style="color: #0000ff;">'deleteCases'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">iVersion</span> &nbsp; &nbsp; &nbsp;<span style="color: #339933;">=</span> <span style="color:#800080;">0.78</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//$this-&gt;iPMVersion &nbsp; &nbsp;= 2425;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">aWorkspaces</span> &nbsp; <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//$this-&gt;aWorkspaces = array('os');</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #b1b100;">return</span> <span style="color: #000088;">$res</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp;<br />
&nbsp; <span style="color: #000000; font-weight: bold;">function</span> setup<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp;<br />
&nbsp; <span style="color: #000000; font-weight: bold;">function</span> install<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span><br />
&nbsp;<br />
<span style="color: #000088;">$oPluginRegistry</span> <span style="color: #339933;">=&amp;</span> PMPluginRegistry<span style="color: #339933;">::</span><span style="color: #004000;">getSingleton</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$oPluginRegistry</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">registerPlugin</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'deleteCases'</span><span style="color: #339933;">,</span> <span style="color: #009900; font-weight: bold;">__FILE__</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>


<h4><span id="PMPlugin_Class_Methods">PMPlugin Class Methods</span></h4>
<p>The custom <code><i><strong>pluginName</strong></i>Plugin</code> class inherits a number of class methods from its parent <code>PmPlugin</code> class. If these methods aren't redefined in <tt><i><strong>pluginName</strong></i>Plugin</tt>, then the default methods from <code>PmPlugin</code> will be used.</p>

<p>It may be useful to redefine the following methods:</p>
<p>
<ul>
  <li><code><strong>setup()</strong></code>: This method is automatically executed by <strong><tt>workflow/public_html/sysGeneric.php</tt></strong>, which is called when a ProcessMaker page is loaded. <code>setup()</code> will be executed almost every time a user clicks on the ProcessMaker interface, so add code that will be executed with every user interaction. However, remember that the code could potentially slow down ProcessMaker, so avoid code that waits for responses from remote servers. If that kind of code is necessary, it is a good idea to implement it as a code file, which is called only when the plugin is used.</li>
  <li><code><strong>install()</strong>:</code> This method is called when the plugin is installed, i.e., when the plugin is imported into processMaker by going to <strong>ADMIN &gt; Plugins</strong> and clicking on <strong>Import</strong>.</li>

  <li><code><strong>enable()</strong>:</code> This method is called when the plugin is enabled, i.e., when going to <strong>ADMIN &gt; Plugins &gt; Plugin Manager</strong>, selecting the plugin and clicking on <strong>Enable</strong>.</li>

  <li><code><strong>disable()</strong>:</code> This method is called when the plugin is disabled, i.e., when going to <strong>ADMIN &gt; Plugins &gt; Plugin Manager</strong>, selecting the plugin and clicking on <strong>Disable</strong>.</li>

  <li><code><strong>uninstall()</strong>:</code> This method is called when the plugin is uninstalled. Note that recent versions of ProcessMaker no longer have a <strong>Remove</strong> button to uninstall plugins so this method will never be called through the interface.</li>
</ul>

<p>To define custom versions of these class methods, add them to the definition of the <code><i><strong>pluginName</strong></i>Plugin</code> class:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">class</span> deleteCasesPlugin <span style="color: #000000; font-weight: bold;">extends</span> PMPlugin <span style="color: #009900;">&#123;</span><br />
&nbsp;<br />
&nbsp; &nbsp;<span style="color: #339933;">...</span><br />
&nbsp;<br />
&nbsp; &nbsp;<span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> setup<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//add code here</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
&nbsp;<br />
&nbsp; &nbsp;<span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> install<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//add code here</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
&nbsp;<br />
&nbsp; &nbsp;<span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> enable<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//add code here</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
&nbsp;<br />
&nbsp; &nbsp;<span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> disable<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//add code here</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
&nbsp;<br />
&nbsp; &nbsp;<span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> uninstall<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//add code here</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<h4><span id="The_pluginNameClass_class">The pluginNameClass Class</span></h4>

<p>The <strong><tt><i>pluginName</i>/class.<i>pluginName</i>.php</tt></strong> file defines the <code><i><strong>pluginName</strong></i>Class</code> class, which is also based upon the <code>PmPlugin</code> class. The content of its methods also depends upon the previously selected options, but at a minimum it contains a private <code>__construct()</code> method that is called whenever a class instance is created, and a private <code>setup()</code> method that is called when a page is loaded in ProcessMaker.</p>

<p>For example:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span><br />
<span style="color: #009933; font-style: italic;">/**<br />
&nbsp;* class.deleteCases.php<br />
&nbsp;* &nbsp; <br />
&nbsp;*/</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">class</span> deleteCasesClass <span style="color: #000000; font-weight: bold;">extends</span> PMPlugin &nbsp;<span style="color: #009900;">&#123;</span><br />
&nbsp;<br />
&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">function</span> __construct <span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <a href="http://php.net/set_include_path"><span style="color: #990000;">set_include_path</span></a><span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; PATH_PLUGINS <span style="color: #339933;">.</span> <span style="color: #0000ff;">'noOptions'</span> <span style="color: #339933;">.</span> PATH_SEPARATOR <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://php.net/get_include_path"><span style="color: #990000;">get_include_path</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp;<br />
&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">function</span> setup<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp;<br />
&nbsp; <span style="color: #009900;">&#125;</span></div></div>

<p>Custom methods and member variables can be added to the <code><i><strong>pluginName</strong></i>Class</code> class. The inherited methods from <code>PmPlugin</code> can also be defined in the <code><i><strong>pluginName</strong></i>Class</code> class.</p>

<h4><span id="Custom_pmFunctions">Custom pmFunctions</span></h4>
<p>If "<b>y</b>" was entered, then in addition to the files above, the following file will also be created:</p>

<codeblock>saved <font color=green>484</font> bytes in file <font color=green>deleteCases/classes/class.pmFunctions.php</font> [<font color=green>class.pmFunctions.php</font>]
</codeblock>

<p>The <strong><tt><i>pluginName</i>/classes/class.pmFunctions.php</tt></strong> file is used to define any special functions for the plugin, which can be called from inside a trigger like normal <a href="../3.2/ProcessMaker_Functions.html" title="3.2/ProcessMaker Functions">ProcessMaker Functions</a>. These custom functions can be given any name, but the convention is to use names like <code><i><strong>pluginName</strong></i>_<i><strong>function-name</strong></i>()</code>, so they can easily be distinguished from the standard ProcessMaker and PHP functions used in triggers.</p>

<p>By default, the <strong><tt>class.pmFunctions.php</tt></strong> file contains two sample functions named <code><i><strong>pluginName</strong></i>_getMyCurrentDate()</code> and <code><i><strong>pluginName</strong></i>_getMyCurrentTime()</code> to return the current date and current time.</p>
<p>For example:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span><br />
<span style="color: #009933; font-style: italic;">/**<br />
&nbsp;* class.deleteCases.pmFunctions.php<br />
&nbsp;*<br />
&nbsp;* ProcessMaker Open Source Edition<br />
&nbsp;* Copyright (C) 2004 - 2008 Colosa Inc.<br />
&nbsp;* *<br />
&nbsp;*/</span><br />
&nbsp;<br />
<span style="color: #666666; font-style: italic;">////////////////////////////////////////////////////</span><br />
<span style="color: #666666; font-style: italic;">// deleteCases PM Functions</span><br />
<span style="color: #666666; font-style: italic;">//</span><br />
<span style="color: #666666; font-style: italic;">// Copyright (C) 2007 COLOSA</span><br />
<span style="color: #666666; font-style: italic;">//</span><br />
<span style="color: #666666; font-style: italic;">// License: LGPL, see LICENSE</span><br />
<span style="color: #666666; font-style: italic;">////////////////////////////////////////////////////</span><br />
&nbsp;<br />
<span style="color: #000000; font-weight: bold;">function</span> deleteCases_getMyCurrentDate<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><br />
<span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">return</span> G<span style="color: #339933;">::</span><span style="color: #004000;">CurDate</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Y-m-d'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
&nbsp;<br />
<span style="color: #000000; font-weight: bold;">function</span> deleteCases_getMyCurrentTime<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><br />
<span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">return</span> G<span style="color: #339933;">::</span><span style="color: #004000;">CurDate</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'H:i:s'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>
<p>New custom functions can be added. For example, to add a custom function named <code>deleteCases_getCaseStatus()</code> to return the status of a case:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">function</span> deleteCases_getCaseStatus<span style="color: #009900;">&#40;</span><span style="color: #000088;">$caseId</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; <span style="color: #000088;">$c</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> Cases<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #000088;">$aInfo</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$c</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">loadCase</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$caseId</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> &nbsp; <br />
&nbsp; <span style="color: #b1b100;">return</span> <span style="color: #000088;">$aInfo</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_STATUS'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>
<p>As long as the plugin is activated, the <code>deleteCases_getCaseStatus()</code> function can be called in a ProcessMaker trigger. For example:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span>deleteCases_getCaseStatus<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <span style="color: #0000ff;">'TO_DO'</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$subject</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'Finish up the case'</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span> <span style="color: #b1b100;">elseif</span> <span style="color: #009900;">&#40;</span>deleteCases_getCaseStatus<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <span style="color: #0000ff;">'DRAFT'</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$subject</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'Start working on the case'</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
&nbsp;<br />
PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'boss@example.com'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'employee1@example.com'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #000088;">$title</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'overdueCase.html'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>When the plugin is created, the following code is automatically added to the <strong><tt><i>pluginName</i>.php</tt></strong> file to incorporate the plugin's custom functions into ProcessMaker:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">&nbsp;<span style="color: #000000; font-weight: bold;">function</span> setup<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">registerPmFunction</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span></div></div>

<h2><span id="Linking_the_Plugin_Files_into_ProcessMaker">Step 4: Linking the Plugin Files into ProcessMaker</span></h2>
<p>After using the <code><strong>gulliver new-plugin</strong></code> script to create the new plugin, create symbolic links from the plugin's PHP file and its directory to the <strong><tt>&lt;INSTALL-DIRECTORY&gt;/workflow/engine/plugins/</tt></strong> directory so the new plugin can be used by ProcessMaker.</p>
<p>For example:</p>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">ln -s /opt/plugins/deleteCases/deleteCases.php /opt/processmaker/workflow/engine/plugins/<br />
ln -s /opt/plugins/deleteCases/deleteCases &nbsp; &nbsp; /opt/processmaker/workflow/engine/plugins/ </div></div>

<p>Creating symbolic links is the recommended way, but another way to make the plugin available to ProcessMaker is to copy its files directly into ProcessMaker's plugin directory.</p>
<p>For example:</p>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">cp -r /opt/plugins/deleteCases/* /opt/processmaker/workflow/engine/plugins</div></div>

<h2><span id="Activate_the_New_Plugin">Step 5: Activate the New Plugin</span></h2>

<p>After linking or copying the plugin's files into the ProcessMaker file system, log in to ProcessMaker as the admin user (or another user with the <a href="../3.1/Roles.html#PM_SETUP_ADVANCE" title="3.1/Roles">PM_SETUP_ADVANCE</a> permission in his/her <a href="../3.1/Roles.html" title="2.0/Roles">role</a>). Go to <strong>ADMIN &gt; Plugins &gt; Plugins Manager</strong> and select the new plugin, which should appear in the list. Then, click on the <strong>Enable</strong> button to activate the plugin. The new plugin should now be ready to be used. To see any new changes to the interface (such as new menus), refresh the web browser.</p>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> Each time the menu is changed in the plugin's files, the plugin will need to be deactivated and then reactivated for those changes to appear in the ProcessMaker interface.</font></p>

<h2><span id="Altering_the_Database_Structure">Altering the Database Structure</span></h2>
<p>Plugins can be used to alter the structure of the database(s) used by ProcessMaker. To add tables and/or fields to a database, complete these steps in order:</p>

<ol><li><a href="#Editing_Propel_XML_schema_files">Edit the Propel XML schema file(s)</a> to define the additional tables and/or fields.</li>
<li><a href="#Creating_Classes_with_gulliver_propel-build-model.3C.2Ftt.3E">Run the gulliver propel-build-model</a> script to construct Propel classes for the data objects.</li><li><a href="#Creating_SQL_files_with_gulliver_propel-build-sql">Run the gulliver propel-build-sql script</a> to generate the SQL files to alter the database.</li><li><a href="#Applying_changes_with_gulliver_propel-build-crud">Run the <code>gulliver propel-build-crud</code> for each table</a> to update the database.</li></ol>

<h3><span id="Editing_the_Propel_XML_schema_file">Editing the Propel XML Schema File</span></h3>
<p>Changes are made to the ProcessMaker database(s) through the XML schema file located at <span class="geshifilter"><code class="text geshifilter-text">plugins/pluginName/pluginName/config/schema.xml</code></span>, which is generated by the <strong>gulliver new-plugin</strong> script.</p>
<p>Edit the <tt>schema.xml</tt> file to add the tables and fields used by the plugin. By default, it contains:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?</span>xml version<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;1.0&quot;</span> encoding<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;utf-8&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span><br />
&lt;!--Autogenerated by CreoleToXMLSchema!--&gt;<br />
&lt;database name=&quot;workflow&quot;&gt;<br />
&nbsp; &lt;table name=&quot;PLUGIN_DEMO&quot;&gt;<br />
&nbsp; &nbsp; &lt;vendor type=&quot;mysql&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Name&quot; value=&quot;PLUGIN_DEMO&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Engine&quot; value=&quot;MyISAM&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Version&quot; value=&quot;10&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Row_format&quot; value=&quot;Dynamic&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Auto_increment&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Collation&quot; value=&quot;utf8_general_ci&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Create_options&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Comment&quot; value=&quot;The plugin demo table for deleteCases&quot;/&gt;<br />
&nbsp; &nbsp; &lt;/vendor&gt;<br />
&nbsp; &nbsp; &lt;column name=&quot;PLG_UID&quot; type=&quot;VARCHAR&quot; size=&quot;32&quot; required=&quot;true&quot; primaryKey=&quot;true&quot; default=&quot;&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;vendor type=&quot;mysql&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Field&quot; value=&quot;PLG_UID&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Type&quot; value=&quot;varchar(32)&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Null&quot; value=&quot;NO&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Key&quot; value=&quot;PRI&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Default&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Extra&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;/vendor&gt;<br />
&nbsp; &nbsp; &lt;/column&gt;<br />
&nbsp; &nbsp; &lt;column name=&quot;PLG_PARENT_ID&quot; type=&quot;INTEGER&quot; required=&quot;true&quot; default=&quot;0&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;vendor type=&quot;mysql&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Field&quot; value=&quot;PLG_PARENT_ID&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Type&quot; value=&quot;int(11)&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Null&quot; value=&quot;NO&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Key&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Default&quot; value=&quot;0&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Extra&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;/vendor&gt;<br />
&nbsp; &nbsp; &lt;/column&gt;<br />
&nbsp; &nbsp; &lt;column name=&quot;PLG_NAME&quot; type=&quot;VARCHAR&quot; size=&quot;100&quot; required=&quot;true&quot; default=&quot;&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;vendor type=&quot;mysql&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Field&quot; value=&quot;PLG_FOLDER_NAME&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Type&quot; value=&quot;varchar(100)&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Null&quot; value=&quot;NO&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Key&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Default&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Extra&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;/vendor&gt;<br />
&nbsp; &nbsp; &lt;/column&gt;<br />
&nbsp; &nbsp; &lt;column name=&quot;PLG_FULL_PATH&quot; type=&quot;VARCHAR&quot; size=&quot;255&quot; required=&quot;true&quot; default=&quot;&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;vendor type=&quot;mysql&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Field&quot; value=&quot;PLG_FULL_PATH&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Type&quot; value=&quot;varchar(255)&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Null&quot; value=&quot;NO&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Key&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Default&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Extra&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;/vendor&gt;<br />
&nbsp; &nbsp; &lt;/column&gt;<br />
&nbsp; &nbsp; &lt;index name=&quot;indexApp&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;index-column name=&quot;PLG_UID&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;vendor type=&quot;mysql&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Table&quot; value=&quot;PLUGU&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Non_unique&quot; value=&quot;1&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Key_name&quot; value=&quot;indexApp&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Seq_in_index&quot; value=&quot;1&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Column_name&quot; value=&quot;PLUGIN_DEMO&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Collation&quot; value=&quot;A&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Cardinality&quot; value=&quot;6&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Sub_part&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Packed&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Null&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Index_type&quot; value=&quot;BTREE&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Comment&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;/vendor&gt;<br />
&nbsp; &nbsp; &lt;/index&gt; &nbsp; &nbsp;<br />
&nbsp; &lt;/table&gt;<br />
&lt;/database&gt;</div></div>
<p>To add tables and/or fields to a database, first indicate which database they should be added to in the <span class="geshifilter"><code class="text geshifilter-text">&lt;database name=&quot;DB-NAME&quot;&gt;</code></span> tag. The <i><strong><code>DB-NAME</code></strong></i> is one of the databases used by the current workspace:</p>
<ul><li><code>"workflow"</code> : The <a href="../3.2/ProcessMaker_Database_Model.html#wf_.3CWORKSPACE-NAME.3E" title="ProcessMaker Database Model"><strong><code>wf_&lt;WORKSPACE&gt;</code></strong> database</a></li><li><code>"rbac"</code> : The <a href="../index.php/ProcessMaker_Database_Model.html#rb_.3CWORKSPACE-NAME.3E" title="ProcessMaker Database Model"><strong><code>rb_&lt;WORKSPACE&gt;</code></strong> database</a></li><li><code>"report"</code> : The <a href="../index.php/ProcessMaker_Database_Model.html#rp_.3CWORKSPACE-NAME.3E" title="ProcessMaker Database Model"><strong><code>rp_&lt;WORKSPACE&gt;</code></strong> database</a></li></ul>

<p>The <code>&lt;table name="<i><strong>TABLE-NAME</strong></i>"&gt;</code> tag is used to indicate the name of the table to be modified. The <code>"<i><strong>TABLE-NAME</strong></i>"</code> can either be a new table or an existing table in the database. Remember that MySQL table names are case sensitive by default in Linux/UNIX, but not in Windows. To make a cross-platform plugin, it is recommended to put table names and field names in UPPER CASE. Make sure that the same <code><i><strong>TABLE-NAME</strong></i></code> is used in the tag: <code>&lt;parameter name="Name" value="<i><strong>TABLE-NAME</strong></i>"/&gt;</code></p>

<p>Fields in each table are defined with the <tt>&lt;column name="<i><strong>FIELD-NAME</strong></i>"&gt;</tt> tag. The properties of each field can be defined inside the <code>&lt;column name="<i><strong>FIELD-NAME</strong></i>" <i><strong>PROPERTIES</strong></i>/&gt;</code> or through separate <span class="geshifilter"><code class="text geshifilter-text">&lt;parameter name=&quot;PROPERTY-NAME&quot; value=&quot;PROPERTY-VALUE&quot;/&gt;</code></span> tags.</p>
<p>For example, this XML code:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">&nbsp; <span style="color: #339933;">&lt;</span>column name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;PLG_UID&quot;</span> type<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;VARCHAR&quot;</span> size<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;32&quot;</span> required<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;true&quot;</span> primaryKey<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;true&quot;</span> <span style="color: #b1b100;">default</span><span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">/&gt;</span></div></div>
<p>Creates the same "PLG_UID" field as this XML code:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">&nbsp;<span style="color: #339933;">&lt;</span>column name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;PLG_UID&quot;</span><span style="color: #339933;">&gt;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>vendor type<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;mysql&quot;</span><span style="color: #339933;">&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>parameter name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;Field&quot;</span> value<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;PLG_UID&quot;</span><span style="color: #339933;">/&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>parameter name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;Type&quot;</span> value<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;varchar(32)&quot;</span><span style="color: #339933;">/&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>parameter name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;Null&quot;</span> value<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;NO&quot;</span><span style="color: #339933;">/&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>parameter name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;Key&quot;</span> value<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;PRI&quot;</span><span style="color: #339933;">/&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>parameter name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;Default&quot;</span> value<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">/&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>parameter name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;Extra&quot;</span> value<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">/&gt;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;/</span>vendor<span style="color: #339933;">&gt;</span>s<br />
&nbsp; &nbsp; <span style="color: #339933;">&lt;/</span>column<span style="color: #339933;">&gt;</span></div></div>

<p>Note that the first definition uses Propel's universal properties, which are valid for all types of databases, whereas the second example uses properties that are specific to MySQL. This same "PLG_UID" field can be created using both forms of the properties:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">&lt;</span>column name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;PLG_UID&quot;</span> type<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;VARCHAR&quot;</span> size<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;32&quot;</span> required<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;true&quot;</span> primaryKey<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;true&quot;</span> <span style="color: #b1b100;">default</span><span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">&gt;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>vendor type<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;mysql&quot;</span><span style="color: #339933;">&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>parameter name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;Field&quot;</span> value<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;PLG_UID&quot;</span><span style="color: #339933;">/&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>parameter name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;Type&quot;</span> value<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;varchar(32)&quot;</span><span style="color: #339933;">/&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>parameter name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;Null&quot;</span> value<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;NO&quot;</span><span style="color: #339933;">/&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>parameter name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;Key&quot;</span> value<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;PRI&quot;</span><span style="color: #339933;">/&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>parameter name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;Default&quot;</span> value<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">/&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;</span>parameter name<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;Extra&quot;</span> value<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">/&gt;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">&lt;/</span>vendor<span style="color: #339933;">&gt;</span></div></div>
<p>The sample <strong><tt>schema.xml</tt></strong> file created by the <strong><code>gulliver new-plugin</code></strong> script duplicates the definition of each field property using both universal and MySQL properties, but that duplication is unnecessary and is not recommended. The same sample file can be written in a shorter form, such as:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?</span>xml version<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;1.0&quot;</span> encoding<span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;utf-8&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span><br />
&lt;!--Autogenerated by CreoleToXMLSchema!--&gt;<br />
&lt;database name=&quot;workflow&quot;&gt;<br />
&nbsp; &lt;table name=&quot;PLUGIN_DEMO&quot;&gt;<br />
&nbsp; &nbsp; &lt;vendor type=&quot;mysql&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Name&quot; value=&quot;PLUGIN_DEMO&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Engine&quot; value=&quot;MyISAM&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Version&quot; value=&quot;10&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Row_format&quot; value=&quot;Dynamic&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Auto_increment&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Collation&quot; value=&quot;utf8_general_ci&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Create_options&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Comment&quot; value=&quot;The plugin demo table for deleteCases&quot;/&gt;<br />
&nbsp; &nbsp; &lt;/vendor&gt;<br />
&nbsp; &nbsp; &lt;column name=&quot;PLG_UID&quot; type=&quot;VARCHAR&quot; size=&quot;32&quot; required=&quot;true&quot; primaryKey=&quot;true&quot; DEFAULT=&quot;&quot; /&gt;<br />
&nbsp; &nbsp; &lt;column name=&quot;PLG_PARENT_ID&quot; type=&quot;INTEGER&quot; required=&quot;true&quot; DEFAULT=&quot;0&quot; /&gt;<br />
&nbsp; &nbsp; &lt;column name=&quot;PLG_NAME&quot; type=&quot;VARCHAR&quot; size=&quot;100&quot; required=&quot;true&quot; DEFAULT=&quot;&quot; /&gt;<br />
&nbsp; &nbsp; &lt;column name=&quot;PLG_FULL_PATH&quot; type=&quot;VARCHAR&quot; size=&quot;255&quot; required=&quot;true&quot; DEFAULT=&quot;&quot; /&gt;<br />
&nbsp; &nbsp; &lt;index name=&quot;indexApp&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;index-column name=&quot;PLG_UID&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;vendor type=&quot;mysql&quot;&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Table&quot; value=&quot;PLUGU&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Non_unique&quot; value=&quot;1&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Key_name&quot; value=&quot;indexApp&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Seq_in_index&quot; value=&quot;1&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Column_name&quot; value=&quot;PLUGIN_DEMO&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Collation&quot; value=&quot;A&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Cardinality&quot; value=&quot;6&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Sub_part&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Packed&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Null&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Index_type&quot; value=&quot;BTREE&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &nbsp; &lt;parameter name=&quot;Comment&quot; value=&quot;&quot;/&gt;<br />
&nbsp; &nbsp; &nbsp; &lt;/vendor&gt;<br />
&nbsp; &nbsp; &lt;/index&gt; &nbsp; &nbsp;<br />
&nbsp; &lt;/table&gt;<br />
&lt;/database&gt;</div></div>
<p>For more information about Propel XML schema files, see the <a href="http://propelorm.org/documentation/reference/schema.html">Propel Manual</a>. For more examples of XML schema files, see the following files that define the <strong><code>&lt;wf_&lt;WORKSPACE&gt;</code></strong> and <strong><code>rp_&lt;WORKSPACE&gt;</code></strong> databases in ProcessMaker:</p>
<ul><li><tt>&lt;INSTALL-DIRECTORY&gt;/rbac/engine/config/schema.xml</tt></li><li><tt>&lt;INSTALL-DIRECTORY&gt;/workflow/engine/config/schema.xml</tt></li></ul>

<h3><span id="Creating_Classes_with_gulliver_propel-build-model">Creating Classes with gulliver propel-build-model</span></h3>
<p>After editing the <strong><span class="geshifilter"><code class="text geshifilter-text">config/schema.xml</code></span></strong> file, run the following script to generate the Propel classes for the tables defined in the schema file:</p>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">./gulliver propel-build-model &lt;pluginName&gt;</div></div>

<p>For example:</p>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;"># ./gulliver propel-build-model deleteCases<br />
&gt;&gt; propel.ini using the file : plugins/deleteCases/config/propel.ini <br />
Buildfile: /opt/processmaker/gulliver/thirdparty/propel-generator/build.xml<br />
[resolvepath] Resolved /opt/processmaker/workflow/engine/plugins/deleteCases/config to /opt/pm2033/workflow/engine/plugins/deleteCases/config<br />
<br />
propel-project-builder &gt; check-project-or-dir-set:<br />
propel-project-builder &gt; check-project-set:<br />
propel-project-builder &gt; set-project-dir:<br />
propel-project-builder &gt; check-buildprops-exists:<br />
propel-project-builder &gt; check-buildprops-for-propel-gen:<br />
propel-project-builder &gt; check-buildprops:<br />
propel-project-builder &gt; configure:<br />
&nbsp; &nbsp; &nbsp;[echo] Loading project-specific props from /opt/processmaker/workflow/engine/plugins/deleteCases/config/propel.ini<br />
&nbsp;[property] Loading /opt/processmaker/workflow/engine/plugins/deleteCases/config/propel.ini<br />
<br />
propel-project-builder &gt; om:<br />
&nbsp; &nbsp; [phing] Calling Buildfile '/opt/processmaker/gulliver/thirdparty/propel-generator/build-propel.xml' with target 'om'<br />
&nbsp;[property] Loading /opt/processmaker/gulliver/thirdparty/propel-generator/./default.properties<br />
<br />
propel &gt; check-run-only-on-schema-change:<br />
propel &gt; om-check:<br />
propel &gt; om:<br />
&nbsp; &nbsp; &nbsp;[echo] +------------------------------------------+<br />
&nbsp; &nbsp; &nbsp;[echo] | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />
&nbsp; &nbsp; &nbsp;[echo] | Generating Peer-based Object Model for &nbsp; |<br />
&nbsp; &nbsp; &nbsp;[echo] | YOUR Propel project! (NEW OM BUILDERS)! &nbsp;|<br />
&nbsp; &nbsp; &nbsp;[echo] | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|<br />
&nbsp; &nbsp; &nbsp;[echo] +------------------------------------------+<br />
[phingcall] Calling Buildfile '/opt/processmaker/gulliver/thirdparty/propel-generator/build-propel.xml' with target 'om-template'<br />
&nbsp;[property] Loading /opt/processmaker/gulliver/thirdparty/propel-generator/./default.properties<br />
<br />
propel &gt; om-template:<br />
[propel-om] Target database type: mysql<br />
[propel-om] Target package: classes.model<br />
[propel-om] Using template path: /opt/processmaker/gulliver/thirdparty/propel-generator/templates<br />
[propel-om] Output directory: /opt/processmaker/workflow/engine/plugins/deleteCases<br />
[propel-om] Processing: schema.xml<br />
[propel-om] Processing Datamodel : JoinedDataModel<br />
[propel-om] &nbsp; - processing database : workflow<br />
[propel-om] &nbsp; + PLUGIN_DEMO<br />
[propel-om] &nbsp; &nbsp; -&gt; BasePluginDemoPeer [builder: PHP5ComplexPeerBuilder]<br />
[propel-om] &nbsp; &nbsp; -&gt; BasePluginDemo [builder: PHP5ComplexObjectBuilder]<br />
[propel-om] &nbsp; &nbsp; -&gt; PluginDemoMapBuilder [builder: PHP5MapBuilderBuilder]<br />
[propel-om] &nbsp; &nbsp; -&gt; (exists) PluginDemoPeer<br />
[propel-om] &nbsp; &nbsp; -&gt; (exists) PluginDemo<br />
<br />
BUILD FINISHED<br />
<br />
Total time: 0.2184 seconds</div></div>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">As of ProcessMaker 3.2.2, the build result varies because the <tt>thirdparty</tt> folder is no longer part of the <tt>gulliver</tt> folder.</font></p>

<p>The propel-build-model script will add the following files to the plugin:</p>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">pluginName<br />
+-- config<br />
| &nbsp; +-- schema-transformed.xml<br />
+-- classes<br />
&nbsp; &nbsp; +-- model<br />
&nbsp; &nbsp; &nbsp; &nbsp; +-- map<br />
&nbsp; &nbsp; &nbsp; &nbsp; ¦ &nbsp; +-- TableNameMapBuilder.php<br />
&nbsp; &nbsp; &nbsp; &nbsp; +-- om<br />
&nbsp; &nbsp; &nbsp; &nbsp; ¦ &nbsp; +-- BaseTableNamePeer.php<br />
&nbsp; &nbsp; &nbsp; &nbsp; ¦ &nbsp; +-- BaseTableName.php<br />
&nbsp; &nbsp; &nbsp; &nbsp; +-- TableNamePeer.php<br />
&nbsp; &nbsp; &nbsp; &nbsp; +-- TableName.php</div></div>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> <code>Gulliver propel-build-model</code></strong> script needs to have the XSL module installed in PHP for XSLT parsing. Otherwise, the following error message will appear:

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">[propel-om] Could not perform XLST transformation. &nbsp;Make sure PHP has been compiled/configured to support XSLT.</div></div>
</font></p>

<p>To install the XSL module:</p>
<p>In <strong>Debian/Ubuntu</strong>:<br>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">apt-get install php5-xsl</div></div>
</p>

<p>In <strong>Red Hat/CentOS/Fedora</strong>:<br>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">yum install php-xml</div></div>
</p>
<h3><span id="Creating_SQL_files_with_gulliver_propel-build-sql">Creating SQL Files with gulliver propel-build-sql</span></h3>
<p>After generating the Propel classes, create the SQL files that will insert new tables/files into the database:<br>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">./gulliver propel-build-sql &lt;db-type&gt; &lt;pluginName&gt;</div></div>
</p>

<p>The <code>&lt;db-type&gt;</code> will be "mysql", since ProcessMaker runs on a MySQL database. For example, to generate the SQL files for the "deleteCases" plugin:<br>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">./gulliver propel-build-sql mysql deleteCases</div></div>
</p>

<h3><span id="Applying_changes_with_gulliver_propel-build-crud">Applying Changes With gulliver propel-build-crud</span></h3>
<p>After generating the SQL files, apply the database changes to each new or altered table:</p>

<codeblock>./gulliver propel-build-crud <font color=blue><i>class</i></font> <font color=blue><i>table</i></font> <font color=blue><i>pluginName</i></font>
</codeblock>

<h2><span id="Creating_Exportable_Plugins">Step 6: Creating Exportable Plugins</span></h2>
<p>After creating the new plugin, use the <code>gulliver pack-plugin</code> script to pack the plugin files into a tar archive that can be exported.</p>

<h3><span id="Using_the_gulliver_pack-plugin_script">Using the <b>gulliver pack-plugin</b> Script</span></h3>

<p>From the command line, log in as the <code>root</code> user or any user with rights to the <strong><tt>plugins</tt></strong> directory. Then, change to the <strong><tt>workflow/engine</tt></strong> directory and execute the <strong><code>gulliver pack-plugin</code></strong> script.</p>

<codeblock>php gulliver pack-plugin <font color=blue><i>pluginName</i></font>
</codeblock>

<p>Remember that the <code>pluginName</code> is case sensitive and needs to be spelled exactly the same as the plugin's directory.</p>
<p>For example, to create an export file for the <b>deleteCases</b> plugin:</p>
<codeblock>$ <b>su</b> <font color=green><i>or</i></font> <b>sudo su</b>
$ <b>cd /opt/processmaker/workflow/engine</b>
$ <b>php gulliver pack-plugin deleteCases</b>
   1283 deleteCases.php 
   2061 deleteCases/config/propel.ini 
   2055 deleteCases/config/propel.mysql.ini 
   3053 deleteCases/config/schema.xml 
    382 deleteCases/setup.xml 
    183 deleteCases/messageShow.xml 
    376 deleteCases/class.deleteCases.php 
File created in  /opt/plugins/deleteCases/deleteCases-1.tar 
Filesize  15.50 Kb 
</codeblock>

<p>The <tt><b>.tar</b></tt> file created by the <strong><code>gulliver pack-plugin</code></strong> script will be named <strong><tt><i>NAME</i>-<i>VERSION</i>.tar</tt></strong> and will be located in the <strong><tt>plugins/<i>pluginName</i></tt></strong> directory. If the tar file already exists, it will automatically be overwritten.</p>

<div style="margin-left:25px">
<font color=green><b>Note:</b></font> <font color=dimgrey>The command <b><code>php pack-plugin <font color=blue><i>pluginName</i></font></code></b> takes the files from the <b><tt>/opt/plugins/<font color=blue><i>pluginName</i></font></tt></b> directory when creating the <b></tt>/opt/plugins/<font color=blue><i>pluginName</i></font>/<font color=blue><i>pluginName</i></font>-<font color=blue><i>X</i></font>.tar</tt></b> file. If the plugin files were copied (not symbolically linked) into the <b><tt>/opt/processmaker/workflow/engine/plugins</tt></b> directory, then the plugins's <b><tt>.tar</tt></b> file will have to be manually created with the following commands:</font><br>
<codeblock>cd /opt/processmaker/workflow/engine/plugins
tar -cvf /opt/plugins/<font color=blue><i>pluginName</i></font>/<font color=blue><i>pluginName</i></font>-1.tar <font color=blue><i>pluginName</i></font>*</codeblock>
</div>
<p><br>Then, copy the plugin's <tt><b>.tar</b></tt> file to the local computer. If working on a remote server, then <a href=https://linuxacademy.com/blog/linux/ssh-and-scp-howto-tips-tricks/>scp</a> in Linux/UNIX or <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">pscp</a> in Windows can be used to copy the <tt><b>.tar</b></tt> file to the local computer.</p>
<p>For example in Linux/UNIX:</p>

<codeblock>scp root@example.com:/opt/plugins/deleteCases/deleteCases-1.tar</codeblock>

<h3><span id="Importing_a_Plugin">Importing a Plugin</span></h3>
<p>After using the <strong><code>gulliver pack-plugin</code></strong> script to create a tar file for the plugin, log in to ProcessMaker as a user, such as the admin, who has the <a href="../3.1/Roles.html#PM_SETUP_ADVANCE" title="3.1/Roles">PM_SETUP_ADVANCE</a> permission in his/her <a href="../3.1/Roles.html" title="3.1/Roles">role</a>.
Go to <strong>ADMIN &gt; Plugins</strong> and click on the <strong>Import</strong> button. Select the plugin's tar file and click on <strong>Import</strong> to upload and install the new plugin in ProcessMaker.</p>
<p>The new plugin should appear in the list in the <strong>Plugins Manager</strong>. Then, activate the new plugin to use it.</p>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> Importing a plugin that already exists in ProcessMaker will overwrite the existing plugin. This is the proper way to upgrade plugins that already exist in ProcessMaker.</font></p>

<h2><span id="Creating_Custom_Pages">Creating Custom Pages</span></h2>
<p>In ProcessMaker 3.0, either <strong>Gulliver + XML-&gt;HTML + Maborak</strong> or <strong>Gulliver + HTML + Ext JS</strong> can be used to generate custom pages in plugins. Gulliver is a custom PHP framework and Maborak is a custom JavaScript library used by ProcessMaker. </p>
<p>Ext JS generates very nice interface objects and is very flexible; however, it is more difficult to generate a basic page using Gulliver + HTML + Ext JS. In contrast, it is much easier to generate basic pages using Gulliver + XML-&gt;HTML + Maborak. Unfortunately, the Maborak framework is not documented, hard to understand, and not very flexible. It generates simpler interfaces compared to Ext JS. Nonetheless, it is much easier to create pages using Gulliver + XML-&gt;HTML + Maborak, because the same XML used to create Dynaforms can be used to create custom pages for a plugin.</p>

<h3><span id="Custom_pages_with_HTML_.2B_Ext_JS">Custom Pages with HTML + Ext JS</span></h3>
<p>To create a custom page using Gulliver + HTML + Ext JS, create the following five files:</p>

<ul><li>A <a href="#PHP_Page_Setup">PHP Page Setup</a> file: Sets the HTML and JavaScript files for the custom page, passes variables to the JavaScript, and then renders the page.</li><li>A <a href="#HTML_Template">HTML Template</a> file: Sets the HTML content of the page. If using Ext JS to generate the interface items, this often is just an HTML page with an empty <code>&lt;div&gt;</code> that serves as a container for the HTML generated by Ext JS.</li>

<li>An <a href="#Ext_JS_Code">Ext JS code</a> file: Generates the content for the custom page, such as toolbars, buttons, links, fields and labels.</li>

<li>A PHP AJAX file: Handles the submission of forms from the page and any AJAX calls.</li>
<li>A PHP <a href="#Menu">Menu</a> file: Creates a menu item that displays the custom page when clicked.</li></ul>

<h4><span id="PHP_Page_Setup">PHP Page Setup</span></h4>
<p>To setup a custom page to be displayed using Gulliver + HTML + Ext JS, create a PHP file that does the following steps:</p>

<ul><li>First, get a single instance of the [<a href="../index.php/Internal_Functions_and_Classes.html#headPublisher">class|headPublisher</a>] class using the <a href="../index.php/Internal_Functions_and_Classes.html#headPublisher::getSingleton.28.29" title="Internal Functions and Classes">headPublisher::getSingleton()</a> method. Remember that the Gulliver framework should only use a single instance of the <a href="../index.php/Internal_Functions_and_Classes.html#headPublisher_class" title="Internal Functions and Classes">headPublisher</a> (or <a href="../index.php/Internal_Functions_and_Classes.html#Publisher_class" title="Internal Functions and Classes">Publisher</a> class for displaying pages.</li><li>Then, use the <a href="../index.php/Internal_Functions_and_Classes.html#headPublisher::addContent.28.29" title="Internal Functions and Classes">headPublisher::addContent()</a> method to add one or more HTML files to the next page that will be displayed.</li><li>Then, use the <a href="../index.php/Internal_Functions_and_Classes.html#headPublisher::addExtJsScript.28.29" title="Internal Functions and Classes">headPublisher::addExtJsScript()</a> method to add one or more JavaScript files to be executed when the HTML files are loaded. The Ext JS library is used to create interface items, forms and fields that will be inserted in the HTML code.</li><li>Then, use the <a href="../index.php/Internal_Functions_and_Classes.html#headPublisher::assign.28.29" title="Internal Functions and Classes">headPublisher::assign()</a> method to set JavaScript variables, which can be used by the JavaScript code to generate content in the HTML. For example, links, labels and the values in fields can be passed to the JavaScript.</li><li>Finally, call <a href="../index.php/Internal_Functions_and_Classes.html#G::RenderPage.28.29" title="Internal Functions and Classes">G::RenderPage()</a> to generate the content of the next page and display it.</li></ul>

<h2><span id="Creating_a_cron_using_ProcessMaker_classes">Creating a cron Using ProcessMaker Classes</span></h2>
<p>To create a cron using ProcessMaker classes, first create a PHP file by following the steps below:</p>

<ul><li>First create the PHP file, for example <tt>Plugin_File_Name.php</tt> inside the services folder.</li>
<li>Then, add the following code:</li></ul>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span><br />
<span style="color: #000000; font-weight: bold;">class</span> Plugin_File_NameClassCron &nbsp; <br />
<span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #009933; font-style: italic;">/**<br />
&nbsp; &nbsp;* Default Constructor for the class<br />
&nbsp; &nbsp;*/</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">function</span> __construct <span style="color: #009900;">&#40;</span> &nbsp;<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp;<br />
&nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp;<br />
&nbsp; <span style="color: #000000; font-weight: bold;">function</span> executeCron<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><a href="http://php.net/defined"><span style="color: #990000;">defined</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'PATH_WORKSPACE'</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
            <a href="http://php.net/define"><span style="color: #990000;">define</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'PATH_WORKSPACE'</span><span style="color: #339933;">,</span> PATH_DATA_SITE<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
            <a href="http://php.net/set_include_path"><span style="color: #990000;">set_include_path</span></a><span style="color: #009900;">&#40;</span><a href="http://php.net/get_include_path"><span style="color: #990000;">get_include_path</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> PATH_SEPARATOR <span style="color: #339933;">.</span> PATH_DATA_SITE<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
  &nbsp;  <span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #b1b100;">if</span><span style="color: #009900;">&#40;</span>SYS_SYS <span style="color: #339933;">==</span> <span style="color: #0000ff;">&quot;workflow&quot;</span> <span style="color: #339933;">||</span> SYS_SYS <span style="color: #339933;">==</span> <span style="color: #0000ff;">&quot;my_workspace&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span> <span style="color: #666666; font-style: italic;">//execute the cron depending on the workspaces defined</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$pluginFile</span><span style="color: #339933;">=</span><span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><a href="http://php.net/class_exists"><span style="color: #990000;">class_exists</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'classPlugin_File_Name'</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$pluginFile</span> <span style="color: #339933;">=</span> PATH_PLUGINS<span style="color: #339933;">.</span><span style="color: #0000ff;">'myproject'</span><span style="color: #339933;">.</span>PATH_SEP<span style="color: #339933;">.</span><span style="color: #0000ff;">'services'</span><span style="color: #339933;">.</span>PATH_SEP<span style="color: #339933;">.</span><span style="color: #0000ff;">'class.Plugin_File_Name.php'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">if</span><span style="color: #009900;">&#40;</span><a href="http://php.net/file_exists"><span style="color: #990000;">file_exists</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$pluginFile</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; G<span style="color: #339933;">::</span><span style="color: #004000;">LoadClass</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'plugin'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">require_once</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$pluginFile</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">// the automated task is check and recreate the dimension tables</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$plugin</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> myClass<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//define the class with the name of the file where the actions will be executed by the cron</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$plugin</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">followUpActions</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span></div></div>
<ul><li>Then, create a different PHP file, myClass.php, where the code that will be executed by the cron will be introduced. Actions the code might do include sending emails, starting cases automatically, assigning permissions, etc.</li></ul>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span> <br />
<span style="color: #000000; font-weight: bold;">class</span> myClass<br />
<span style="color: #009900;">&#123;</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000088;">$workspace</span> <span style="color: #339933;">=</span> SYS_SYS<span style="color: #339933;">;</span><br />
&nbsp;<br />
&nbsp; <span style="color: #000000; font-weight: bold;">function</span> followUpActions<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><br />
&nbsp; <span style="color: #009900;">&#123;</span> <br />
&nbsp; <span style="color: #666666; font-style: italic;">//CODE</span><br />
&nbsp; <span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<h2><span id="Extending_the_ProcessMaker_REST_API">Extending the ProcessMaker REST API</span></h2>
<p>Extend the REST API in ProcessMaker by changing the code inside the deleteCases.php file. Take into consideration that when a plugin is created there are two files, which include:<ul> <li>A folder (deleteCases)</li> <li>A php extension file (deleteCases.php)</li></ul> </p>
<p>Remember that the deleteCases.php file is critically involved when introducing modifications into the plugin. Both files have the same name of the plugin created. Open deleteCases.php in an editor. Observe the image below for guidance.</p>
<p><img src="../sites/default/files/1PM3_PluginDevelopment_ExtendingRA_deleteCasesphp.png"></p>
<p>After the editor has been opened in any remote control program (for example Mobaxterm) the following script must be added:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">enableRestService</span><span style="color: #009900;">&#40;</span><span style="color: #009900; font-weight: bold;">true</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>Add the script in the <strong>public function enable()</strong> section and paste it after the following code:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$this</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">dashletInsert</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div> 
<p>Save the file and close it.</p>
<p><img src="../sites/default/files/2PM3_PluginDevelopment_ExtendingRA_ChangeScript.png"></p>
<p>Now, go into the deleteCases plugin directory:</p>
<span class="geshifilter"><code class="text geshifilter-text">&nbsp;# /opt/plugins/deleteCases</code></span>
<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">opt/<br />
+-- plugins/<br />
&nbsp; &nbsp; +-- deleteCases/</div></div>
<p>Inside deleteCases proceed to create the following new directories: 
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">/</span>src<span style="color: #339933;">/</span>Services<span style="color: #339933;">/</span>Api<span style="color: #339933;">/</span>DeleteCases<span style="color: #339933;">/</span></div></div>
<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">src/<br />
+-- Services/<br />
&nbsp; &nbsp; +-- Api<br />
&nbsp; &nbsp; &nbsp; &nbsp; +-- DeleteCases</div></div>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> Take into consideration that the DeleteCases folder refers to the name of the plugin. This name must have the first letter in uppercase, for example "<strong>P</strong>lugin<strong>N</strong>ame".</font></p>
<p>Then, inside Delete Cases create a file named "Sample.php". The final result of the structure created is the following:</p>
</p>
<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">opt/<br />
+-- plugins/<br />
&nbsp; &nbsp; +-- deleteCases/<br />
&nbsp; &nbsp; &nbsp; &nbsp; +-- src/<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +-- Services/<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +-- Api/<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +-- DeleteCases/<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +-- Sample.php</div></div>
<p><img src="../sites/default/files/4PM3_PluginDevelopment_ExtendingRA_TreeSRCServices.png"></p>
<p>The created Sample.php file will look like the image below:</p>
<p><img src="../sites/default/files/3PM3_PluginDevelopment_ExtendingRA_CreateSamplephp.png"></p>
<p>Once this file has been created in the new directory, edit the file and add the following code:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">namespace</span> Services\Api\DeleteCases<span style="color: #339933;">;</span><br />
<span style="color: #000000; font-weight: bold;">use</span> Luracast\Restler\RestException<span style="color: #339933;">;</span><br />
<span style="color: #000000; font-weight: bold;">use</span> ProcessMaker\Services\Api<span style="color: #339933;">;</span><br />
<span style="color: #000000; font-weight: bold;">use</span> \ProcessMaker\Util<span style="color: #339933;">;</span><br />
<span style="color: #009933; font-style: italic;">/**<br />
* @protected<br />
*/</span><br />
<span style="color: #000000; font-weight: bold;">class</span> Sample <span style="color: #000000; font-weight: bold;">extends</span> Api<br />
<span style="color: #009900;">&#123;</span><br />
<span style="color: #009933; font-style: italic;">/**<br />
* @url GET /sample/hello/:var<br />
*/</span><br />
<span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> hello<span style="color: #009900;">&#40;</span><span style="color: #000088;">$var</span><span style="color: #009900;">&#41;</span><br />
<span style="color: #009900;">&#123;</span><br />
<span style="color: #b1b100;">return</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;response&quot;</span><span style="color: #339933;">=&gt;</span><span style="color: #0000ff;">&quot;hi &quot;</span><span style="color: #339933;">.</span><span style="color: #000088;">$var</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span></div></div>
<p>Observe the image below for guidance: </p>
<p><img src="../sites/default/files/5PM3_PluginDevelopment_ExtendingRA_SamplephpCode.png"></p>
<p>After including the script, save the Sample.php file and start using this extension by enabling the plugin being used in ProcessMaker.</p>

For more information, see <a href="Creating_New_REST_Endpoints.html">Creating New REST Endpoints</a>.

<!--Consuming an Endpoint-->
<h3><span id="Consumings_an_API_Endpoint">Consuming an API Endpoint</span></h3>
<p>After extending the REST API in ProcessMaker it can be consumed by an endpoint. This endpoint, which is a unique URL representing an object, can be tested by using the <a href="https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop?hl=en">Postman</a> extension in Chrome. This test will be a response test of the working endpoint, which is a message in this case. To obtain this message an "access_token" must be obtained and with that token the message will be able to be seen. First of all, to call any ProcessMaker Endpoint, the external application needs to be <a href="../3.1/OAuth_2.html#Registering_an_external_application_to_use_REST">registered in OAuth to obtain the "Client ID" and the "Client Secret"</a>.</p>

<!--<p><img src="/sites/default/files/0PM3_ConsumingAnEndpoint_PostmanEnviroment.png"></p>
<p>Change "GET" to "POST" on the "Enter request URL" section and add the URL with the following structure:</p>
<code>http://{ProcessMaker-Server}/api/1.0/{workspace}/outh2/token</code>
<p>Observe the image below for guidance.</p>
<p><img src="/sites/default/files/1PM3_ConsumingAnEndpoint_URL.png"></p>
<p>Now, click on the "Headers" tab where the authorization to obtain the "access token" will be added.
<p><img src="/sites/default/files/2PM3_ConsumingAnEndpoint_Headers.png"></p> 
<p>For the moment, in the "key" field add "Authorization" and in the "value" field add "Bearer ". After obtaining the token the "Bearer" will be sent with the token next to it.</p>
<p><img src="/sites/default/files/3PM3_ConsumingAnEndpoint_Headers_Authorization.png"></p>
<p>Now, go to the "Body" tab to add the "key" and "values" in the form-data. The best way to do this is by using a <code><a href="http://wiki.processmaker.com/OAuth_2.0#.22password.22_grant_type">grant_type</a></code> where code will be aggregated for the external application that will call the URL.</p>
<p>Read this <a href="http://wiki.processmaker.com/OAuth_2.0#.22password.22_grant_type">documentation</a> as guidance to configure this section.</p>
<p><img src="/sites/default/files/4PM3_ConsumingAnEndpoint_Body.png"></p>
<p>Add the following "key" and "values":</p>
<ul>
  <li><strong>key:</strong> grant_type - <strong>value:</strong> password</li>
  <p><img src="/sites/default/files/5PM3_ConsumingAnEndpoint_Body_GrantType.png"></p>
  <li><strong>key:</strong> scope - <strong>value:</strong> *</li>
  <p><img src="/sites/default/files/6PM3_ConsumingAnEndpoint_Body_Scope.png"></p>
  <li>The "client_id" and the "client_secret" code has been given when registering the application.&nbsp; 
  <p><img src="/sites/default/files/7PM3_ConsumingAnEndpoint_Body_ClientIdClientSecret.png"></p> 
  Obtain them by going to the following URL example: <code>http://{ProcessMaker-Server}/{workspace}/{SYS_LANG}/{Skin}/oauth2/application</code>. This will open a new window with the "User applications" details of the plugin. &nbsp; <p><img src="/sites/default/files/8PM3_ConsumingAnEndpoint_Body_ClientIdClientSecret_URLFindExternalApp.png"></p>Now, click on "My external app" and the "Details" button will become available. Click on it to open a new window within the interface. &nbsp;<p><img src="/sites/default/files/9PM3_ConsumingAnEndpoint_UserApplications_Details.png"></p> When opened the "Application Credentials" will be shown where the "Client ID" and "Client Secret" will be found. Copy both of them. &nbsp; <p><img src="/sites/default/files/10PM3_ConsumingAnEndpoint_UserApplications_DetailClientIdSecret.png"></p> Paste the numbers in Postman: 
    <ul>
     <li><strong>key:</strong> client_id - <strong>value:</strong> PFAOIJJEJCAXVLZDQPLUBUTIPXDJZLQO<li>
     <li><strong>key:</strong> client_secret - <strong>value:</strong> 68255912056f06926602af5091240895<li></li>
     <p><img src="/sites/default/files/11PM3_ConsumingAnEndpoint_AddClientIdSecret.png"></p>
    </ul>
  <li>The following fields will be the "username" of a ProcessMaker user and the "password" of that user: <ul><li><strong>key:</strong> username - <strong>value:</strong>admin</li> <li><strong>key:</strong> password - <strong>value:</strong> admin</li> </ul> <p><img src="/sites/default/files/12PM3_ConsumingAnEndpoint_AddUserNamePass.png"></p> </li>
</ul>
<p>After filling the "Body" tab with all the necessary information, click on the "Send" button to obtain the "Access Token"</p>
<p><img src="/sites/default/files/13PM3_ConsumingAnEndpoint_SendRequest.png"></p>
<p>After clicking on "Send" the response will appear on the bottom part as observed in the image below. The first response is the "access_token", make a copy of the number.</p>
<p><img src="/sites/default/files/14PM3_ConsumingAnEndpoint_AccessToken.png"></p>-->

<p>After getting the access token, go to the Headers tab in Postman and copy the token number next to the Bearer as seen in the image.</p>

<p><img src="../sites/default/files/15PM3_ConsumingAnEndpoint_BearerAccessToken.png"></p>
<p>Change "POST" to "GET" in the dropdown and change the URL field to obtain the message from the Sample.php file. The URL must have the following structure: <code>http://{ProcessMaker-Server}/api/1.0/{workspace}/{PluginName}/{class}/{function}/{var}</code></p>

<p>This will work with the code in the <a href="Plugin_Development.html#Extending_the_ProcessMaker_REST_API">Sample.php</a> file, which contains the following code:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">&nbsp; <span style="color: #000000; font-weight: bold;">&lt;?php</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">namespace</span> Services\Api\DeleteCases<span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">use</span> Luracast\Restler\RestException<span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">use</span> ProcessMaker\Services\Api<span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">use</span> \ProcessMaker\Util<span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #009933; font-style: italic;">/**<br />
&nbsp; * @protected<br />
&nbsp; */</span> &nbsp;<br />
&nbsp; <span style="color: #000000; font-weight: bold;">class</span> Sample <span style="color: #000000; font-weight: bold;">extends</span> Api<br />
&nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; <span style="color: #009933; font-style: italic;">/**<br />
&nbsp; * @url GET /sample/hello/:var<br />
&nbsp; */</span><br />
&nbsp; <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> &nbsp;hello<span style="color: #009900;">&#40;</span><span style="color: #000088;">$var</span><span style="color: #009900;">&#41;</span><br />
&nbsp; <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #b1b100;">return</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;response&quot;</span><span style="color: #339933;">=&gt;</span><span style="color: #0000ff;">&quot;hi &quot;</span><span style="color: #339933;">.</span><span style="color: #000088;">$var</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span> &nbsp;</div></div>
<p>The image below shows an example of how the URL must be constructed:</p>
<code>http://{ProcessMaker-Server}/api/1.0/workflow/plugin-deleteCases/sample/hello/john</code>
<p>Where:</p>
<ul><li>Sample: The PHP class to be called.</li> <li>Hello: A method inside this class.</li> <li>John: The input variable ($var) sent to this method.</li></ul>
<p><img src="../sites/default/files/17PM3_ConsumingAnEndpoint_TheURLObtainMessage.png"></p>
<p>Finally, click on <b>Send</b> to receive the message intended as seen in the image below.</p>
<p><img src="../sites/default/files/18PM3_ConsumingAnEndpoint_MessageResponse.png"></p></div></div></div>  </div>

      <footer>
          </footer>
  
    </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
      </section>
    </div>
  
      
    </div>

      
</div>

 <!---add diego--->
  <div id="download-app-section" class="download-app mobile-none">
			<div class="row">
				<div class="col-md-12">
					<div class="text_app">Download our app</div>
							<a href="https://itunes.apple.com/us/app/processmaker/id992576284?ls=1&amp;mt=8" target="_blank">
								<img src="../themes/thecompany_responsive_theme/images/appstore.png">
							<a href="https://play.google.com/store/apps/details?id=com.colosa.processmaker" target="_blank">
								<img src="../themes/thecompany_responsive_theme/images/playstore.png">				
				</div>
			</div>
  </div>
  <!---end diego--->
<!----add diego----->    
		<div class="logo_processmaker"><a href="http://www.processmaker.com/">
		<img src="../themes/thecompany_responsive_theme/images/logo_processmaker.png"></div>
<!----end diego----->
<div id="footer">
  <div id="footer_wrapper">
      </div>

  <div class="social-media-wrapper">
         <div id="social-media-icons">
       <ul>
       	<div class="text_contact">Contact us</div>
				<div class="text_number">+1-617-340-3377</div>
        <!--<li><a class="rss" href="/rss.xml">rss</a></li> <!--edit diego-->
        <li><a class="facebook" href="http://facebook.com/processmaker/" target="_blank" rel="me">facebook</a></li>
        <li><a class="twitter" href="https://twitter.com/processmaker" target="_blank" rel="me">twitter</a></li>
        <li><a class="gplus" href="https://www.google.com/+ProcessMakerOpenSource" target="_blank" rel="me">Gplus</a></li>
        <li><a class="linkedin" href="https://www.linkedin.com/groups?mostRecent=&amp;gid=3970335&amp;trk=my_groups-tile-flipgrp" target="_blank" rel="me">Linked in</a></li>
        <!--<li><a class="dribbble" href="http://dribbble.com" target="_blank" rel="me">Dribbble</a></li>
        <li><a class="vimeo" href="http://vimeo.com" target="_blank" rel="me">Vimeo</a></li>-->
        <li><a class="youtube" href="https://www.youtube.com/user/processmaker" target="_blank" rel="me">Youtube</a></li>
       </ul>
      </div>
      </div>
  
  <div class="footer_credit">
    <div class="footer_inner_credit">
           <div id="foot"><div class="region region-footer">
  <div id="block-block-2" class="block block-block">

      
  <div class="content">
    <p><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">Automate your Workflow with Business Process Management<br>Software licensed under the <a 1px="" class="external text" href="http://www.gnu.org/licenses/agpl.html" rel="nofollow" style="padding-right: 13px; color:white;">GNU Affero General Public License version 3</a><br>Contact us:&nbsp;<a class="external free" href="mailto:community@processmaker.com" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">community@processmaker.com</a><br><a class="external free" href="https://www.processmaker.com/privacy-statement" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">Privacy Statement</a></font><br><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">© Copyright 2000-2024 ProcessMaker Inc. All rights reserved.</font></p>
  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
</div>
         
   <!-- <div id="copyright">
      <p class="copyright">Copyright &copy; 2024, Documentation@ProcessMaker </p>
      <!--<p class="credits"> Developed by  <a href="http://www.zymphonies.com">Zymphonies</a></p>
      <div class="clear"></div>
    </div>-->
  </div>
  
  </div>
</div>

</div>

<script type="text/javascript">
  /* <![CDATA[ */
  document.write (
    '<img src="https://marketing.processmaker.com/acton/bn/3812/visitor.gif?ts='+ new Date().getTime()+ '&ref='+escape(document.referrer) + '">'
  );
  /* ]]> */
</script>
  
</div>
    <style>
    .center-div{
        width: 100%;        
        margin: 0 auto;
        z-index:10000;
        position:fixed;
        bottom: 0px;
        cursor:pointer;
    }
    .round-popup{
        margin:0 auto;
        font-family: 'Montserrat', sans-serif;
        font-size: 15px;
        font-weight: lighter;
        width: 412px;
        height: 50px;
        padding-top: 7px;
        text-align: center;
        position:relative;
    }
    .round-popup-button{
        position:absolute;
        top: 11px;
        right: 15px;
        background: transparent;
        border:none;
        font-size:15px;
        font-weight:normal;
        line-height:20px;
        width:20px;
        height:20px;
        padding:0;
    }
    .round-background-blue{
        background: url('http://www.processmaker.com/uploads/blue.png')no-repeat;
        color:white;
        
    }
    #box-pm31-button-blue{
        color: rgba(255, 255, 255, 0.5);
    }
    
    #box-pm31-button-blue:active,#box-pm31-button-blue:focus{
        border:none;
        outline:none;
    }
    .round-background-blue a{
        color: white!important;
        text-decoration: none;
        font-size: 15px;
        line-height:45px;
        font-family:Montserrat, sans-serif;
    }
    .round-background-blue span{
        font-weight: bold;
    }
    /*WHITE background*/
    .round-background-white{
        background: url('http://www.processmaker.com/uploads/white.png')no-repeat;
        background-position-x: -9px;        
        color: #3397E1;
    }
    .round-background-white a:hover{
        color: #3397E1!important;
        text-decoration: none;
        font-size: 15px;
    }
    #box-pm31-button-white{
        color: rgba(51, 151, 225, 0.7);
    }
</style>
    <div id="box-pm31" class="center-div" style="display:none;">
        <div class="round-popup round-background-blue">
            <a onclick="ga('send', 'event', 'WikiBlueBanner','click','PM31Release');" href="http://www.processmaker.com/download-processmaker-landing-page">
                <span>ProcessMaker 3.1</span> is Here! Download Now <span style="font-size:20px;font-weigth:normal;">»</span>
            </a>
            <button id="box-pm31-button-blue" class="round-popup-button">&times;</button>
        </div>
    </div>
    <script>

function pmCreateCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function pmReadCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function pmEraseCookie(name) {
    createCookie(name,"",-1);
}



     jQuery(document).ready(function( $ ) {
        $('#box-pm31-button-blue').click(function(e){
                e.stopPropagation();
                $('#box-pm31').slideUp('fast');
                pmCreateCookie('ppcookie','val',10);
            });
        });
        jQuery(window).load(function() {
            if(pmReadCookie('ppcookie') !== 'val'){
                //jQuery('#box-pm31').delay( 2000 ).slideDown('slow');
            }
        });
    </script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">

<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
    // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
    // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.marinsm.com/serve/586a7ec3a2ae6b728400003d.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>

</body>

<!-- Mirrored from wiki.processmaker.com/3.0/Plugin_Development by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Feb 2024 09:06:32 GMT -->
</html>
