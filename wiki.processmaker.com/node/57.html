<!DOCTYPE html>

<!-- Mirrored from wiki.processmaker.com/node/57 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Feb 2024 09:46:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta name="keywords" content="BPM, business process management, workflow, processmaker, business, BPM Windows, BPM Linux, wiki, BPM documentation, BPM FAQ, task documentation, BPM PHP, BPM Open Source, BPM Variables, BPM Installation, BPM Programming, BPM Elements, BPM Concepts, BPM Frequently Asked Questions, BPM 3.0, BPM News, Release notes, DynaForms, BPM Community, BPM Enterprise, BPM Mobile, BPM Responsive Web Design, User Manual, BPM Resources" />
<link rel="alternate" hreflang="en" href="../index.html" />
<link rel="shortcut icon" href="../themes/thecompany_responsive_theme/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="description" content="ProcessMaker is commercial open source workflow and business process management software." />
<meta name="viewport" content="width=device-width" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="../3.0/Report_Tables.html" />
<link rel="shortlink" href="57.html" />
<title>3.0 - Report Tables | Documentation@ProcessMaker</title>
<style type="text/css" media="all">
@import url("../modules/system/system.base2af9.css?s743n7");
@import url("../modules/system/system.menus2af9.css?s743n7");
@import url("../modules/system/system.messages2af9.css?s743n7");
@import url("../modules/system/system.theme2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../modules/aggregator/aggregator2af9.css?s743n7");
@import url("../modules/comment/comment2af9.css?s743n7");
@import url("../modules/field/theme/field2af9.css?s743n7");
@import url("../modules/node/node2af9.css?s743n7");
@import url("../modules/search/search2af9.css?s743n7");
@import url("../modules/toc_filter/toc_filter2af9.css?s743n7");
@import url("../modules/user/user2af9.css?s743n7");
@import url("../modules/views/css/views2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../sites/all/modules/colorbox/styles/default/colorbox_style2af9.css?s743n7");
@import url("../modules/ctools/css/ctools2af9.css?s743n7");
@import url("../sites/all/modules/geshifilter/geshifilter2af9.css?s743n7");
@import url("../modules/panels/css/panels2af9.css?s743n7");
@import url("../modules/nice_menus/css/nice_menus2af9.css?s743n7");
@import url("../modules/nice_menus/css/nice_menus_default2af9.css?s743n7");
@import url("../modules/fivestar/css/fivestar2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../themes/thecompany_responsive_theme/css/style2af9.css?s743n7");
@import url("../themes/thecompany_responsive_theme/css/media2af9.css?s743n7");
</style>
<script type="text/javascript" src="../modules/jquery_update/replace/jquery/1.9/jquery.min4b17.js?v=1.9.1"></script>
<script type="text/javascript" src="../misc/jquery.once7839.js?v=1.2"></script>
<script type="text/javascript" src="../misc/drupal2af9.js?s743n7"></script>
<script type="text/javascript" src="../modules/nice_menus/js/jquery.bgiframef195.js?v=2.1"></script>
<script type="text/javascript" src="../modules/nice_menus/js/jquery.hoverIntent1f6b.js?v=0.5"></script>
<script type="text/javascript" src="../modules/nice_menus/js/superfish099d.js?v=1.4.8"></script>
<script type="text/javascript" src="../modules/nice_menus/js/nice_menusc619.js?v=1.0"></script>
<script type="text/javascript" src="../modules/jquery_update/replace/ui/external/jquery.cookie1683.js?v=67fb34f6a866c40d0570"></script>
<script type="text/javascript" src="../modules/jquery_update/replace/misc/jquery.form.min97e5.js?v=2.69"></script>
<script type="text/javascript" src="../misc/ajax2347.js?v=7.34"></script>
<script type="text/javascript" src="../modules/jquery_update/js/jquery_update241d.js?v=0.0.1"></script>
<script type="text/javascript" src="../modules/toc_filter/toc_filter2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/js/colorbox2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/styles/default/colorbox_style2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/google_analytics/googleanalytics2af9.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","../../www.google-analytics.com/analytics.js","ga");ga("create", "UA-3380652-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript" src="../misc/progress2347.js?v=7.34"></script>
<script type="text/javascript" src="../modules/fivestar/js/fivestar.ajax2af9.js?s743n7"></script>
<script type="text/javascript" src="../modules/fivestar/js/fivestar2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-1.10.2.min2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-ui2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-ui.min2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/custom2af9.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"thecompany_responsive_theme","theme_token":"OCJOLj5qH0mKgJWc7gs8fIvstSIPcN1a17GXBM_662Y","jquery_version":"1.9","js":{"modules\/jquery_update\/replace\/jquery\/1.9\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"modules\/nice_menus\/js\/jquery.bgiframe.js":1,"modules\/nice_menus\/js\/jquery.hoverIntent.js":1,"modules\/nice_menus\/js\/superfish.js":1,"modules\/nice_menus\/js\/nice_menus.js":1,"modules\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"modules\/jquery_update\/replace\/misc\/jquery.form.min.js":1,"misc\/ajax.js":1,"modules\/jquery_update\/js\/jquery_update.js":1,"modules\/toc_filter\/toc_filter.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox.js":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"misc\/progress.js":1,"modules\/fivestar\/js\/fivestar.ajax.js":1,"modules\/fivestar\/js\/fivestar.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-1.10.2.min.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.min.js":1,"themes\/thecompany_responsive_theme\/js\/custom.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/toc_filter\/toc_filter.css":1,"modules\/user\/user.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"modules\/panels\/css\/panels.css":1,"modules\/nice_menus\/css\/nice_menus.css":1,"modules\/nice_menus\/css\/nice_menus_default.css":1,"modules\/fivestar\/css\/fivestar.css":1,"themes\/thecompany_responsive_theme\/css\/style.css":1,"themes\/thecompany_responsive_theme\/css\/media.css":1}},"colorbox":{"opacity":"0.85","current":"{current} of {total}","previous":"\u00ab Prev","next":"Next \u00bb","close":"Close","maxWidth":"98%","maxHeight":"98%","fixed":true,"mobiledetect":true,"mobiledevicewidth":"480px","specificPagesDefaultValue":"admin*\nimagebrowser*\nimg_assist*\nimce*\nnode\/add\/*\nnode\/*\/edit\nprint\/*\nprintpdf\/*\nsystem\/ajax\nsystem\/ajax\/*"},"toc_filter_smooth_scroll_duration":"","googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip","trackColorbox":1},"nice_menus_options":{"delay":"800","speed":"slow"},"ajax":{"edit-vote--2":{"callback":"fivestar_ajax_submit","event":"change","url":"\/system\/ajax","submit":{"_triggering_element_name":"vote"}}}});
//--><!]]>
</script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','../../connect.facebook.net/en_US/fbevents.js');
// Insert Your Facebook Pixel ID below.
fbq('init', '735235999992228');
fbq('track', 'PageView');
</script>
<!-- Insert Your Facebook Pixel ID below. -->
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=735235999992228&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-57 node-type-community-edition">
    
<div class="wrap">

<div id="header_wrapper">
  <div id="inner_header_wrapper">

    <header id="header" role="banner">
      
      <div class="header_inner_wrapper">
        <div class="header_left">
                      <div id="logo">
              <a href="../index.html" title="Home"><img src="../sites/default/files/full-logo.png"/></a>
            </div>
                            <!--  <h1 id="site-title">
            <a href="/" title="Home">Documentation@ProcessMaker</a>
            <div id="site-description"></div>
          </h1> -->
            
        </div>
      </div>
      <div class="header_right">
          <div class="region region-search">
  <div id="block-search-form" class="block block-search">

        <h2 >_</h2>
    
  <div class="content">
    <form action="https://wiki.processmaker.com/node/57" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." placeholder="Search" type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-JSeZJILV90uv-UYuAxWgH95XZQTccZLbQg5QPCyof_Y" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
                  <h1 class="page-title">3.0 - Report Tables</h1>                <p class="page-title-suffix"></p>
                 <div style="margin-top: 5px;"></div>
      </div>
    </header>
    <div class="region-version">
      <span>Version: </span><ul><li><a href="../3.1/Report_Tables.html" class="">3.8</a></li><li><a href="../3.1/Report_Tables.html" class="">3.7</a></li><li><a href="../3.1/Report_Tables.html" class="">3.6</a></li><li><a href="../3.1/Report_Tables.html" class="">3.5</a></li><li><a href="../3.1/Report_Tables.html" class="">3.4</a></li><li><a href="../3.1/Report_Tables.html" class="">3.3</a></li><li><a href="../3.1/Report_Tables.html" class="">3.2</a></li><li><a href="../3.1/Report_Tables.html" class="">3.1</a></li><li><a  class="active-version">3.0</a></li><li><a href="../index.php/2.0/Report_Tables.html" class="">2.0</a></li></ul>    </div>
  </div>
</div>
<!-- <ul class="nice-menu nice-menu-down nice-menu-main-menu" id="nice-menu-0"><li class="menu-506 menu-path-node-1078 first odd "><a href="/PM_Classic" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="menu-319 menu-path-processmakercom-tutorials  even "><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="menu-320 menu-path-node-571  odd "><a href="/3.1/user_guide">User Guide</a></li>
<li class="menu-1138 menu-path-node-572  even "><a href="/3.1/developer_info">Developer Info</a></li>
<li class="menu-1197 menu-path-node-876  odd "><a href="/3.2/sys_administration">Sys Administration</a></li>
<li class="menu-1140 menu-path-node-236  even "><a href="/3.1/resources">Helpful Resources</a></li>
<li class="menu-1141 menu-path-node-554  odd "><a href="/Sitemap">Sitemap</a></li>
<li class="menu-1213 menu-path-sprocessmakergitbookio-processmaker-  even last"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>
-->
  
  <div id="container">
    
    <div class="content-sidebar-wrap">

    <div id="content">

              <!-- <div id="breadcrumbs">
        <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="/">Home</a></div></div> -->
      
      <section id="post-content" role="main">
                                        <div class="region region-content">
  <div id="block-system-main" class="block block-system">

      
  <div class="content">
                          <span property="dc:title" content="3.0 - Report Tables" class="rdf-meta element-hidden"></span>  
      
    
  <div class="content node-community-edition">
    <div class="field field-name-field-how-useful field-type-fivestar field-label-above"><div class="field-label">Please rate how useful you found this document:&nbsp;</div><div class="field-items"><div class="field-item even"><form class="fivestar-widget" action="https://wiki.processmaker.com/node/57" method="post" id="fivestar-custom-widget" accept-charset="UTF-8"><div><div  class="clearfix fivestar-average-text fivestar-average-stars fivestar-form-item fivestar-default"><div class="form-item form-type-fivestar form-item-vote">
 <div class="form-item form-type-select form-item-vote">
 <select id="edit-vote--2" name="vote" class="form-select"><option value="-">Select rating</option><option value="20">Give 3.0 - Report Tables 1/5</option><option value="40">Give 3.0 - Report Tables 2/5</option><option value="60" selected="selected">Give 3.0 - Report Tables 3/5</option><option value="80">Give 3.0 - Report Tables 4/5</option><option value="100">Give 3.0 - Report Tables 5/5</option></select>
<div class="description"><div class="fivestar-summary fivestar-summary-average-count"><span class="average-rating">Average: <span >2.7</span></span> <span class="total-votes">(<span >7</span> votes)</span></div></div>
</div>

</div>
</div><input class="fivestar-submit form-submit" type="submit" id="edit-fivestar-submit" name="op" value="Rate" /><input type="hidden" name="form_build_id" value="form-wZQ_s4365KVHafciaCliNTOjTUbjcbSeii07baAvMTs" />
<input type="hidden" name="form_id" value="fivestar_custom_widget" />
</div></form></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><div style="float: right; margin-left: 5px; background-color: #f9f9f9; border: 1px solid #aaaaaa; padding: 5px;"><center><strong>Contents:</strong> [<a href="#" onclick="var el = document.getElementById('toc');
        var txt = ('innerText' in el)? 'innerText' : 'textContent';
        if (el.style.display=='none') { 
           el.style.display = '';
           document.getElementById('hideLabel')[txt] = 'hide';
        }
        else {
	        el.style.display = 'none';
           document.getElementById('hideLabel')[txt] = 'show';
        }"><span id="hideLabel">hide</span></a>]</b></center><div id="toc" ><ol class="toc">
<li class="toc"><a href="#Overview">Overview</a></li>
<ol class="toc">
<li class="toc"><a href="#Unsupported_fields">Unsupported Fields</a></li>
</ol>
<li class="toc"><a href="#Creating_Report_Tables">Creating Report Tables</a></li>
<li class="toc"><a href="#Viewing_data_in_Report_Tables">Viewing Data of a Report Table</a></li>
<ol class="toc">
<li class="toc"><a href="#Searching_data_inside_a_Report_Table">Searching Data Inside a Report Table</a></li>
</ol>
<li class="toc"><a href="#Editing_Report_Tables">Editing Report Tables</a></li>
<li class="toc"><a href="#Deleting_Report_Tables">Deleting Report Tables</a></li>
<li class="toc"><a href="#Regenerating_Data_Report">Regenerating Data Reports</a></li>
<li class="toc"><a href="#Importing_Report_Tables">Importing Report Tables</a></li>
<li class="toc"><a href="#Exporting_Report_Tables">Exporting Report Tables</a></li>
<li class="toc"><a href="#Exporting_System_Variables">Including System Variables in Report Tables</a></li>
<li class="toc"><a href="#Querying_Report_Tables">Querying Report Tables</a></li>
<ol class="toc">
<li class="toc"><a href="#Querying_Report_Tables_in_DynaForms">Querying Report Tables in Dynaforms</a></li>
<li class="toc"><a href="#Querying_Report_Tables_in_Triggers">Querying Report Tables in Triggers</a></li>
<li class="toc"><a href="#Querying_the_Current_Case_in_DynaForms">Querying the Current Case in Dynaforms</a></li>
</ol>
<li class="toc"><a href="#Exporting_Grids_and_Checkgroups">Exporting Grids and Checkgroups</a></li>
<ol class="toc">
<li class="toc"><a href="#Storing_as_JSON_strings">Storing as JSON Strings</a></li>
<li class="toc"><a href="#Storing_grids_in_a_separate_Report_Table">Storing Grids in a Separate Table</a></li>
</ol>
<li class="toc"><a href="#Exporting_data_in_Report_Tables">Exporting Data in Report Tables</a></li>
<ol class="toc">
<li class="toc"><a href="#Exporting_Report_Tables_with_triggers">Exporting Report Tables with Triggers</a></li>
</ol>
</div></div>

<h2><span id="Overview">Overview</span></h2>
<p>The information entered into Dynaform fields and case variables are <a href="../3.0/Triggers.html#Variable_Storage" title="3.0/Triggers">stored as serialized strings</a>, which are not easy to access with database queries. Report Tables are designed to put case data into a format that can be easily accessed by standard SQL queries or external applications. Report Tables also allows case data to be easily queried in Dynaform fields and to be shared with external reporting tools such as Crystal Reports, Jasper Reports and Pentaho Reporting.</p>

<p>Each time a new case is created, a new record will be added to the Report Table. This record will be updated each time a Dynaform is submitted in the case.</p>

<h3><span id="Unsupported_fields">Unsupported Fields</span></h3>
<p>The following fields cannot be used in report tables because they can contain multiple values and are stored differently:</p>
<ul>
    <li><a href="../3.0/Checkbox_and_Checkbox_Group.html#Checkgroup">Checkgroup</a>. To export checkboxes, read this <a href="#Exporting_Grids_and_Checkgroups">section</a>.</li>
    <li><a href="../3.0/Grid_Control.html">Grids</a>. To export grids, read this <a href="#Exporting_Grids_and_Checkgroups">section.</a></li>
</ul>

<h2><span id="Creating_Report_Tables">Creating Report Tables</span></h2>

<p>
<table border="1" cellpadding="1" cellspacing="1" style="width: 70%;">
<tbody>
<tr>
<td>
<font color="red"><b>Warning:</b></font> <font color=dimgrey> Before creating a report table, remember that the variables included in your process must follow the rules in the <a href="../Best_Practices/Process_Development.html#Naming_Variables">Naming Variables</a> section to avoid conflicts.</font>
</td>
</tr>
</tbody>
</table>
</p>

<p>To create a new Report Table, open the process where it will be used, then go to the Process Objects toolbox at the right-hand side of the process map. Hover the pointer of the mouse over the <img src="../sites/default/files/ActionBarPlusIcon.png"> icon of the <strong>Report Tables</strong> option and click on the <strong>Create</strong> button that is displayed to the left:</p>
<p><img src="../sites/default/files/BPMReportTableMainToolboxVersion3.png" alt=""></p>
<p>A window will be displayed to define the properties of the new report table:</p>
<p><img src="../sites/default/files/3.1ReportTableInterface.png" alt=""></p>
<ul>
    <li><strong>Table Name</strong>: Enter the name of the Report Table.</li>
    <li><strong>Description</strong>: Enter a brief description about the report table's content.</li>
    <li><strong>Type</strong>: Select what type of Dynaform will be exported to the report table:
        <ul>
            <li>
            <p><strong>Global</strong>: Export data stored in variables used by Dynaform fields and/or any case variables defined in triggers. This option allows individual variables to be selected for export.</p>

            <p>After selecting this option, select which case variables will be exported by clicking the field name and clicking the <img src="../sites/default/files/3.1ReportTableInterfaceIcon1.png"> button. To select multiple fields, hold down the CONTROL or SHIFT keys while clicking on the field names and click on <img src="../sites/default/files/3.1ReportTableInterfaceIcon1.png"> to add the selected fields to the report table. Click on <img src="../sites/default/files/3.1ReportTableInterfaceIcon2.png"> to add all the fields to the report table. To remove a field from the report table, select the field name in the right-hand table and click on <img src="../sites/default/files/3.1ReportTableInterfaceIcon11.png"> or click on <img src="../sites/default/files/3.1ReportTableInterfaceIcon22.png"> to remove all the variables from the report table.</p>

             <p><img src="../sites/default/files/3.1ReportTableInterfaceGlobal.png"></p>

            <p> <span style="color: green"><strong>Note:</strong></span> <span style="color: dimgrey;">Grid variables, array variables (which are used by checkgroups) and system variables will not appear in the list. If needing to export these variables, see <a href="#Exporting_Grids_and_Checkgroups">this section</a>.</span></p>

            <p>Besides the fields selected by the user, three system variables fields are included by default to know what case is related to which field values in the <tt>wf_&lt;workspace&gt;.APPLICATION</tt> table.</p>

            <p><img src="../sites/default/files/3.1ReportTableInterfaceGlobalTableCreated.png"></p>
            <p>
            <ul>
                <li><b>APP_UID:</b> The case unique ID. This value is useful to obtained the case information. This field can NOT be removed from the report table.</li>
    <li><b>APP_NUMBER:</b> The case number. Report tables use this value to relate the case information with the case number. This field can NOT be removed from the report table.</li>
    <li><b>APP_STATUS:</b> The case status. This field can be removed from the report table if desired. </li>
</ul>
</p>
</li>
</ul>
</li>
<li><strong>DB Connection</strong>: Select the database connection where the new Report Table will be stored:
        <ul>
            <li><strong>Workflow</strong>: The report table will be stored in the <strong><tt>wf_&lt;WORKSPACE&gt;</tt></strong> database for the current workspace.</li>
<li><strong>Report</strong>: This option will only appear if using a workspace was imported from ProcessMaker version
2 which used 3 databases per workspace. The report table will be stored in the database for the current workspace.</li>
<li><strong><i>Another database</i></strong>: The Report Table can be stored in any database that has a
                <a href="../3.0/Database_Connections.html">Database Connection</a>.</li>
</ul>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">It is only possible to create Report Tables in MySQL databases. The list will only show connections to those databases even if the project has connections to other DBMS.</font></p>
</li>
</ul>
<p>The order of the fields can be changed by dragging and dropping a field from one position to another in the list. It is possible to change the <b>Field Name</b>, <b>Field Label</b>, <b>Type</b>, <b>Size</b> and <b>Index</b> properties of a field by double clicking the row to edit it.</p>

<p><img src="../sites/default/files/RenameReportTableFields.png"></p>

<p>Marking the <b>Index</b> option will index the field so it can be searched faster. It is NOT recommended to reduce the size of VARCHAR fields, because they only use as much space as needed to hold their data, so there is no benefit to reducing the size of the field (VARCHAR fields hold up to 255 characters).</p>


<p>By default, the field names are in upper case, but they can be changed to lower case. Remember that MySQL databases are case-sensitive by default in Linux/UNIX and case-insensitive by default in Windows. It is generally recommended to leave field names in upper case if designing processes which may need to be moved between Windows and Linux/UNIX servers.</p>

<p style="margin-left:25px;"><font color=green><b>Note:</b></font> <font color=dimgrey>The fields in a Report Table cannot be one of the reserved words used by MySQL or PHP. ProcessMaker prevents reserved words from being used, but if using a previous version, make sure not to name the Report Table one of these <a href="http://dev.mysql.com/doc/refman/5.5/en/keywords.html" target="_blank">MySQL reserved words</a>:<br>
<b><tt>ALTER, CLOSE, COMMIT, CREATE, DECLARE, DELETE, DROP, FETCH, FUNCTION, GRANT, INDEX, INSERT,
OPEN, REVOKE, ROLLBACK, SELECT, SYNONYM, TABLE, UPDATE, VIEW, APP_UID, ROW, PMTABLE, TIME</tt></b><br>
Or one of these <a href="http://php.net/manual/en/reserved.php">reserved words</a> in PHP:<br>
<b><tt>case, catch, cfunction, class, clone, const, continue, declare, default, do, else, elseif, enddeclare, endfor, endforeach,
endif, endswitch, endwhile, extends, final, for, foreach, function, global, goto, if, implements, interface, instanceof, private,
namespace, new, old_function, or, throw, protected, public, static, switch, xor, try, use, var, while</tt></b></font></p>

<p>When done defining the new report table, click on the <b>Create</b> button at the end of the panel and the new table will be created and populated with data from all the existing cases in the current process. The new table will be added to the list of available Report Tables (not only inside the project but, it will be also listed in <strong>Admin > Settings > PM Tables</strong>).</p>

<p><img alt="" height="137" src="../sites/default/files/NewReportTableCreated2.5.png" width="900"></p>

<p>The new table will be stored in the database with a <code>PMT_</code> prefix. (e.g. PMT_CONTACT_INFO).  Remember to include <code>PMT_</code> in the table name when using the table in SQL queries and external reports applications.</font></p>

<h2><span id="Viewing_data_in_Report_Tables">Viewing Data of a Report Table</span></h2>
<p>To view the data stored in a Report Table, click on the <strong>Report Tables</strong> option in the Process Objects toolbar of the process map to see a list of the available Report Tables.</p>

<p><img src="../sites/default/files/BPMReportTableProcessMapVersion3.png"></p>

<p>A window will open with a list of the existing report tables.</p>

<p><img src="../sites/default/files/3.1ReportTableListTables.png" alt=""></p>

<p>Select a report rable from the list and click on the <strong>Data</strong> button in the upper menu. A window will open displaying the content of the report table, which is the information filled in while running cases.</p>

<p><img src="../sites/default/files/3.1ReportTableRequestData.png" alt=""></p>

<h3><span id="Searching_data_inside_a_Report_Table">Searching Data Inside a Report Table</span></h3>

<p>To find specific values inside a report table, enter a text to be searched in the <b>Search</b> box, which is located in the upper right-hand corner of the Data window. The search criteria can either contain text or numbers, but it is not possible to include special characters, such as <code>&lt;</code> (less than), <code>&gt;</code> (greater than), <code>%</code> (any number of characters), etc.</p>

<p><img alt="" src="../sites/default/files/ReportTableShowData.png"></p>

<p>The search criteria inserted can be searched in the following columns:</p>
<ul>
    <li><strong>APP_UID:</strong> check the <strong>Search also in the APP_UID field</strong> to include this column in the search. Search for the case's unique ID number, which is 32 hexadecimal characters long. It is possible to search for only part of the number. For instance, the first 5 numbers in a UID: <code>55101</code>. </li>
    <li><strong>APP_NUMBER:</strong> Search a case number.</li>
    <li><strong>APP_STATUS:</strong> Search the case status, which can be <code>TO_DO</code>, <code>DRAFT</code>,
        <code>PAUSED</code>, <code>CANCELLED</code>, <code>COMPLETED</code> or <code>DELETED</code></li>
    <li><strong><i>Other fields</i>:</strong> Searches can be conducted in any of the other fields in the report table,
        except for date and datetime fields, which are not supported as search criteria.</li>
</ul>

<h2><span id="Editing_Report_Tables">Editing Report Tables</span></h2>
<p>If a new field is added to a master Dynaform, or its field name is changed, the definition of the Report Table will not automatically update to include the new/changed field. The definition of the Report Table will have to be manually updated to include the new/changed field.</p>

<p>For example, using the <a href="#Exporting_System_Variables">trigger above</a>, change the <tt>caseTask</tt> name to <tt>caseTaskID</tt> and also change its name on the trigger to <tt>@@caseTaskID</tt>. Then, go to <b>Report Tables</b> and select the name of the Report Table. Click <strong>Edit</strong> and the modified field will display itself on the list of Dynaforms Fields as it is taken as a new field. Add it to the fields of the Report Table and remove the old field from the list.</span></p>

<p>If a field is added or changed in a grid form, then the existing Report Table will have to be deleted and then recreated to include the new/changed fields. In recent versions of ProcessMaker it is not necessary to delete and create the Report Table, the new field or information will be updated automatically on the database.</p>

<h2><span id="Deleting_Report_Tables">Deleting Report Tables</span></h2>
<p>To delete a Report Table, open the process and click on the <strong>Report Tables</strong> option of the Process Objects toolbox. In the list, click on the <strong>Delete</strong> button of the Report Table to remove it from the list and delete its table in the <strong><tt>wf_&lt;WORKSPACE&gt;</tt></strong> database, depending on the DB Connection previously chosen.</p>

<h2><span id="Regenerating_Data_Report">Regenerating Data Reports</span></h2>
<p>Use this option to manually update any data modified while running cases. Go to the list of Report Tables and choose the one to regenerated by clicking on <strong>Data</strong>. After the data for the specific Report Table displays, click on the <strong>Regenerate Data Report</strong> option on the upper side of the window.</p>

<p>Consider that while cases are being created and routed, data is created and updated in the Report Tables, therefore, it is not necessary to use the Regenerate Data Report each time.</p>

<p><img alt="" src="../sites/default/files/RegenerateDataReportOption.png"></p>

<h2><span id="Importing_Report_Tables">Importing Report Tables</span></h2>
<p>To import a Report Table, click on the <strong>Report Tables</strong> option of the Process Objects toolbox and the list of Report Tables available will be displayed. Select one and click on the <strong>Import</strong> option, in the window that opens click on the file button to select a Report Table from the computer. Remember that as well as PM tables, Report Tables have the <tt>.pmt</tt> extension.</p>
<p><img alt="" src="../sites/default/files/ImportReportTable.png"></p>

<p>Once the Report Table has been imported automatically, the corresponding table will be created on the <strong><tt>wf_&lt;WORKSPACE&gt;</tt></strong> (generally) database, depending on the DB connection previously chosen</p>

<p>When importing, if the option <strong>Overwrite if exist?</strong> is not checked, and if the Report Table exists, a new Report Table will be created with the current date and time. For example, if the Report Table <tt>PMT_RPT_CREDIT_CARD</tt> was created, and a Report Table with the same name is imported, the imported Report Table will be named PMT_RPT_CREDIT_CARD_20160824112519, where the numbers are:</p>
<ul>
    <li><strong>Date:</strong> 20160824: Year-Month-Day</li>
</ul>
<ul>
    <li><strong>Time:</strong> Hour-Minute-Seconds</li>
</ul>

<div style="margin-left:25px">
    <p><strong><font color="#009688">From Version:</font></strong> <font color="dimgray"> 3.0.1.8 on. </font> The <b>Overwrite if exists?</b> checkbox is no longer available and the import procedure is the following:</p>
    <p><img alt="" src="../sites/default/files/PM3_ReportTableImport.png"></p>

    <p>When importing, if the Report Table is related to a different process, a warning message appears with the following options:</p>
    <ul>
        <li>Import and relate it to the current process: The Report Table will be imported and related to the current
            process.
        </li>
        <li>Do not import the Report Table: Cancels the import of the Report Table.</li>
    </ul>
    <p><img alt="" src="../sites/default/files/PM3_ReporTableRelatetotheProcess.png"></p>

    <p>If the Report Table(s) already exist, a window will show the following options for each conflicted Report Table:</p>
    <p><img alt="" src="../sites/default/files/PM3_ReportTableexists3options.png"></p>
    <ul>
        <li>Create a new copy of the Table: The Report Table will be imported with a name composed of the original
            name plus the current datetime.
            <p><img alt="" src="../sites/default/files/PM3_ReportTableImportAlternativeName.png"></p>
        </li>
        <li>Overwrite the existing Table: The existing PM Table will be overwritten by the imported one.</li>
        <li>Do not import the Table.</li>
    </ul>
    </p>

    <p>It is also possible to import a Report Table by going to <strong>Admin &gt; Settings &gt; PM Tables</strong> and selecting the <b>Import</b> option in the toolbar.</p>
    <p><img alt="" src="../sites/default/files/PM3_ReporTableImportfromAdmin.png"></p>

    <p>However, this option is only available for Report Tables related to processes in the current workspace. Otherwise, the following error message will display:</p>
    <p><img alt="" src="../sites/default/files/PM3_ReporTableImportfromAdminNOTRelated.png"></p>
</div>
<h2><span id="Exporting_Report_Tables">Exporting Report Tables</span></h2>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">It is recommended to export PM Tables and Report Tables separately.</font></p>

<p>To export a Report Table, click on the <strong>Report Tables</strong> option of the Process Objects toolbar and the list of Report Tables available will be displayed. Select the report table that will be imported and click on <strong>Export</strong>. A window with two options will be displayed:</p>
<ul>
    <li><strong>Schema</strong>: By checking this option, the Report Table will be exported with the structure of the fields but no data.</li>
    <li><strong>Data</strong>: Data export for Report Tables is not allowed because the data comes from cases, and  information stored in cases can't be exported.</li>
</ul>
<p>Like PM tables, the export files for Report Tables have the <b><tt>.pmt</tt></b> extension.</p>
<p><img alt="" src="../sites/default/files/ExportPMTable.png"></p>

<h2><span id="Exporting_System_Variables">Including System Variables in Report Tables</span></h2>
<p><a href="../3.0/Triggers.html#System_Variables_in_Triggers" title="Triggers">System variables</a>, such as @@TASK or @@USER_LOGGED, are not available in the list of variables that can be included in Report Tables. These values may be useful for queries based upon a particular user, task, process, etc.</p>
<p>To export a system variable, create a trigger that will assign the value of a system variable to a case variable. For example:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>caseUserLogged <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>caseUserName <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>USR_USERNAME<span style="color: #339933;">;</span><br />
<span style="color: #339933;">@%</span>caseIndex <span style="color: #339933;">=</span> <span style="color: #339933;">@%</span>INDEX<span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>caseTask <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>TASK<span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>caseProcess <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>PROCESS<span style="color: #339933;">;</span></div></div>

<p>Then, set the trigger to fire at various points in the process where the Export Table should be updated with new values for the system variables. Remember that the values of system variables change over the course of a case, so the trigger should be fired whenever the new values need to be exported to the Report Table. After defining the trigger, change the definition of the Report Table to include the new case variables which were defined in the trigger.</p>

<h2><span id="Querying_Report_Tables">Querying Report Tables</span></h2>
<p>Report Tables can be queried with the <a href="../3.0/DynaForm_Field_Properties.html#SQL">Sql</a> property in Dynaform fields or by calling the <a href="../3.0/ProcessMaker_Functions.html#executeQuery.28.29">executeQuery()</a> function in triggers.</p>
<p>To query a Report Table in a Dynaform field, first set the <a href="../3.0/DynaForm_Field_Properties.html#DB_Connection">SQL Connection</a> property for the field to the database where the Report Table is stored. If it is in the <b><tt>wf_&lt;WORKSPACE&gt;</tt></b> database for the current workspace, then either set it to <b>workflow</b> or leave it blank. If found in the <b><tt>rp_&lt;WORKSPACE&gt;</tt></b> database for the current workspace, then select <b>report</b> (for workspaces migrated from version 2 to version 2.8 or higher). For any other database (including databases in other workspaces), first create a <a href="../3.0/Database_Connections.html">Database Connection</a> to that database, and then select it in the <b>Sql Connection</b> property.</p>

<h3><span id="Querying_Report_Tables_in_DynaForms">Querying Report Tables in Dynaforms</span></h3>
<p>In the field's <b>Sql</b> property enter a <code>SELECT</code> statement to query the Report Table. Remember that the Report Table has the prefix <code>PMT_</code> in its table name. If populating a dropdown, listbox, suggest box, checkgroup or radiogroup, remember that the SQL query needs to return two fields, where the first field is the <i>value</i> and the second field is the <i>label</i> for each option.</p>

<div style="margin-left:25px;"><p><b>Example:</b><br>
Get a list of all the clients used in previous cases for a suggest box, so that users do not have to remember the full name of clients when filling in a form. If the Report Table is named <code>CLIENTS</code> and has the fields <code>CLT_ID</code>, <code>CLT_FIRSTNAME</code> and <code>CLT_LASTNAME</code>, then the following query can be used to populate the suggest box:</p>
    <div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> <span style="color: #993333; font-weight: bold;">DISTINCT</span> CLT_ID<span style="color: #66cc66;">,</span> CONCAT<span style="color: #66cc66;">&#40;</span>CLT_FIRSTNAME<span style="color: #66cc66;">,</span> <span style="color: #ff0000;">' '</span><span style="color: #66cc66;">,</span> CLT_LASTNAME<span style="color: #66cc66;">&#41;</span> <span style="color: #993333; font-weight: bold;">FROM</span> PMT_CLIENTS <span style="color: #993333; font-weight: bold;">ORDER</span> <span style="color: #993333; font-weight: bold;">BY</span> CLT_LASTNAME</div></div>
    <p><code>DISTINCT</code> is used to eliminate duplicates and the second field is a concatenation of the client's first and last names, so both can be displayed in the suggest box.</p>
</div>

<h3><span id="Querying_Report_Tables_in_Triggers">Querying Report Tables in Triggers</span></h3>
<p>The <a href="../3.0/ProcessMaker_Functions.html#executeQuery.28.29">executeQuery()</a> function can be used to query Report Tables in <a href="../3.0/Triggers.html">Triggers</a>. In the Report Table, each case is stored as a separate record and the table has the <code>APP_UID</code>, <code>APP_NUMBER</code> and <code>APP_STATUS</code> fields, so that it is possible to search for the data from specific cases.

<div style="margin-left:25px;"><p><b>Example:</b><br>
This example shows how to populate a grid with data from the current case and from all the other cases whose status is currently <code>TO_DO</code>. It queries a Report Table named <code>PRODUCTS</code> which has the fields <code>PRO_NAME</code>, <code>PRO_TYPE</code> and <code>PRO_DESC</code>. It is stored in a remote database which has a Database Connection with the UID of "17848610856943f64e405e8058194105".</p>
<p>First, create a grid named "products", which contains the textbox fields "productName", "productType" and "productDescription". Then, create a trigger with the following code to populate the <code>@=products</code> variable which is used by this grid:
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$db</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;17848610856943f64e405e8058194105&quot;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//set to UID of the database connection</span><br />
<span style="color: #000088;">$currentCase</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT PRO_NAME AS productName, PRO_TYPE AS productType, PRO_DESC AS productDescription<br />
&nbsp; &nbsp;FROM PMT_PRODUCTS WHERE APP_UID = '<span style="color: #006699; font-weight: bold;">$currentCase</span>' OR APP_STATUS = 'TO_DO' &quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@=</span>products <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #339933;">,</span> <span style="color: #000088;">$db</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>Note that it is not possible to insert case variables in the middle of strings like normal PHP variables, so first assign the case ID in @@APPLICATION to the $currentCase variable so it can be inserted into the SQL query. Because the fields in the Report Table have different names than the fields in the grid, they have to be renamed using <code>AS</code>. Remember that field names in grids are case sensitive, so "productType" is different than "ProductType" and "PRODUCTTYPE". </p>

<p>The database query returns an associative array of associative arrays, which is also how grids are stored in ProcessMaker. For example, this database query might return the following data which is placed in the grid:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'1'</span> <span style="color: #339933;">=&gt;</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;productName&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;E-Z PencilMate&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;productType&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Office supplies&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;productDescription&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Holds multiple pencils&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'2'</span> <span style="color: #339933;">=&gt;</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;productName&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Brite 30W Lamp&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;productType&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Office furniture&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;productDescription&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Upright lamp with shade&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'3'</span> <span style="color: #339933;">=&gt;</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;productName&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Sleeptite pillow&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;productType&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Bed assessory&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;productDescription&quot;</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;Goose feather pillow&quot;</span><span style="color: #009900;">&#41;</span><br />
<span style="color: #009900;">&#41;</span></div></div>

<p>Set the above trigger to fire BFORE the Dynaform that contains the "products" grid. When the Dynaform is displayed while running a case, the grid should be populated with the data from the current case and from previous cases with "TO_DO" status.
</div>

<h3><span id="Querying_the_Current_Case_in_DynaForms">Querying the Current Case in Dynaforms</span></h3>
<p>To use the unique ID of the current case in an SQL query of a Report Table, create a hidden field in the Dynaform, which is named "APPLICATION". When the Dynaform is rendered while running a case, the unique ID of the current case stored in the <code>@@APPLICATION</code> system variable will automatically be placed in the "APPLICATION" field where it can be used in SQL queries.</p>

<div style="margin-left:25px;"><p><b>Example:</b><br>
A textarea field needs to display all the users who have worked on the current case in a dropdown box, so that the current user can select the user who will be assigned to the next task in the process. The following SQL query looks up all the users who have worked on the current case by using the current case's UID stored in the "APPLICATION" hidden field.
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> <span style="color: #993333; font-weight: bold;">DISTINCT</span> U<span style="color: #66cc66;">.</span>USR_UID<span style="color: #66cc66;">,</span> CONCAT<span style="color: #66cc66;">&#40;</span>U<span style="color: #66cc66;">.</span>USR_FIRSTNAME<span style="color: #66cc66;">,</span> <span style="color: #ff0000;">' '</span><span style="color: #66cc66;">,</span> U<span style="color: #66cc66;">.</span>USR_LASTNAME<span style="color: #66cc66;">,</span> <span style="color: #ff0000;">' ('</span><span style="color: #66cc66;">,</span> U<span style="color: #66cc66;">.</span>USR_USERNAME<span style="color: #66cc66;">,</span> <span style="color: #ff0000;">')'</span> <span style="color: #66cc66;">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #993333; font-weight: bold;">FROM</span> USERS U<span style="color: #66cc66;">,</span> APP_DELEGATION AD <span style="color: #993333; font-weight: bold;">WHERE</span> AD<span style="color: #66cc66;">.</span>APP_UID <span style="color: #66cc66;">=</span> @@APPLICATION <span style="color: #993333; font-weight: bold;">AND</span> AD<span style="color: #66cc66;">.</span>USR_UID <span style="color: #66cc66;">=</span> U<span style="color: #66cc66;">.</span>USR_UID</div></div>
</div>

<h2><span id="Exporting_Grids_and_Checkgroups">Exporting Grids and Checkgroups</span></h2>
<p>Grids and checkgroups are designed to hold multiple values, so they can't be stored very easily in Report Tables. It is possible to create a trigger which converts the values stored in these fields to JSON Strings and stores them in string variables. These string variables can be included in the Report Table, like other variables. The difficulty of storing them as JSON Strings is that they have be converted from JSON to an object when needing to read them. This means that the values can't be viewed easily using just the database software. Almost all programming languages have a <a href="http://www.json.org/">JSON decode function</a>, such as <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse">JSON.parse()</a> in JavaScript, <a href="http://php.net/manual/en/function.json-decode.php">json_decode()</a> in PHP and <a href="https://docs.python.org/2/library/json.html">json.loads()</a> in Python, but this means that code will have to be executed before viewing the values.

<p>The other option is to manually create another table in the database to hold the values stored in these fields. A trigger can be used to export the variables used by grids and checkgroups to this table. Using a separate table allows the values to be viewed with ordinary database software and accessed with normal SQL queries. See the following instructions to implement either of these solutions.</p>

    <h3><span id="Storing_as_JSON_strings">Storing as JSON Strings</span></h3>
    <p>To store the values of checkgroups and grids as JSON Strings, first add an <a href="../3.0/Variables.html">additional string variable</a> in the graphical interface for each checkgroup or grid. Then, add a trigger that is set to fire <i>after</i> the Dynaform that contains the checkgroups and grids. Convert the values of the checkgroups and grids into JSON Strings and save them in the string variables. Then, add those string variables to the Report Table.</p>

    <div style="margin-left:25px" <p><b>Example:</b><br>
        <p>A process has the "selectCountry" checkgroup and the "clientsList" grid:</p>
        <img src="../sites/default/files/CheckgroupGridExamples.png">
        <p>Add two string variables named "selectCountryValuesJson" and "selectCountryLabelsJson" to hold the values and labels of the selected options in the "selectCountry" checkgroup. Also add a string variable named "clientsListJson" to hold the grid converted to a JSON Strings.</p>
        <img src="../sites/default/files/CheckgroupGridVariables.png">
        <p>Then, create the following trigger to store the values of these grids as JSON Strings in the string variables:</p>
        <div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">//export the values of a checkgroup as a JSON string</span><br />
<span style="color: #339933;">@@</span>selectCountryValuesJson <span style="color: #339933;">=</span> <a href="http://php.net/json_encode"><span style="color: #990000;">json_encode</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>selectCountry<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>selectCountryLabelsJson <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>selectCountry_label<span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//already a JSON string</span><br />
<span style="color: #666666; font-style: italic;">//export a grid as a JSON string:</span><br />
<span style="color: #339933;">@@</span>clientsListJson <span style="color: #339933;">=</span> <a href="http://php.net/json_encode"><span style="color: #990000;">json_encode</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>clientsList<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
        <p>Set this trigger to execute <i>after</i> the Dynaform that contains the checkgroup and grid. Then add the selectCountryValuesJson, selectCountryLabelsJson and clientsListJson variables to the Report Table so they will automatically be exported by ProcessMaker when cases are run.</p>
        <img src="../sites/default/files/CheckgroupGridAsJsonInReportTable.png">
    </div>
    <p>The values and labels selected in a checkbox are generally not difficult to read with the human eye. For example, the "selectCountryJson" and "selectCountryJsonLabels" variables might contain:
<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;"><span style="color: #009900;">&#91;</span><span style="color: #3366CC;">&quot;CA&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;BR&quot;</span><span style="color: #009900;">&#93;</span></div></div>
and:
<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;"><span style="color: #009900;">&#91;</span><span style="color: #3366CC;">&quot;Canada&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;Brazil&quot;</span><span style="color: #009900;">&#93;</span></div></div>
The problem with grids, however, is that their JSON Strings can be difficult to read with the human eye. For example, the "clientsListJson" variable might contain:
<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;"><span style="color: #009900;">&#123;</span><span style="color: #3366CC;">&quot;1&quot;</span><span style="color: #339933;">:</span><span style="color: #009900;">&#123;</span><span style="color: #3366CC;">&quot;name&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;E-Z Accounting&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;name_label&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;E-Z Accounting&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;address&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;287 W. Oak Av.<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>Long Branch NJ 87364&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;address_label&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;287 W. Oak Av.<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>Long Branch NJ 87364&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;hasContract&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;1&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;hasContract_label&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;true&quot;</span><span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;2&quot;</span><span style="color: #339933;">:</span><span style="color: #009900;">&#123;</span><span style="color: #3366CC;">&quot;name&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;Swift Cleaning Corp&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;name_label&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;Swift Cleaning Corp&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;address&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;2736 W. 11th<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>West Palm Beach FL 38725&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;address_label&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;2736 W. 11th<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>West Palm Beach FL 38725&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;hasContract&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;0&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;hasContract_label&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;false&quot;</span><span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;3&quot;</span><span style="color: #339933;">:</span><span style="color: #009900;">&#123;</span><span style="color: #3366CC;">&quot;name&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;Trusty Lawn Services&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;name_label&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;Trusty Lawn Services&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;address&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;371 Main St.<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>Cloverdale IN 46135&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;address_label&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;371 Main St.<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>Cloverdale IN 46135&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;hasContract&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;1&quot;</span><span style="color: #339933;">,</span><span style="color: #3366CC;">&quot;hasContract_label&quot;</span><span style="color: #339933;">:</span><span style="color: #3366CC;">&quot;true&quot;</span><span style="color: #009900;">&#125;</span><span style="color: #009900;">&#125;</span></div></div>
<p>It is easier to read when spacing is added:
<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;"><span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #3366CC;">&quot;1&quot;</span><span style="color: #339933;">:</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;name&quot;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #3366CC;">&quot;E-Z Accounting&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;name_label&quot;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #3366CC;">&quot;E-Z Accounting&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;address&quot;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;287 W. Oak Av.<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>Long Branch NJ 87364&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;address_label&quot;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; <span style="color: #3366CC;">&quot;287 W. Oak Av.<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>Long Branch NJ 87364&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;hasContract&quot;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;1&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;hasContract_label&quot;</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;true&quot;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #3366CC;">&quot;2&quot;</span><span style="color: #339933;">:</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;name&quot;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #3366CC;">&quot;Swift Cleaning Corp&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;name_label&quot;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #3366CC;">&quot;Swift Cleaning Corp&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;address&quot;</span> <span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #3366CC;">&quot;2736 W. 11th<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>West Palm Beach FL 38725&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;address_label&quot;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; <span style="color: #3366CC;">&quot;2736 W. 11th<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>West Palm Beach FL 38725&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;hasContract&quot;</span> <span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp;<span style="color: #3366CC;">&quot;0&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;hasContract_label&quot;</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;false&quot;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #3366CC;">&quot;3&quot;</span> <span style="color: #339933;">:</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;name&quot;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #3366CC;">&quot;Trusty Lawn Services&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;name_label&quot;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #3366CC;">&quot;Trusty Lawn Services&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;address&quot;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;371 Main St.<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>Cloverdale IN 46135&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;address_label&quot;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; <span style="color: #3366CC;">&quot;371 Main St.<span style="color: #000099; font-weight: bold;">\r</span><span style="color: #000099; font-weight: bold;">\n</span>Cloverdale IN 46135&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;hasContract&quot;</span><span style="color: #339933;">:</span> &nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;1&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #3366CC;">&quot;hasContract_label&quot;</span><span style="color: #339933;">:</span> <span style="color: #3366CC;">&quot;true&quot;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span></div></div>
<p>When these variables are automatically exported to the Report Table as JSON Strings, they will probably need to be decoded. For example, the following trigger code pulls these values from the Report Table named "PMT_CLIENT_INFO" with a database query using <a href="../3.0/ProcessMaker_Functions.html#executeQuery.28.29">executeQuery()</a>. In a previous Dynaform, the user enters the number of the case whose values should be copied into the "selectCountry" and "clientsList" variables of the current case. The <a href="http://php.net/manual/en/function.json-decode.php">json_decode()</a> function is used to decode the JSON Strings. When decoding the grid, the second parameter of <code>json_decode()</code> is set to <code>true</code> to convert from an object to an associative array.
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseNo</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>caseNo<span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//set by user in a previous Dynaform</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT SELECTCOUNTRYVALUESJSON, SELECTCOUNTRYLABELSJSON, CLIENTSLISTJSON<br />
&nbsp; &nbsp; FROM PMT_CLIENTS_INFO where APP_NUMBER = '<span style="color: #006699; font-weight: bold;">$caseNo</span>' &quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@=</span>selectCountry <span style="color: #339933;">=</span> <a href="http://php.net/json_decode"><span style="color: #990000;">json_decode</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'SELECTCOUNTRYVALUESJSON'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>selectCountry_label <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'SELECTCOUNTRYLABELSJSON'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@=</span>clientsList <span style="color: #339933;">=</span> <a href="http://php.net/json_decode"><span style="color: #990000;">json_decode</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'CLIENTSLISTJSON'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> <span style="color: #009900; font-weight: bold;">true</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<h3><span id="Storing_grids_in_a_separate_Report_Table">Storing Grids in a Separate Table</span></h3>
<p>Another way to export a grid is to create a separate table to hold the values entered into the grid's fields. If storing inside ProcessMaker, a PM Table can be created to hold these values, or a table can be created in an external database.</p>
    <p>For example, if using if using the "clientsList" grid from the previous example, then create a PM Table named <code>CLIENTS_LIST</code> with the following fields: <code>APP_UID</code>, <code>APP_NUMBER</code>, <code>ROW_NO</code>, <code>NAME</code>, <code>ADDRESS</code>, <code>HAS_CONTRACT</code>.</p>
    <p>Then, create the following trigger to write the values in the grid to the PM Table:
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">//look up the case number (and case status if needed):</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT APP_NUMBER, APP_STATUS FROM APPLICATION WHERE APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$caseNo</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_NUMBER'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #666666; font-style: italic;">//first delete all existing records from this case, if updating:</span><br />
executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;DELETE FROM PMT_CLIENTS_LIST WHERE APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' &quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #666666; font-style: italic;">//then insert a new record for each row in the &quot;clientsList&quot; grid</span><br />
<span style="color: #b1b100;">for</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$rowNo</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span> <span style="color: #000088;">$rowNo</span> <span style="color: #339933;">&lt;=</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>clientsList<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #000088;">$rowNo</span><span style="color: #339933;">++</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$name</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@=</span>clientsList<span style="color: #009900;">&#91;</span><span style="color: #000088;">$rowNo</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'name'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$address</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@=</span>clientsList<span style="color: #009900;">&#91;</span><span style="color: #000088;">$rowNo</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'address'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$hasContract</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@=</span>clientsList<span style="color: #009900;">&#91;</span><span style="color: #000088;">$rowNo</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'hasContract'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;INSERT INTO PMT_CLIENTS_LIST (APP_UID, APP_NUMBER, ROW_NO, NAME, ADDRESS, HAS_CONTRACT)<br />
&nbsp; &nbsp; &nbsp; VALUES ('<span style="color: #006699; font-weight: bold;">$caseId</span>', '<span style="color: #006699; font-weight: bold;">$caseNo</span>', <span style="color: #006699; font-weight: bold;">$rowNo</span>, '<span style="color: #006699; font-weight: bold;">$name</span>', '<span style="color: #006699; font-weight: bold;">$address</span>', '<span style="color: #006699; font-weight: bold;">$hasContract</span>')&quot;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>
<p>Set the above trigger to execute after every Dynaform that contains the "clientsList" grid.

<h2><span id="Exporting_data_in_Report_Tables">Exporting Data in Report Tables</span></h2>
<p>ProcessMaker currently doesn't support the export of the data in Report Tables. However, it is possible to export the data in a Report Table (or PM Table) using <a href="../3.0/Consulting_the_ProcessMaker_databases.html#From_the_phpMyAdmin_GUI">PhpMyAdmin</a>.

<p>Direct the web browser to the installation of PhpMyAdmin on your server, which is generally found at:<br>
 &nbsp; &nbsp; <tt>http://<font color=blue><i>IP-ADDRESS</i></font>/phpmyadmin</tt></p>

    <p>Enter with the "root" user and her password.  Then, go to the <b><tt>wf_<font color=blue><i>WORKSPACE</i></font></tt></b> database (which is named <b><tt>wf_workflow</tt></b> by default) in the left sidebar. Then, select the table for the Report Table, which will have the prefix <b><tt>PMT_</tt></b> to open  it.</p>

    <p><img src="../sites/default/files/3.1ExportReportTable01.png" ></p>

    <p>Once the table is open, click on its <b>Export</b> tab in the top menu. Then, select the <b>Format</b> of the data file to export.</p>

    <p><img src="../sites/default/files/3.1ExportReportTable02.png" ></p>

    <p>Finally, click on <b>Go</b> at the bottom and it should generate a CSV file that can be imported into any spreadsheet or database.</p>
    <p>It is recommended to select <b>CSV for MS Excel</b> if using Microsoft Office and <b>OpenDocument spreadsheet</b> if using OpenOffice or LibreOffice.</p>

    <h3><span id="Exporting_Report_Tables_with_triggers">Exporting Report Tables with Triggers</span></h3>
    <p>It is also possible to export a Report Table (or PM Table) in a process by using trigger code to query the Report Table and construct a CSV (Comma Separated Values) file, which the user can download. This file can then be opened by any spreadsheet or database program. The advantage of using triggers is that ordinary users can obtain the CSV file without the security risk of giving the user access to PhpMyAdmin.</p>

    <p>To see a sample process which uses triggers to export Report Tables, download and import <a href="../sites/default/files/Export_Report_Table_or_PM_Table_as_CSV_File-3.pmx.xml">Export_Report_Table_or_PM_Table_as_CSV_File-3.pmx</a> (<i>right click</i> on this link and select "Save as..."). Remember to assign users to the first task in the process in order to run cases in this process.</p>

    <p>To add this functionality to an existing process, first add an Input Document to the process where the CSV file will be uploaded after it is created with a trigger. Then, edit a Dynaform and add a dropdown box whose ID and variable are named "reportTableName".</p>
    <img src="../sites/default/files/ExportReportTableSelectTableDropdown.png">
    <p>Set its <b>sql</b> property to the query:</p>
    <div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> ADD_TAB_NAME<span style="color: #66cc66;">,</span> ADD_TAB_NAME <span style="color: #993333; font-weight: bold;">FROM</span> ADDITIONAL_TABLES</div></div> Then, open a <i>subsequent</i> Dynaform in the process and add a Link field to the Dynaform. Set its
    <b>display text</b> property to the <code>@@csvFilename</code> variable and set its <b>href</b> property to
    the <code>@@csvFileUrl</code> variable. These two variables will be set by trigger code and be automatically
    inserted in the Link field when the Dynaform is generated during a case.</p>
    <img src="../sites/default/files/ExportReportTableLinkProperties.png">
    <p>Then, create a trigger which will query the database to get the contents of the Report Table or PM Table selected by the user in the first Dynaform. Add the following code to the trigger:</p>
    <div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$InputDocId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'9684354975728fdb12d1f12070508672'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//set to UID of input document</span><br />
<br />
<span style="color: #666666; font-style: italic;">// Function to prepare the value from char fields for export</span><br />
<span style="color: #666666; font-style: italic;">// by escapeing &quot;&quot; (double quotation marks) by doubling them and</span><br />
<span style="color: #666666; font-style: italic;">// replacing '\r\n' with a hard return &quot;\n&quot;, which occurs in textareas.</span><br />
<span style="color: #666666; font-style: italic;">// If necessary, the value is enclosed in &quot;...&quot;</span><br />
<span style="color: #000000; font-weight: bold;">function</span> escapeValue<span style="color: #009900;">&#40;</span><span style="color: #000088;">$s</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$s2</span> <span style="color: #339933;">=</span> <a href="http://php.net/str_replace"><span style="color: #990000;">str_replace</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'&quot;'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'&quot;&quot;'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$s</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$s2</span> <span style="color: #339933;">=</span> <a href="http://php.net/str_replace"><span style="color: #990000;">str_replace</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'\r\n'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$s2</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$s</span> <span style="color: #339933;">!=</span> <span style="color: #000088;">$s2</span> or <a href="http://php.net/trim"><span style="color: #990000;">trim</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$s2</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">!=</span> <span style="color: #000088;">$s2</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$s2</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'&quot;'</span><span style="color: #339933;">.</span> <span style="color: #000088;">$s2</span> <span style="color: #339933;">.</span><span style="color: #0000ff;">'&quot;'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">return</span> <span style="color: #000088;">$s2</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<br />
<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/empty"><span style="color: #990000;">empty</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>reportTableName<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Please select table to export.&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<br />
<span style="color: #000088;">$reportTbl</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>reportTableName<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$aFields</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'DESCRIBE '</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$reportTbl</span><span style="color: #009900;">&#41;</span> or<br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Error: Unable to find table '<span style="color: #006699; font-weight: bold;">$reportTbl</span>'.&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #000088;">$aFieldNames</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$aFields</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$aField</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$aFieldNames</span><span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$aField</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'Field'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #000088;">$firstLine</span> <span style="color: #339933;">=</span> <a href="http://php.net/implode"><span style="color: #990000;">implode</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'; '</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aFieldNames</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #000088;">$aRows</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT * FROM <span style="color: #006699; font-weight: bold;">$reportTbl</span>&quot;</span><span style="color: #009900;">&#41;</span> or<br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Error: Unable to query table '<span style="color: #006699; font-weight: bold;">$reportTbl</span>'.&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #000088;">$aExportRows</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$firstLine</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$aRows</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$aRow</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$aExportLine</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$aFields</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$aField</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$val</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$aRow</span><span style="color: #009900;">&#91;</span> <span style="color: #000088;">$aField</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'Field'</span><span style="color: #009900;">&#93;</span> <span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/strpos"><span style="color: #990000;">strpos</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$aField</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'Type'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;char&quot;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">!==</span> <span style="color: #009900; font-weight: bold;">false</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$val</span> <span style="color: #339933;">=</span> escapeValue<span style="color: #009900;">&#40;</span><span style="color: #000088;">$val</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$aExportLine</span><span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$val</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$aExportRows</span><span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <a href="http://php.net/implode"><span style="color: #990000;">implode</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">';'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aExportLine</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #339933;">@@</span>sContents <span style="color: #339933;">=</span> <a href="http://php.net/implode"><span style="color: #990000;">implode</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aExportRows</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$csvFilePath</span> <span style="color: #339933;">=</span> <a href="http://php.net/tempnam"><span style="color: #990000;">tempnam</span></a><span style="color: #009900;">&#40;</span><a href="http://php.net/sys_get_temp_dir"><span style="color: #990000;">sys_get_temp_dir</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$reportTbl</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'_'</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.csv'</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>csvFilename <span style="color: #339933;">=</span> <a href="http://php.net/basename"><span style="color: #990000;">basename</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$csvFilePath</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/file_put_contents"><span style="color: #990000;">file_put_contents</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$csvFilePath</span><span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>sContents<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #666666; font-style: italic;">//upload CSV file to Input Document:</span><br />
<span style="color: #000088;">$params</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a> <span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'APPLICATION'</span> &nbsp;<span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'INDEX'</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@@</span>INDEX<span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'USR_UID'</span> &nbsp; &nbsp; &nbsp;<span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'DOC_UID'</span> &nbsp; &nbsp; &nbsp;<span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$InputDocId</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'APP_DOC_TYPE'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'INPUT'</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'TITLE'</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'CSV file'</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'COMMENT'</span> &nbsp; &nbsp; &nbsp;<span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">&quot;CSV file for table <span style="color: #006699; font-weight: bold;">$reportTbl</span>&quot;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'ATTACH_FILE'</span> &nbsp;<span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'@'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$csvFilePath</span><br />
<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #666666; font-style: italic;">//URL to upload files</span><br />
<span style="color: #000088;">$baseUrl</span> <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span>G<span style="color: #339933;">::</span><span style="color: #004000;">is_https</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> ? <span style="color: #0000ff;">&quot;https://&quot;</span> <span style="color: #339933;">:</span> <span style="color: #0000ff;">&quot;http://&quot;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$_SERVER</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'SERVER_NAME'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#40;</span><span style="color: #000088;">$_SERVER</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'SERVER_PORT'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">==</span> <span style="color: #0000ff;">'80'</span> ? <span style="color: #0000ff;">''</span> <span style="color: #339933;">:</span> <span style="color: #0000ff;">':'</span><span style="color: #339933;">.</span><span style="color: #000088;">$_SERVER</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'SERVER_PORT'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> <span style="color: #666666; font-style: italic;">//comment out if no port</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">'/sys'</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_SYS<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$url</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$baseUrl</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/en/neoclassic/services/upload'</span><span style="color: #339933;">;</span><br />
<br />
<a href="http://php.net/ob_flush"><span style="color: #990000;">ob_flush</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$ch</span> <span style="color: #339933;">=</span> <a href="http://php.net/curl_init"><span style="color: #990000;">curl_init</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$url</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">// curl_setopt($ch, CURLOPT_VERBOSE, 1); &nbsp;//Uncomment to debug</span><br />
<a href="http://php.net/curl_setopt"><span style="color: #990000;">curl_setopt</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$ch</span><span style="color: #339933;">,</span> CURLOPT_RETURNTRANSFER<span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/curl_setopt"><span style="color: #990000;">curl_setopt</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$ch</span><span style="color: #339933;">,</span> CURLOPT_POST<span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/curl_setopt"><span style="color: #990000;">curl_setopt</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$ch</span><span style="color: #339933;">,</span> CURLOPT_POSTFIELDS<span style="color: #339933;">,</span> <span style="color: #000088;">$params</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">// curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 1); //Uncomment for SSL</span><br />
<span style="color: #666666; font-style: italic;">// curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 1); //Uncomment for SSL</span><br />
<span style="color: #339933;">@@</span>response <span style="color: #339933;">=</span> <a href="http://php.net/curl_exec"><span style="color: #990000;">curl_exec</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$ch</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/curl_close"><span style="color: #990000;">curl_close</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$ch</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/strpos"><span style="color: #990000;">strpos</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>response<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;uploaded successfully&quot;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">!==</span> <span style="color: #009900; font-weight: bold;">false</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$path</span> <span style="color: #339933;">=</span> <a href="http://php.net/explode"><span style="color: #990000;">explode</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'*'</span><span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>response<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$filename</span> <span style="color: #339933;">=</span> <a href="http://php.net/basename"><span style="color: #990000;">basename</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$path</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'.csv'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000088;">$fileId</span> <span style="color: #339933;">=</span> <a href="http://php.net/explode"><span style="color: #990000;">explode</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'_'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$filename</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #339933;">@@</span>csvFileUrl <span style="color: #339933;">=</span> <span style="color: #000088;">$baseUrl</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/en/neoclassic/cases/cases_ShowDocument?a='</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$fileId</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'&amp;v=1'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://php.net/unlink"><span style="color: #990000;">unlink</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$csvFilePath</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #b1b100;">else</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Error uploading file '<span style="color: #006699; font-weight: bold;">$csvFilePath</span>' to <span style="color: #006699; font-weight: bold;">$url</span>:<span style="color: #000099; font-weight: bold;">\n</span><span style="color: #000099; font-weight: bold;">\n</span>&quot;</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>response<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>
    <p>Set this trigger to execute <b>before</b> the second Dynaform that contains the Link field. Make sure to change the <code>$InputDocId</code> variable to the unique ID of the Input Document, which can be found by clicking on its <b>Show ID</b> button when viewing the list of Input Documents.</p>
    <img src="../sites/default/files/ExportReportTableGetInputDocumentID.png">
    <p>

<p>In this trigger, the first time executeQuery() is called, it looks up the structure of the Report Table or PM Table selected by the user. It uses this information to create the first line of the CSV file which holds the names of the field in the table.

<p>The second time executeQuery() is called, it obtains the contents of the table to be exported. The code then loops through each row in this table and copies the data to the $aExportRows array. In order to export this information correctly, data is passed through the escapeValue() function if the field is a <i>char</i> or <i>varchar</i>, so it might need to have its data enclosed in "" (double quotation marks).</p>
    <p>Then, the records in the $aExportRows array is converted into a string with the implode() function. This content is written to a temporary file whose filename is the name of the table plus a randomly generated code. Then, the cURL library is used to upload the temporary file to the Input Document. If the file was successfully uploaded, then the response message will be similar to this text:
<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">/opt/processmaker/shared/sites/workflow/files/184/243/501/572991df4459b3041405339/2930668665729a4e185c473029977042_1.csv* The file PMT_TESTSANMINA_gLxYlT.csv was uploaded successfully in case 184243501572991df4459b3041405339 as input document..</div></div>
<p>The trigger uses explode() and basename() to break up this message and obtain the unique ID of the uploaded file, which in this example is "2930668665729a4e185c473029977042". This ID is used to construct the URL to download the file, which will be something like:<br>
 &nbsp; &nbsp; <tt>http://example.com/sysworkflow/en/neoclassic/cases/cases_ShowDocument?a=2930668665729a4e185c473029977042&v=1</tt></p>
    <p>When a case is run, the user will first select the table to export:</p>
    <img src="../sites/default/files/ExportReportTableSelectTable.png">
    <p>Then, the second Dynaform will contain a link to download the generated CSV file:</p>
    <img src="../sites/default/files/DynaFormWithCsvFileLink.png">
    <p>Click on the link to download the CSV file to the local computer. When opening the CSV file in a spreadsheet program, make sure to select that the character set is UTF-8 and that the values are separated by semicolons. For example, when opening the CSV file in OpenOffice or LibreOffice, the following settings are selected when importing the file:<p>
<img src="../sites/default/files/ExportReportTableImportingCsvFile.png">
</div></div></div>  </div>

      <footer>
          </footer>
  
    </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
      </section>
    </div>
  
      
    </div>

      
</div>

 <!---add diego--->
  <div id="download-app-section" class="download-app mobile-none">
			<div class="row">
				<div class="col-md-12">
					<div class="text_app">Download our app</div>
							<a href="https://itunes.apple.com/us/app/processmaker/id992576284?ls=1&amp;mt=8" target="_blank">
								<img src="../themes/thecompany_responsive_theme/images/appstore.png">
							<a href="https://play.google.com/store/apps/details?id=com.colosa.processmaker" target="_blank">
								<img src="../themes/thecompany_responsive_theme/images/playstore.png">				
				</div>
			</div>
  </div>
  <!---end diego--->
<!----add diego----->    
		<div class="logo_processmaker"><a href="http://www.processmaker.com/">
		<img src="../themes/thecompany_responsive_theme/images/logo_processmaker.png"></div>
<!----end diego----->
<div id="footer">
  <div id="footer_wrapper">
      </div>

  <div class="social-media-wrapper">
         <div id="social-media-icons">
       <ul>
       	<div class="text_contact">Contact us</div>
				<div class="text_number">+1-617-340-3377</div>
        <!--<li><a class="rss" href="/rss.xml">rss</a></li> <!--edit diego-->
        <li><a class="facebook" href="http://facebook.com/processmaker/" target="_blank" rel="me">facebook</a></li>
        <li><a class="twitter" href="https://twitter.com/processmaker" target="_blank" rel="me">twitter</a></li>
        <li><a class="gplus" href="https://www.google.com/+ProcessMakerOpenSource" target="_blank" rel="me">Gplus</a></li>
        <li><a class="linkedin" href="https://www.linkedin.com/groups?mostRecent=&amp;gid=3970335&amp;trk=my_groups-tile-flipgrp" target="_blank" rel="me">Linked in</a></li>
        <!--<li><a class="dribbble" href="http://dribbble.com" target="_blank" rel="me">Dribbble</a></li>
        <li><a class="vimeo" href="http://vimeo.com" target="_blank" rel="me">Vimeo</a></li>-->
        <li><a class="youtube" href="https://www.youtube.com/user/processmaker" target="_blank" rel="me">Youtube</a></li>
       </ul>
      </div>
      </div>
  
  <div class="footer_credit">
    <div class="footer_inner_credit">
           <div id="foot"><div class="region region-footer">
  <div id="block-block-2" class="block block-block">

      
  <div class="content">
    <p><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">Automate your Workflow with Business Process Management<br>Software licensed under the <a 1px="" class="external text" href="http://www.gnu.org/licenses/agpl.html" rel="nofollow" style="padding-right: 13px; color:white;">GNU Affero General Public License version 3</a><br>Contact us:&nbsp;<a class="external free" href="mailto:community@processmaker.com" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">community@processmaker.com</a><br><a class="external free" href="https://www.processmaker.com/privacy-statement" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">Privacy Statement</a></font><br><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">© Copyright 2000-2024 ProcessMaker Inc. All rights reserved.</font></p>
  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
</div>
         
   <!-- <div id="copyright">
      <p class="copyright">Copyright &copy; 2024, Documentation@ProcessMaker </p>
      <!--<p class="credits"> Developed by  <a href="http://www.zymphonies.com">Zymphonies</a></p>
      <div class="clear"></div>
    </div>-->
  </div>
  
  </div>
</div>

</div>

<script type="text/javascript">
  /* <![CDATA[ */
  document.write (
    '<img src="https://marketing.processmaker.com/acton/bn/3812/visitor.gif?ts='+ new Date().getTime()+ '&ref='+escape(document.referrer) + '">'
  );
  /* ]]> */
</script>
  
</div>
    <style>
    .center-div{
        width: 100%;        
        margin: 0 auto;
        z-index:10000;
        position:fixed;
        bottom: 0px;
        cursor:pointer;
    }
    .round-popup{
        margin:0 auto;
        font-family: 'Montserrat', sans-serif;
        font-size: 15px;
        font-weight: lighter;
        width: 412px;
        height: 50px;
        padding-top: 7px;
        text-align: center;
        position:relative;
    }
    .round-popup-button{
        position:absolute;
        top: 11px;
        right: 15px;
        background: transparent;
        border:none;
        font-size:15px;
        font-weight:normal;
        line-height:20px;
        width:20px;
        height:20px;
        padding:0;
    }
    .round-background-blue{
        background: url('http://www.processmaker.com/uploads/blue.png')no-repeat;
        color:white;
        
    }
    #box-pm31-button-blue{
        color: rgba(255, 255, 255, 0.5);
    }
    
    #box-pm31-button-blue:active,#box-pm31-button-blue:focus{
        border:none;
        outline:none;
    }
    .round-background-blue a{
        color: white!important;
        text-decoration: none;
        font-size: 15px;
        line-height:45px;
        font-family:Montserrat, sans-serif;
    }
    .round-background-blue span{
        font-weight: bold;
    }
    /*WHITE background*/
    .round-background-white{
        background: url('http://www.processmaker.com/uploads/white.png')no-repeat;
        background-position-x: -9px;        
        color: #3397E1;
    }
    .round-background-white a:hover{
        color: #3397E1!important;
        text-decoration: none;
        font-size: 15px;
    }
    #box-pm31-button-white{
        color: rgba(51, 151, 225, 0.7);
    }
</style>
    <div id="box-pm31" class="center-div" style="display:none;">
        <div class="round-popup round-background-blue">
            <a onclick="ga('send', 'event', 'WikiBlueBanner','click','PM31Release');" href="http://www.processmaker.com/download-processmaker-landing-page">
                <span>ProcessMaker 3.1</span> is Here! Download Now <span style="font-size:20px;font-weigth:normal;">»</span>
            </a>
            <button id="box-pm31-button-blue" class="round-popup-button">&times;</button>
        </div>
    </div>
    <script>

function pmCreateCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function pmReadCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function pmEraseCookie(name) {
    createCookie(name,"",-1);
}



     jQuery(document).ready(function( $ ) {
        $('#box-pm31-button-blue').click(function(e){
                e.stopPropagation();
                $('#box-pm31').slideUp('fast');
                pmCreateCookie('ppcookie','val',10);
            });
        });
        jQuery(window).load(function() {
            if(pmReadCookie('ppcookie') !== 'val'){
                //jQuery('#box-pm31').delay( 2000 ).slideDown('slow');
            }
        });
    </script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">

<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
    // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
    // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.marinsm.com/serve/586a7ec3a2ae6b728400003d.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>

</body>

<!-- Mirrored from wiki.processmaker.com/node/57 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Feb 2024 09:46:51 GMT -->
</html>
