<!DOCTYPE html>

<!-- Mirrored from wiki.processmaker.com/node/660 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Feb 2024 10:01:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta name="keywords" content="BPM, business process management, workflow, processmaker, business, BPM Windows, BPM Linux, wiki, BPM documentation, BPM FAQ, task documentation, BPM PHP, BPM Open Source, BPM Variables, BPM Installation, BPM Programming, BPM Elements, BPM Concepts, BPM Frequently Asked Questions, BPM 3.0, BPM News, Release notes, DynaForms, BPM Community, BPM Enterprise, BPM Mobile, BPM Responsive Web Design, User Manual, BPM Resources" />
<link rel="alternate" hreflang="en" href="../index.html" />
<link rel="shortcut icon" href="../themes/thecompany_responsive_theme/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="description" content="ProcessMaker is commercial open source workflow and business process management software." />
<meta name="viewport" content="width=device-width" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="../3.1/Advanced_LDAP.html" />
<link rel="shortlink" href="660.html" />
<title>3.1 - Advanced LDAP/AD | Documentation@ProcessMaker</title>
<style type="text/css" media="all">
@import url("../modules/system/system.base2af9.css?s743n7");
@import url("../modules/system/system.menus2af9.css?s743n7");
@import url("../modules/system/system.messages2af9.css?s743n7");
@import url("../modules/system/system.theme2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../modules/aggregator/aggregator2af9.css?s743n7");
@import url("../modules/comment/comment2af9.css?s743n7");
@import url("../modules/field/theme/field2af9.css?s743n7");
@import url("../modules/node/node2af9.css?s743n7");
@import url("../modules/search/search2af9.css?s743n7");
@import url("../modules/toc_filter/toc_filter2af9.css?s743n7");
@import url("../modules/user/user2af9.css?s743n7");
@import url("../modules/views/css/views2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../sites/all/modules/colorbox/styles/default/colorbox_style2af9.css?s743n7");
@import url("../modules/ctools/css/ctools2af9.css?s743n7");
@import url("../sites/all/modules/geshifilter/geshifilter2af9.css?s743n7");
@import url("../modules/panels/css/panels2af9.css?s743n7");
@import url("../modules/nice_menus/css/nice_menus2af9.css?s743n7");
@import url("../modules/nice_menus/css/nice_menus_default2af9.css?s743n7");
@import url("../modules/fivestar/css/fivestar2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../themes/thecompany_responsive_theme/css/style2af9.css?s743n7");
@import url("../themes/thecompany_responsive_theme/css/media2af9.css?s743n7");
</style>
<script type="text/javascript" src="../modules/jquery_update/replace/jquery/1.9/jquery.min4b17.js?v=1.9.1"></script>
<script type="text/javascript" src="../misc/jquery.once7839.js?v=1.2"></script>
<script type="text/javascript" src="../misc/drupal2af9.js?s743n7"></script>
<script type="text/javascript" src="../modules/nice_menus/js/jquery.bgiframef195.js?v=2.1"></script>
<script type="text/javascript" src="../modules/nice_menus/js/jquery.hoverIntent1f6b.js?v=0.5"></script>
<script type="text/javascript" src="../modules/nice_menus/js/superfish099d.js?v=1.4.8"></script>
<script type="text/javascript" src="../modules/nice_menus/js/nice_menusc619.js?v=1.0"></script>
<script type="text/javascript" src="../modules/jquery_update/replace/ui/external/jquery.cookie1683.js?v=67fb34f6a866c40d0570"></script>
<script type="text/javascript" src="../modules/jquery_update/replace/misc/jquery.form.min97e5.js?v=2.69"></script>
<script type="text/javascript" src="../misc/ajax2347.js?v=7.34"></script>
<script type="text/javascript" src="../modules/jquery_update/js/jquery_update241d.js?v=0.0.1"></script>
<script type="text/javascript" src="../modules/toc_filter/toc_filter2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/js/colorbox2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/styles/default/colorbox_style2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/google_analytics/googleanalytics2af9.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","../../www.google-analytics.com/analytics.js","ga");ga("create", "UA-3380652-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript" src="../misc/progress2347.js?v=7.34"></script>
<script type="text/javascript" src="../modules/fivestar/js/fivestar.ajax2af9.js?s743n7"></script>
<script type="text/javascript" src="../modules/fivestar/js/fivestar2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-1.10.2.min2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-ui2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-ui.min2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/custom2af9.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"thecompany_responsive_theme","theme_token":"8lRzsiTKLApn7U6Vh3GG0-WC7PS7_OLPByD8VEYqBt8","jquery_version":"1.9","js":{"modules\/jquery_update\/replace\/jquery\/1.9\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"modules\/nice_menus\/js\/jquery.bgiframe.js":1,"modules\/nice_menus\/js\/jquery.hoverIntent.js":1,"modules\/nice_menus\/js\/superfish.js":1,"modules\/nice_menus\/js\/nice_menus.js":1,"modules\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"modules\/jquery_update\/replace\/misc\/jquery.form.min.js":1,"misc\/ajax.js":1,"modules\/jquery_update\/js\/jquery_update.js":1,"modules\/toc_filter\/toc_filter.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox.js":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"misc\/progress.js":1,"modules\/fivestar\/js\/fivestar.ajax.js":1,"modules\/fivestar\/js\/fivestar.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-1.10.2.min.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.min.js":1,"themes\/thecompany_responsive_theme\/js\/custom.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/toc_filter\/toc_filter.css":1,"modules\/user\/user.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"modules\/panels\/css\/panels.css":1,"modules\/nice_menus\/css\/nice_menus.css":1,"modules\/nice_menus\/css\/nice_menus_default.css":1,"modules\/fivestar\/css\/fivestar.css":1,"themes\/thecompany_responsive_theme\/css\/style.css":1,"themes\/thecompany_responsive_theme\/css\/media.css":1}},"colorbox":{"opacity":"0.85","current":"{current} of {total}","previous":"\u00ab Prev","next":"Next \u00bb","close":"Close","maxWidth":"98%","maxHeight":"98%","fixed":true,"mobiledetect":true,"mobiledevicewidth":"480px","specificPagesDefaultValue":"admin*\nimagebrowser*\nimg_assist*\nimce*\nnode\/add\/*\nnode\/*\/edit\nprint\/*\nprintpdf\/*\nsystem\/ajax\nsystem\/ajax\/*"},"toc_filter_smooth_scroll_duration":"","googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip","trackColorbox":1},"nice_menus_options":{"delay":"800","speed":"slow"},"ajax":{"edit-vote--2":{"callback":"fivestar_ajax_submit","event":"change","url":"\/system\/ajax","submit":{"_triggering_element_name":"vote"}}}});
//--><!]]>
</script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','../../connect.facebook.net/en_US/fbevents.js');
// Insert Your Facebook Pixel ID below.
fbq('init', '735235999992228');
fbq('track', 'PageView');
</script>
<!-- Insert Your Facebook Pixel ID below. -->
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=735235999992228&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-660 node-type-processmakerbpm">
    
<div class="wrap">

<div id="header_wrapper">
  <div id="inner_header_wrapper">

    <header id="header" role="banner">
      
      <div class="header_inner_wrapper">
        <div class="header_left">
                      <div id="logo">
              <a href="../index.html" title="Home"><img src="../sites/default/files/full-logo.png"/></a>
            </div>
                    	  <div class="menu_wrapper">
            <nav id="main-menu"  role="navigation">
              <a class="nav-toggle" href="#">Navigation</a>
              <div class="menu-navigation-container">
                <ul class="menu"><li class="first leaf"><a href="../PM_Classic.html" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="leaf"><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="leaf"><a href="../3.1/user_guide.html">User Guide</a></li>
<li class="leaf"><a href="../3.1/developer_info.html">Developer Info</a></li>
<li class="leaf"><a href="../3.2/sys_administration.html">Sys Administration</a></li>
<li class="leaf"><a href="../3.1/resources.html">Helpful Resources</a></li>
<li class="leaf"><a href="../Sitemap.html">Sitemap</a></li>
<li class="last leaf"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>              </div>
              <div class="clear"></div>
            </nav>
          </div>
                  <!--  <h1 id="site-title">
            <a href="/" title="Home">Documentation@ProcessMaker</a>
            <div id="site-description"></div>
          </h1> -->
            
        </div>
      </div>
      <div class="header_right">
          <div class="region region-search">
  <div id="block-search-form" class="block block-search">

        <h2 >_</h2>
    
  <div class="content">
    <form action="https://wiki.processmaker.com/node/660" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." placeholder="Search" type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-2LjrcKQyDEaw-AKww0TFm0XkKU8yKHk0ZjUysWZyn04" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
                  <h1 class="page-title">3.1 - Advanced LDAP/AD</h1>                <p class="page-title-suffix"></p>
                 <div style="margin-top: 5px;"></div>
      </div>
    </header>
    <div class="region-version">
      <span>Version: </span><ul><li><a href="../3.6/Advanced_LDAP.html" class="">3.8</a></li><li><a href="../3.6/Advanced_LDAP.html" class="">3.7</a></li><li><a href="../3.6/Advanced_LDAP.html" class="">3.6</a></li><li><a href="../3.2/Advanced_LDAP.html" class="">3.5</a></li><li><a href="../3.2/Advanced_LDAP.html" class="">3.4</a></li><li><a href="../3.2/Advanced_LDAP.html" class="">3.3</a></li><li><a href="../3.2/Advanced_LDAP.html" class="">3.2</a></li><li><a  class="active-version">3.1</a></li><li><a href="../3.0/Advanced_LDAP.html" class="">3.0</a></li></ul>    </div>
  </div>
</div>
<!-- <ul class="nice-menu nice-menu-down nice-menu-main-menu" id="nice-menu-0"><li class="menu-506 menu-path-node-1078 first odd "><a href="/PM_Classic" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="menu-319 menu-path-processmakercom-tutorials  even "><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="menu-320 menu-path-node-571  odd "><a href="/3.1/user_guide">User Guide</a></li>
<li class="menu-1138 menu-path-node-572  even "><a href="/3.1/developer_info">Developer Info</a></li>
<li class="menu-1197 menu-path-node-876  odd "><a href="/3.2/sys_administration">Sys Administration</a></li>
<li class="menu-1140 menu-path-node-236  even "><a href="/3.1/resources">Helpful Resources</a></li>
<li class="menu-1141 menu-path-node-554  odd "><a href="/Sitemap">Sitemap</a></li>
<li class="menu-1213 menu-path-sprocessmakergitbookio-processmaker-  even last"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>
-->
  
  <div id="container">
    
    <div class="content-sidebar-wrap">

    <div id="content">

              <!-- <div id="breadcrumbs">
        <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="/">Home</a></div></div> -->
      
      <section id="post-content" role="main">
                                        <div class="region region-content">
  <div id="block-system-main" class="block block-system">

      
  <div class="content">
                          <span property="dc:title" content="3.1 - Advanced LDAP/AD" class="rdf-meta element-hidden"></span>  
      
    
  <div class="content node-processmakerbpm">
    <div class="field field-name-field-how-useful-did-you-find-th field-type-fivestar field-label-above"><div class="field-label">Please rate how useful you found this document:&nbsp;</div><div class="field-items"><div class="field-item even"><form class="fivestar-widget" action="https://wiki.processmaker.com/node/660" method="post" id="fivestar-custom-widget" accept-charset="UTF-8"><div><div  class="clearfix fivestar-average-text fivestar-average-stars fivestar-form-item fivestar-default"><div class="form-item form-type-fivestar form-item-vote">
 <div class="form-item form-type-select form-item-vote">
 <select id="edit-vote--2" name="vote" class="form-select"><option value="-">Select rating</option><option value="20">Give 3.1 - Advanced LDAP/AD 1/5</option><option value="40">Give 3.1 - Advanced LDAP/AD 2/5</option><option value="60" selected="selected">Give 3.1 - Advanced LDAP/AD 3/5</option><option value="80">Give 3.1 - Advanced LDAP/AD 4/5</option><option value="100">Give 3.1 - Advanced LDAP/AD 5/5</option></select>
<div class="description"><div class="fivestar-summary fivestar-summary-average-count"><span class="average-rating">Average: <span >2.3</span></span> <span class="total-votes">(<span >3</span> votes)</span></div></div>
</div>

</div>
</div><input class="fivestar-submit form-submit" type="submit" id="edit-fivestar-submit" name="op" value="Rate" /><input type="hidden" name="form_build_id" value="form-F8ttIJPGv9LzBR6ksDfnusVvWlq6-U5SejkWk9yIHDY" />
<input type="hidden" name="form_id" value="fivestar_custom_widget" />
</div></form></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><div style="float: right; margin-left: 5px; background-color: #f9f9f9; border: 1px solid #aaaaaa; padding: 5px;"><center><strong>Contents:</strong> [<a href="#" onclick="var el = document.getElementById('toc');
        var txt = ('innerText' in el)? 'innerText' : 'textContent';
        if (el.style.display=='none') { 
           el.style.display = '';
           document.getElementById('hideLabel')[txt] = 'hide';
        }
        else {
	        el.style.display = 'none';
           document.getElementById('hideLabel')[txt] = 'show';
        }"><span id="hideLabel">hide</span></a>]</b></center><div id="toc" ><ol class="toc">
<li class="toc"><a href="#Overview">Overview</a></li>
<li class="toc"><a href="#How_the_plugin_works">How the Advanced LDAP/AD Works</a></li>
<li class="toc"><a href="#Requirements">Requirements</a></li>
<li class="toc"><a href="#Considerations">Considerations</a></li>
<li class="toc"><a href="#Recommendations">Recommendations</a></li>
<li class="toc"><a href="#Setup">Setup</a></li>
<ol class="toc">
<li class="toc"><a href="#Authentication_Sources">Authentication Sources</a></li>
<ol class="toc">
<li class="toc"><a href="#New_Authentication_Source">New Authentication Source</a></li>
<li class="toc"><a href="#Authentication_Sources_list">Authentication Sources list </a></li>
</ol>
<li class="toc"><a href="#Importing_Users">Importing Users</a></li>
<ol class="toc">
<li class="toc"><a href="#Example_to_Increase_Search_Results_When_Importing_Users">Example to Increase Search Results When Importing Users</a></li>
</ol>
<li class="toc"><a href="#Synchronization">Synchronization </a></li>
<ol class="toc">
<li class="toc"><a href="#Synchronizing_Departments">Synchronizing Departments</a></li>
<li class="toc"><a href="#Synchronizing_Groups">Synchronizing Groups</a></li>
</ol>
<li class="toc"><a href="#Executing_ldapcron.php">Executing <strong><code>ldapcron.php</code></strong></a></li>
<ol class="toc">
<li class="toc"><a href="#ldapcron.php_Options">ldapcron.php Options</a></li>
</ol>
<li class="toc"><a href="#Mapping_user_information_between_Active_Directory_and_ProcessMaker">Mapping User Information Between Active Directory and ProcessMaker</a></li>
</ol>
<li class="toc"><a href="#Changing_user_password_after_importing_and_synchronization">Changing User Password After Importing and Synchronization</a></li>
<li class="toc"><a href="#Changing_a_user_status_after_importing_and_synchronization">Changing a User Status after Importing and Synchronization</a></li>
</ol>
</div></div>

<h2><span id="Overview">Overview</span></h2>
<p>The Advanced LDAP/AD Sync feature allows ProcessMaker users to login by authenticating directly into a LDAP server or Microsoft Active Directory server. Unlike the <a href="../index.php/2.0/External_Authentication.html" title="External User Authentication">LDAP</a> community version that only imports users, it also enables synchronization with LDAP or Active Directory to update user information.</p>
<p>In previous versions of ProcessMaker, this plugin used to be acquired with the Enterprise Manager and the corresponding license.  From ProcessMaker Enterprise Edition version 3.0.1 on, this plugin has become a core feature acquired with the corresponding license.</p>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">The usage of LDAPS and its default port 636 is currently deprecated. It is strongly recommended to use start-TLS which uses the default port 389 for SSL connections and to have credentials installed in the server environment if required.</font></p>


<h2><span id="How_the_plugin_works">How the Advanced LDAP/AD Works</span></h2>
<p>The Advanced LDAP/AD Sync plugin is used to compare the user list in ProcessMaker to the user list in LDAP or Active Directory. Users in Active Directory that haven't been imported or synchronized in ProcessMaker will not be created. However, if the option <strong>Enable automatic registration</strong> is activated, users will automatically be imported from Active Directory the first time they log into ProcessMaker.</p>

<p>The Lightweight Directory Access Protocol (LDAP) uses distinguished names (dn) to identify users, groups, and other types of entities. In LDAP and <a href="http://technet.microsoft.com/en-us/library/cc977985.aspx">Active Directory</a>, which is Microsoft's extension of LDAP, distinguished names are constructed hierarchically using:</p>
<ul>
<li><strong>dn</strong> - domain components, such as: <tt>dc=acme,dc=com</tt></li>
<li><strong>ou</strong> - organizational units, such as: <tt>ou=managers,ou=regionalbranch</tt></li>
<li><strong>cn</strong> - common names, such as: <tt>cn=John Doe</tt></li>
</ul>

<p>Other naming attributes described in <a href="http://tools.ietf.org/html/rfc2253">RFC 2253</a>, such as <strong>o=</strong> for organization name and <strong>c=</strong> for country/region name, are not used in Active Directory, although they are recognized by LDAP.</p>
<p>The distinguished name describes entities starting from the specific and moving to the general in the hierarchy of entities.<br>For example: <tt>cn=John Doe,ou=managers,ou=regionalbranch,dc=acme,dc=com</tt></p>

<h2><span id="Requirements">Requirements</span></h2>
<p>If using Advanced in ProcessMaker 3.0.1:</p>
<ul>
<li>PHP version 5.3, 5.4 for ProcessMaker 5.4</li>
<li>Access to a LDAP server if needed.</li>
<li>Access to ProcessMaker Enterprise Edition.</li>
<li>The ProcessMaker - Advanced LDAP feature.</li>
</ul>

<p>For Advanced LDAP/AD Sync:</p>
<ul>
<li>Mozilla Firefox 33 or later</li>
<li>Google Chrome 36 or later</li>
<li>Internet Explorer 9, 10 and 11</li>
</ul>

<h2><span id="Considerations">Considerations</span></h2>
<p>
<table border="1" cellpadding="1" cellspacing="1" style="width: 100%;">
<tbody>
<tr>
<td>
<font color="green"><b>Note:</b></font> <font color=dimgrey> Take into consideration that ProcessMaker does NOT support sub-groups. Therefore, user groups cannot be organized hierarchically, and nested groups can not be created.</font>
</td>
</tr>
</tbody>
</table>
</p>

<p>If both the LDAP plugin and the LDAP feature are enabled, some issues may arise because both cannot work at the same time. In order to use only the LDAP feature, please read the following steps:
<ol>
	<li>Disable the Advanced LDAP plugin.</li>
	<li>Enable the Advanced LDAP feature.</li>
	<li>Delete the following files at the following locations:<br>
		<div style="margin-left: 25px;"><strong><tt>processmaker/rbac/engine/classes/plugins/class.ldapAdvanced.php</tt></strong><br>
		<strong><tt>processmaker/engine/bin/plugins/ldapadvanced.php</tt></strong></div>
	</li>
</ol>
</p>

<p>It is strongly recommended to delete these files. Otherwise, the files may continue in an active state, even if the plugin is disabled.</p>

<h2><span id="Recommendations">Recommendations</span></h2>
<ul>
<li>If there are thousands of users to import, the <tt><strong>max_page_size</strong></tt> variable should be set in the <b>Active Directory</b>. If this setting is not configured, the Advanced LDAP plugin may not return all users. See <a href="http://www.fots.nl/index.php/set-the-maxpagesize/">this documentation</a>.</li>
<li>Due to security reasons, it is NOT recommended to use anonymous connections.</li>
</ul>

<h2><span id="Setup">Setup</span></h2>
<ul>
<li>Verify that the ldapAdvanced is listed among the features of the Enterprise Manager via <b>Admin > Plugins</b>.</li>

<li>If the Apache installation is made in Windows, verify that the following modules are uncommented in the <code>httpd.conf</code> file:<br/>
<codeblock>LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
LoadModule ldap_module modules/mod_ldap.so
</codeblock>
</li>

<li>Export the Directory CA Certificate. Follow <a href="../3.1/Export_the_Active_Directory_Certificate.html">these instructions</a> to export the certificate from Active Directory</li>

<li>Import the certificate to the following path in the server: <b>/etc/openldap/cacerts/</b></li>

<li><p>Create a TLS connection by adding the following line to the <a href="../3.0/Additional_Configuration.html#Configuring_Apache" title="Additional Server Configuration">Apache configuration file</a> (which is generally named <strong><tt>httpd.conf</tt></strong>, but is named <strong><tt>apache2.conf</tt></strong> on Debian/Ubuntu systems):</p>
<p><code>LDAPTrustedGlobalCert CA_BASE64 /etc/openldap/cacerts/neonet.cer</code></p>
<p><img alt="" src="../sites/default/files/ADLDAPTLSConnection.png"></p>
<p>This line tells Apache the path of the CA certificate to verify the domain neonetda.org. After changing the Apache configuration file, restart Apache for the change to take effect.</p>
</li>
</ul>

<p><font color="green"><strong>Note:</strong></font> The TLS connection was tested with version 1.4.22 of the "ldapAdvanced" plugin and the Softerra LDAP Browser 4.5. The configuration was not tested for ProcessMaker 3.0.x. If you have any trouble with the configuration please report bugs at <a href="http://bugs.processmaker.com/">bugs.processmaker.com/</a></p>
<p><font color="green"><strong>Note:</strong></font> When configuring the connection in ProcessMaker to the LDAP/Active Directory server, it is strongly recommended to use port 389 and not the 636. The PHP LDAP module creates a normal connection to the server through the default port and then executes a command that makes the connection secure via TLS (ldap_start_tls).</p>

<p>Finally, verify that the following directory has read and write permissions:</p>
<p><code>workflow/engine/xmlform/authSources</code></p>
<p>(If the normal installation procedure was followed, all subdirectories under <code>workflow/engine/xmlform/</code> should be readable and writable by Apache.)</p>

<h3><span id="Authentication_Sources">Authentication Sources</span></h3>
<p>To access the Authentication Sources window, go to <b>Admin > Users</b> and click on <b>Authentication Sources</b>.</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_LDAP_Admin_AuthenticationSources.png"></p>
<p>In the right panel, a list of existing authentication sources is displayed, with a button to create a new authentication source.</p>

<h4><span id="New_Authentication_Source">New Authentication Source</span></h4>
<p>Click on <strong>New</strong> to create an authentication source. Then select the <strong>Provider</strong>, which can be the normal ldap importer or the ldapAdvanced feature.
<p><img alt="" src="../sites/default/files/ALDAP_Provider.png"></p>
<p>For Active Directory connections, it is strongly recommended to use the ldapAdvanced option because it offers synchronization to update the user information and the ability to import groups and departments from the Active Directory server.</p>
<p><img alt="" src="../sites/default/files/PM3.0ADLDAPAdvancedOption.png"></p>

<p>Then, define how to connect to the authentication source:</p>
<p><img alt="" src="../sites/default/files/ALDAP_authsourcev1.4.40.png"></p>

<p>The characteristics of the interface are the following:</p>
<ul>
<li><strong>Name</strong>: Enter a label that will identify the Authentication Source.</li>
<li><strong>Type</strong>: Select either LDAP or Active Directory. Moreover, there is the option to connect to <a  href="http://directory.fedoraproject.org/" >389 Directory Server</a></li>
<li><strong>Enable Automatic Register</strong>: If <i>Yes</i> is selected, when a new user tries to log in, ProcessMaker will connect to the LDAP or Active Directory server and verify whether the user exists in the authentication source. Users that exist in LDAP or Active Directory will automatically be imported into ProcessMaker and be able to log in.
<p><strong><font color="green">Note:</font></strong> <font color="dimgray">When using this feature along with <a href="../3.0/Windows_Single_SignOn.html">Windows Single Sign On</a>, it is very important to set this field to <strong>YES</strong>.</font></p>
</li>
<li><strong>Server Address</strong>: Enter the IP address or domain name of the LDAP or Active Directory server. If located on the same machine, then enter "localhost".</li>
<li><strong>Port</strong>: Enter the port number for the LDAP or Active Directory service. By default, LDAP and Active Directory use port 389. If unsure, use the <strong><code>netstat -l</code></strong> and <strong><code>netstat -lnp</code></strong> commands in Linux/UNIX or <strong><code>netstat -a</code></strong> and <strong><code>netstat -ab</code></strong> commands in Windows to determine which port is being used.
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">sThe usage of LDAPS and its default port 636 is currently deprecated<. It is strongly recommended to use start-TLS which uses the default port 389.</font></p>
</li>
<li><strong>Enabled TLS</strong>: Select <b>Yes</b> if using Transport Security Layer (TLS) or Secure Socket Layer (SSL) to connect to the Authentication Source. Otherwise, select <b>No</b>.</li>
<li><strong>Base DN</strong>: Enter the <i>Distinguished Name</i> from the Base object. In most cases this will be the domain components (dc) of the Distinguished Name. For example, the Base DN for processmaker.com would be "dc=processmaker,dc=com". For more information on constructing DN chains, see <a  href="http://www.zytrax.com/books/ldap/apa/dn-rdn.html" >this LDAP guide</a>.</li>
<li><strong>Anonymous</strong>: If the LDAP or Active Directory server accepts anonymous searches for users, then select <b>Yes</b>. If a login is required, then select <b>No</b>. It is not recommended to use this type of connection.
<ul>
<li><strong>Username</strong>: This field appears if not using anonymous logins. Enter a username to log in to the LDAP or Active Directory server.</li>
<li><strong>Password</strong>: This field appears if not using anonymous logins. Enter a password to log in to the LDAP or Active Directory server.</li>
</ul>
</li>
<li><strong>User identifier</strong>: Enter the object to identify users, which will be their username in ProcessMaker.<br>
<ul><li>For <strong>Active Directory</strong>, enter <strong>"samaccountname"</strong>.</li>
<li>For <strong>Open LDAP</strong>, enter <strong>"uid"</strong>.</li>
<li>If unsure which object class to use, enter "*", which is slower because it will cause ProcessMaker to look in all object classes.</li></ul></li>
<li><strong>Filter to search users</strong>: Enter a filter that will be used when searching for users in the the authentication source.</li>
<li><strong>OU for retired Employees:</strong>: Specify the DN of an Organizational Unit where users who have been removed or retired from the Authentication Source are placed.</li>
<li><strong>Match attributes to sync</strong>: Mark this checkbox to map user attributes in the authentication source to fields in ProcessMaker's <strong><code>USERS</code></strong> table in the MySQL database. This option only supports existing fields in Active Directory.<p><img alt="" src="../sites/default/files/MatchAttribituesOptionEnablev1_4_40.png"></p>
<p>Find the interface where the fields will be added:</p>
<p><img alt=""src="../sites/default/files/MatchAttribituesOptionInterface1_4_40.png"> </p>
<p>Where:</p>
<ul>
<li><strong>Add:</strong> Add a new field.</li>
<li><strong>Remove:</strong> Remove an existing field.</li>
<li><strong>LDAP Field:</strong> Pick a name for the field that will be synched.</li>
<li><strong>User Field:</strong> Choose a user field from the dropdown where the new LDAP field will be stored.
<p><font color="green"><strong>Note:</strong></font> <font color="dimgrey">This feature only works if the authentication source is Active Directory.</font></p></li>
</ul>
</li>
</ul>

<p>When done defining the new authentication source, click on <strong>Save</strong> to create it. To cancel the creation of a new authentication source (or discard any changes if editing an existing authentication source), click on <strong>Cancel</strong>. To check whether the configuration to connect to the authentication source is correct, click on <strong>Test Connection</strong>. If the configuration is correct, the following message will display:</p>

<p><img alt="" src="../sites/default/files/TestingConnectionAdvancedLDAP1_4_40.png"></p>
<p> </p>
<dl><dd><dl><dd>Otherwise, the following message will appear:</dd></dl></dd></dl>
<p><img alt="" src="../sites/default/files/CantConnectAdvancedLDAPServerNotification1_4_40.png"></p>
<p> </p>
<p>When the new authentication source is created, it will be displayed in the list of existing Authentication Sources:</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_LDAP_AuthenticationSourcesList.png"></p>

<h4><span id="Authentication_Sources_list">Authentication Sources list </span></h4>
<p>This list displays the name, provider, server address and port for the authentication sources and provides the following options to use the authentication sources:</p>
<ul>
<li><strong>New</strong>: Click this button to create a new authentication source.</li>
<li><strong>Edit</strong>: Select an authentication source in the list and then click this button to edit it.</li>
<li><strong>Delete</strong>: Select an authentication source in the list and then click this button to delete an authentication source.</li>
<li><strong>Import Users</strong>: Select an authentication source in the list and then click this button to import users from that authentication source.</li>
<li><strong>Synchronize Departments</strong>: This option is only enabled for Advanced LDAP. It imports new departments from the selected authentication source and synchronizes the information about existing departments.</li>
<li><strong>Synchronize Groups</strong>: This option is only enabled for Advanced LDAP. It imports new user groups from the selected authentication source and synchronizes the information about existing groups.</li>
</ul>
<p><font color="green"><strong>Note:</strong></font> <font color="dimgrey">Before synchronization users must be assigned to a group or a department in the authentication source.</font></p>

<h3><span id="Importing_Users">Importing Users</span></h3>
<p>After configuring the authentication sources, go to <strong>Admin &gt; Users &gt; Authentication Sources</strong>. Select an authentication source in the list and click on its <strong>Import Users</strong> button.</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_LDAP_ImportUsersButton.png"></p>

<p>In the panel <strong>Search for user</strong>, enter text into the <strong>Keyword</strong> field to do a case-insensitive search for the full name, username, email or distinguished name (dn) of users in the authentication source. Use <tt><strong>*</strong></tt> (asterisk) to do a wildcard search for any number of characters (including zero characters). For instance <strong>jo*n</strong> would find <strong>johan@processmaker.com</strong>, <strong>Joe Norris</strong> and <strong>Jonson</strong>. Enter <tt><strong>*</strong></tt> to return all users in the authentication source.</p>

<p><img alt="" src="../sites/default/files/ProcessMaker3_LDAP_SearchUserPanel.png"></p>

<p style="margin-left:25px"><strong><font color="red">Warning:</font></strong> <font color="dimgrey">The search for LDAP users, supports more than 1000 results. Instead, the search for Active Directory users only support 1000 results. So, if the LDAP/AD server has a large number of users in the thousands, searches may not show any users if the search returns too many results. In this case, narrow the search. For example, searches for "<tt>*</tt>" (all users) or "<tt>e</tt>" (all users with the vowel "e") may not work, but narrowed searches such as "<tt>er</tt>" or "<tt>kat*e</tt>" may work. To increase search results, review the <a href="#Example_to_Increase_Search_Results_When_Importing_Users">Example to Increase Search Results When Importing Users</a> section.</font></p>

<p>The following information will be displayed about the users in the authentication source:</p>
<ul>
<li><strong>Username</strong>:(Formerly named <strong>Name</strong>) This field shows the username.</li>
<li><strong>First Name</strong>: This fields show the user's first name.</li>
<li><strong>Last Name</strong>: This fields show the user's last name.</li>
<li><strong>E-Mail</strong>: This field shows the user's email.</li>
<li><strong>Distinguished Name</strong>: The DN is a chain of information needed to identify a user, such as the common name (cn=), organizational units (ou=) and domain components (dc=), etc.</li>
<li><strong>Status</strong>: It shows whether the user was <strong>IMPORTED</strong> or <strong>NOT IMPORTED</strong>:</li>
</ul>

<p>After finding users, select which ones will be imported by marking the checkbox next to their names. To select all the users in the list, mark the checkbox in the upper left-hand corner. Then click on the <strong>Import</strong> button to import the selected users into ProcessMaker.</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_LDAP_ImportUsersButtonl.png"></p>

<p>After importing user(s), a confirmation message will be displayed. Click on <strong>Yes</strong> to import the user(s); otherwise, the importation of the user(s) will be canceled.</p>
<p><img alt="" src="../sites/default/files/ConfirmationImportingUsersv1_4_40.png"></p>

<p>When done importing users, click on the <strong>Back</strong> button to return to the list of Authentication Sources.</p>

<h4><span id="Example_to_Increase_Search_Results_When_Importing_Users">Example to Increase Search Results When Importing Users</span></h4>
<p>Active Directory by default does not respond to LDAP based queries, which return more than 1000 results. If there are more than 1000 users configured in Active Directory, it is necessary to increase the maximum page size (MaxPageSize) using the Ntdsutil.exe tool. For more information about how to use Ntdsutil.exe, review <a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc753343(v=ws.11)">Ntdsutil | Microsoft Docs</a>.</p>
<p>In the Active Directory server, Ntdsutil can modify the configuration values to allow search of at least 15,000 records. Note that new values are in parenthesis, and the rest are default values.</p>
<codeblock>Policy Current(New)
MaxPoolThreads 4
MaxDatagramRecv 1024
MaxReceiveBuffer 10485760
InitRecvTimeout 120
MaxConnections 5000
MaxConnIdleTime 900
MaxActiveQueries 20
MaxPageSize 1000(15000)
MaxQueryDuration 120
MaxTempTableSize 10000
MaxResultSetSize 262144(6000000)
MaxNotificationPerConn 5
</codeblock>
<p>The following values cause an issue to ProcessMaker.</p>
<codeblock>MaxPageSize - Maximum page size that is supported for LDAP responses (default: 1,000 records)
MaxResultSetSize - Maximum size in bytes of the LDAP Result Set (default: 262144 bytes)
</codeblock>
<p>So, to avoid this issue and ProcessMaker does not remain blank, follow these steps:</p>
<p><b>1. </b>Open a terminal.</p>
<p><b>2. </b>In the ProcessMaker server, as super user edit the <tt>LdapAdvanced.php</tt> file with an editor like <tt>nano</tt>.</p>
<codeblock>nano /processmaker/workflow/engine/classes/LdapAdvanced.php
</codeblock>
<p><b>3. </b>In the file, locate the <tt>searchUsers</tt> method.</p>
<p><b>4. </b>Above this line:</p>
<codeblock>$oSearch = @ldap_search($ldapcnn, $arrayAuthenticationSourceData["AUTH_SOURCE_BASE_DN"],
$filter, array_merge($this->arrayAttributesForUser, $attributeSetAdd));</codeblock>
<p>Add the following lines:</p>
<codeblock>$page = 1000;
$cookie = "";
ldap_control_paged_result($ldapcnn, $page, true, $cookie);</codeblock>
<p><b>5. </b>Clean all cookies in the browser.</p>
<p>The solution above makes the search screen not go blank, showing the 1000 results by default.</p>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">The solution above has been tested in non-production servers. So, this feature will be improved in future ProcessMaker versions.</font></p>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">If the <a href="http://php.net/manual/en/function.ldap-search.php">ldap_search</a> method is used, it limits the count of entries fetched. Setting this to <tt>0</tt> means no limit. This parameter can NOT override server-side preset size limit. This parameter can be set lower though. Some Active Directory server hosts are configured to return no more than a preset number of entries. If this occurs, the server indicates that it has only returned a partial results set. This also occurs if this parameter is used to limit the count of fetched entries.</font></p>

<h3><span id="Synchronization">Synchronization </span></h3>

<p>The Advanced LDAP plugin can be used to update the information about users imported from an authentication source. The plugin can also import both departments and groups into ProcessMaker from LDAP and Active Directory. After importing groups and departments, the Advanced LDAP plugin can be used to synchronize the information about the departments and groups and their users, so the information in ProcessMaker is the same as in the authentication source. The group and department names are immediately imported after selecting which groups and departments will be synchronized, but the members are only imported and synchronized when <a href="../index.php/ProcessMaker_-_AdvancedLDAP.html#Executing_ldapcron.php"><strong><tt>ldapcron.php</tt></strong> is executed</a>.</p>

<p><font color="red"><strong>Warning:</strong></font> <font color="dimgrey">The Advanced LDAP plugin will only import members of a group or an organizational unit from an LDAP server if those users were created as child objects under the group or organizational unit. (Note that ProcessMaker treats organizational units as <i>departments</i>).</font></p>

<p>To configure which departments and groups will be synchronized, go to <strong>Admin&gt; Users Authentication Sources</strong> and select an authentication source in the list that uses Advanced LDAP. The <strong>Synchronize Departments</strong> and <strong>Synchronize Groups</strong> options will be enabled:</p>

<p><img alt="" src="../sites/default/files/ProcessMaker3_LDAP_SynchronizeButtons.png"></p>

<p><strong><font color="green">Note:</font></strong> <font color="dimgrey">In ProcessMaker both groups and departments can contain users, but groups are not hierarchical and users can be members of multiple groups. In contrast, departments are hierarchical with parent departments and child departments and a manager for each department. Users can only be members of one department.</font></p>

<h4><span id="Synchronizing_Departments">Synchronizing Departments</span></h4>
<p>To configure which departments will be synchronized when cron is executed, click on <strong>Synchronize Departments</strong> to display a list of departments and their sub-departments. If the authentication source is LDAP, all organizational units (ou) are considered departments and will be listed.</p>

<p><strong><font color="red">Warning:</font></strong> <font color="dimgrey">If the LDAP server has a large number of records in the thousands, the first time ProcessMaker tries to show its list of departments, it may appear that there are no departments in the authentication source because ProcessMaker spends several minutes constructing the list.</font></p>

<p>Select the departments to import. The department along with all its members will be imported and the information in ProcessMaker about the department and its members will be synchronized each time that cron is executed. Note that in order to select a department, all its parent departments must also be selected.</p>

<p><img alt="" src="../sites/default/files/ProcessMaker3_LDAP_SynchronizeDepartments.png"></p>

<p>After selecting the departments and subdepartments to synchronize, then click on <strong>Save Changes</strong> at the bottom right-hand side of the window. The departments that were selected will immediately be created in ProcessMaker, but the members of the departments will not be imported/synchronized until the cron is executed.</p>

<p><strong><font color="green">Note:</font></strong> <font color="dimgrey">If using LDAP, the <strong>Reports To</strong> field of imported users will be left blank and there will be no supervisors assigned for imported departments. If using Active Directory, the Advanced LDAP plugin will assign the manager for each user by inserting the manager's UID into the <strong><tt>wf_<workspace>.USERS.USR_REPORTS_TO</workspace></tt></strong> field in the MySQL database, but it doesn't assign supervisors to imported departments. After importing a department from LDAP or Active Directory, the supervisor must be manually assigned for the department.</font></p>

<p><img alt="" src="../sites/default/files/USR_REPORTS_TO_DB.png"></p>

<h4><span id="Synchronizing_Groups">Synchronizing Groups</span></h4>
<p>To configure which groups will be synchronized when cron is executed, click on <strong>Synchronize Groups</strong> to display a list of groups from the selected authentication source.</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_LDAP_SynchronizeGroups.png"></p>

<p><strong><font color="red">WARNING:</font></strong> <font color="dimgrey">If the LDAP server has a large number of records in the thousands, the first time ProcessMaker tries to show its list of groups, it may appear that there are no groups in the authentication source because ProcessMaker spends several minutes constructing the list.</font></p>

<p>Select the groups to synchronize and then click on <strong>Save Changes</strong>. The groups that were selected will immediately be created in ProcessMaker, but the members of the groups will not be imported/synchronized until cron is executed.</p>

<h3><span id="Executing_ldapcron.php">Executing <strong><code>ldapcron.php</code></strong></span></h3>

<p>Synchronize users, groups and departments by using the Advanced LDAP cron file, which is located at <strong><tt>workflow\engine\bin\ldapcron.php</tt></strong>. This file will be executed independently, meaning that the ProcessMaker <a href="../index.php/Executing_cron.html" title="Executing cron.php">cron file</a> won't execute the LDAP synchronization.</p>
<p>To execute the <strong><tt>ldpacron.php</tt></strong> file from the command line:</p>

<p><strong>Windows:</strong></p>

<div style="margin-left:25px"><p>Change to the directory where the <strong><code>php.exe</code></strong> file is located to run PHP and then issue the command to execute the <strong><code>ldapcron.php</code></strong> file:</p>

<codeblock>
cd <INSTALL-DIRECTORY>\php
php -f "<INSTALL-DIRECTORY>\processmaker\workflow\engine\bin\ldapcron.php"
</codeblock>
</div>

<p><strong>Linux/UNIX:</strong></p>
<div style="margin-left:25px">
<codeblock>
php -f <INSTALL-DIRECTORY>/workflow/engine/bin/ldapcron.php
</codeblock>
</div>

<p>If the <strong><tt>ldapcron.php</tt></strong> script is executed without any options, the imported users and selected departments and groups will be synchronized for all workspaces.</p>
<dl><dd><strong><font color="green">Note:</font></strong> <font color="dimgrey">The Advanced LDAP plugin takes roughly an hour to import 20,000 new users from LDAP and 25 minutes to update 20,000 user profiles from LDAP, so it is recommended to use the <strong><tt>+force</tt></strong> option to prevent problems with large authentication sources if executing the <strong><tt>ldapcron.php</tt></strong> file as a cron job in Linux/UNIX or a Scheduled Task in Windows.</font></dd></dl>
<p>If executed from the command line, the following information is displayed about the users, departments and groups that were synchronized:</p>
<codeblock>
# php /opt/processmaker/workflow/engine/bin/ldapcron.php 
Processing workspace: workflow
+--------------------------------------------------------------------------------------------------+
| Authentication Source: Example Company LDAP Server
...
...
....
--- details of the import/update of users, departments, groups, etc---

Finished 1 workspaces processed
Done! 
</codeblock>
<p><img alt="" src="../sites/default/files/ProcessMaker3_LDAP_ConsoleResult.png"></p>

<p>To see more detailed information about the synchronization, check the contents of the <strong><tt><a href="../index.php/File_Locations.html#Installation_Directory" title="File Locations"><install-directory></a>/shared/log/ldapAdvanced.log</tt></strong> file.</p>
<dl><dd><strong><font color="green">Hint:</font></strong> <font color="dimgrey"><strong><tt>ldapcron.php</tt></strong> appends new information to the <strong><tt>ldapAdvanced.log</tt></strong> file each time the script is executed. If <strong><tt>ldapcron.php</tt></strong> will be executed periodically as a cron job or scheduled task, it is recommended to also periodically delete the <strong><tt>ldapAdvanced.log</tt></strong> file to save disk space on the ProcessMaker server and improve the processing time of the <strong><tt>ldapcron.php</tt></strong> script.</font></dd></dl>

<h4><span id="ldapcron.php_Options">ldapcron.php Options</span></h4>
<p>The options to run the ldap cron in a server console are the following:</p>
<ul>
<!--<li><strong>+d</strong> Specify an alternative date and time for the script.
<p>By default, the script will execute using the server's current system time. If may be useful to specify an alternative date and time when testing for past or future events. Remember to use 4 digits for specifying the year and 2 digits for specifying the month, day, hour, minute and seconds. The time is on a 24 hour clock.</dd><dd><strong>Ex:</strong> <code>php ldapcron.php +d"2015-09-25 07:05:59"</code></p>
</li>-->
<li><strong>+w</strong> Specify a workspace whose imported users and selected departments and groups will be synchronized.
<p>By default, the pending activities in <i>all</i> workspaces are executed. To save processing, it can be useful to only execute the pending activities in a single workspace.</dd><dd><strong>Ex:</strong> <tt>php ldapcron.php +wworkflow</tt></p>
</li>
<li><strong>+force</strong> This option ensures that the <strong><tt>ldapcron.php</tt></strong> file is executed by stopping the execution of any existing ldapcron job and deleting its temporary files, so the current ldapcron can be executed. Remember that only one instance of ldapcron can be executed at a time, so without the <strong><tt>+force</tt></strong> option, <tt>ldapcron.php</tt> will not be executed if another instance is already being executed.</li></ul>
<dl><dd><strong>Ex:</strong> <tt>php ldapcron.php +force</tt></dd></dl>
<dl><dd><strong><font color="green">Note:</font></strong> <font color="dimgrey">If not using the <tt>+force</tt> option to cancel the execution of <tt>ldapcron.php</tt>, press <tt>CTRL+C</tt> in the command line or use the <strong><tt><a  href="http://www.digitalocean.com/community/tutorials/how-to-use-ps-kill-and-nice-to-manage-processes-in-linux" >kill</a></tt></strong> command in Linux or the Task Manager in Windows to kill the process. Also delete the temporary file located at: <strong><tt><a href="../index.php/File_Locations.html#Installation_Directory" title="File Locations"><install-directory></a>/shared/ldapcron</tt></strong></font></dd></dl>
<ul><li><strong>+debug</strong> Inserts more detailed information into the <strong><tt><a href="../index.php/ProcessMaker_-_AdvancedLDAP.html#Installation_Directory"><install-directory></a>/shared/log/ldapadvance.log</tt></strong> file. It lists the properties used to connect to the authentication sources and lists the users, groups and departments that were created, updated, moved or deleted. Use this option to investigate any errors that may occur during the synchronization.</li></ul>
<dl><dd><strong>Ex:</strong> <tt>php ldapcron.php +debug</tt></dd></dl>
<div style="margin-left:40px"><p>If some users can't be imported from an authentication source, they will be listed as <strong><tt>impossible</tt></strong>. To see which users couldn't be imported, run <strong><tt>ldapcron.php</tt></strong> again with the <strong><tt>+debug</tt></strong> option. Then, search in the <strong><tt>ldapadvance.log</tt></strong> file for the users listed in the line after "<tt>Impossible Users:</tt>".</p>
<p>For example, the following commands can be used in Linux/UNIX to find the users that can't be imported:</p>

<codeblock># <strong>php /opt/processmaker/workflow/engine/bin/ldapcron.php</strong> 
Processing workspace: workflow
+--------------------------------------------------------------------------------------------------+
| Authentication Source: Example Company LDAP Server                                                           
...
...
....
--- details of the import/update of users, departments, groups, etc---
Finished 1 workspaces processed
Done! 
</codeblock>

<p>The output of <tt>ldapcron.php</tt> shows that 3 users couldn't be imported, so run <tt>ldapcron.php</tt> again with the <tt>+debug</tt> option:</p>

<codeblock># <strong>php /opt/processmaker/workflow/engine/bin/ldapcron.php <font color="green">+debug</font></strong> 
</codeblock>

<p>Then use the <tt><a  href="http://www.cyberciti.biz/faq/howto-use-grep-command-in-linux-unix/" >grep</a></tt> command to find the usernames of the 3 users:</p>

<codeblock># <strong>grep -A 1 "Impossible Users:" shared/log/ldapadvanced.log</strong> 
2014-11-28 09:34:04  workflow 0 Impossible Users:  
2014-11-28 09:34:04  workflow 0 <strong><font color="green">liliana fernando eric</font></strong>
</codeblock>
</div>

<h3><span id="Mapping_user_information_between_Active_Directory_and_ProcessMaker">Mapping User Information Between Active Directory and ProcessMaker</span></h3>

<p>When importing users, information about the user in Active Directory can be mapped to fields about the user in the ProcessMaker database. To map information between the authentication source and the ProcessMaker database, mark the <strong>Match attributes to sync</strong> checkbox and a section will appear to link fields in the authentication source to fields in the ProcessMaker database.</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_LDAP_MappingFields.png"></p>

<ul>
<li><tt><strong>LDAP Field:</strong></tt> Enter an LDAP field name. The <a  href="http://www.ldapbrowser.com/" >Softerra LDAP Browser</a> can be used to find the LDAP field names. The field names must not contain spaces. For example, the field "Telephone Number" would be defined as "telephoneNumber" in LDAP.</li>
<li><tt><strong>User field:</strong></tt> Enter one of the following fields in the <strong><tt>wf_<workspace>.USERS</workspace></tt></strong> table:</li></ul>
<dl><dd><tt>USR_FIRSTNAME</tt>: User's first name.</dd><dd><tt>USR_LASTNAME</tt>: User's last name.</dd><dd><tt>USR_DUE_DATE</tt>: The date when the user account is set to expire in <tt>YYYY-MM-DD</tt> format. Ex: <tt>2020-12-31</tt></dd><dd><tt>USR_STATUS</tt>: The user's status, which can be: <tt>ACTIVE</tt>, <tt>INACTIVE</tt>, or <tt>VACATION</tt></dd><dd><tt>USR_ADDRESS</tt>: The user's address.</dd><dd><tt>USR_PHONE</tt>: The user's phone number.</dd><dd><tt>USR_FAX</tt>: The user's fax number.</dd><dd><tt>USR_CELLULAR</tt>: The user's cellular phone number.</dd><dd><tt>USR_ZIP_CODE</tt>: The user's zip or postal code.</dd><dd><tt>USR_POSITION</tt>: The user's position, which can be any value such as "Accountant", "Human resources manager", etc.</dd><dd><tt>USR_BIRTHDAY</tt>: The user's birthday in <tt>YYYY-MM-DD</tt> format. Ex: <tt>1970-04-21</tt>.</dd></dl>
<p>As many fields as needed can be added to the list.</p>
<p>For example, inside your Active Directory server, choose a user to import. Go to the user's properties and add a job title inside <strong>Organization - Title</strong>:</p>
<p><img alt="" src="../sites/default/files/AddingAFieldinActiveDirectory.png"></p>
<p>After adding the field, log in to ProcessMaker and go to <strong>Admin &gt; Users &gt; Authentication Sources</strong>. Select the Active Directory server, click on <strong>Edit</strong> and map the Title field in Active Directory to the USR_POSITION field in the ProcessMaker database.</p>
<p>Then, click on <strong>Import Users</strong>:</p>
<p><img alt="" height="110" src="../sites/default/files/ImportingUsersOption.png" width="547"></p>
<p>Search for the user who will be imported to ProcessMaker. Select the user and click <strong>Import</strong>:</p>
<p><img alt="" height="495" src="../sites/default/files/ImportingTheUserLDAP.png" width="863"></p>
<p>Finally, go to <strong>Admin &gt; Users</strong> and look for the imported user:</p>
<p><img alt="" height="376" src="../sites/default/files/ListUserInformationLDAP.png" width="729"></p>
<p>In this example, the position field has been updated with the title information added in Active Directory</p>
<p><font color="green"><strong>Note:</strong></font> <font color="dimgrey">If the field in Active Directory or LDAP is greater in size than the field in the ProcessMaker database, then the value will be truncated to the maximum number of characters allowed for the field in ProcessMaker.</font></p>

<h2><span id="Changing_user_password_after_importing_and_synchronization">Changing User Password After Importing and Synchronization</span></h2>

<p>During login, the authentication of imported users occurs in Active Directory, not in ProcessMaker.</p>
<p>After users are imported from Active Directory, their passwords can NOT be changed in ProcessMaker; instead, their passwords need to be changed inside Active Directory. Passwords must meet the following requirements:</p>
<ul><li>The password must be at least six characters long.</li><li>The password must contain characters from at least three of the following five categories:<ul><li>English uppercase characters (A - Z)</li><li>English lowercase characters (a - z)</li><li>Base 10 digits (0 - 9)</li><li>Non-alphanumeric (For example: !, $, #, or %)</li><li>Unicode characters</li></ul></li><li>Do NOT use spaces after and before the password</li></ul>
<p><strong><font color="red">Warning:</font></strong> <font color="dimgrey">If the password is changed in ProcessMaker, the user cannot log in.</font></p>

<p>To check whether a user was imported from Active Directory, go to <strong>Admin &gt; Users</strong> and select the user in the list and click on <strong>Authentication</strong>. If the Authentication Source option is an Active Directory connection, the password must be changed in Active Directory.</p>
<p><img alt="" height="167" src="../sites/default/files/AuthenticationSourceAssignmentPM2_5_X.png" width="511"></p>
<p>If the Authentication Source option is <tt>"ProcessMaker (MYSQL)"</tt>, the password must be changed in ProcessMaker:</p>
<p><img alt="" height="156" src="../sites/default/files/AuthenticationSourceAssignmentMYSQLPM2_5_X.png" width="518"></p>

<h2><span id="Changing_a_user_status_after_importing_and_synchronization">Changing a User Status after Importing and Synchronization</span></h2>

<p>After users are imported from Active Directory, any change to a user's status must be configured in the Active Directory server. Any change is overwritten in the next sync with the ProcessMaker server. Note that the user status "On vacation", which can be configured in ProcessMaker, is considered an active status and will be maintained after the sync.</p>

<p></p>
<table>
	<tr>
		<th>Active Directory</th>
		<th>ProcessMaker Status Change</th>
		<th>Result in ProcessMaker</th>
	</tr>
	<tr>
		<td>Active</td>
		<td>Active -> Active </td>
		<td>The status will remain active.</td>
	</tr>
	<tr>
		<td>Active</td>
		<td>Inactive -> Active</td>
		<td>The status will be changed to active, as set in Acstive Directory.</td>
	</tr>
	<tr>
		<td>Active</td>
		<td>Vacation -> Vacation</td>
		<td>The On Vacation status will remain. </td>
	</tr>
	<tr>
		<td>Inactive </td>
		<td>Active -> Inactive</td>
		<td>The status will be changed to inactive.</td>
		
	</tr>
	<tr>
		<td>Inactive</td>
		<td>Inactive -> Inactive</td>
		<td>The status will remain inactive.</td>
	</tr>
	<tr>
		<td>Inactive</td>
		<td>Vacation -> Inactive</td>
		<td>The status will be changed to inactive.</td>
	</tr>
</table>

</div></div></div>  </div>

      <footer>
          </footer>
  
    </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
      </section>
    </div>
  
      
    </div>

      
</div>

 <!---add diego--->
  <div id="download-app-section" class="download-app mobile-none">
			<div class="row">
				<div class="col-md-12">
					<div class="text_app">Download our app</div>
							<a href="https://itunes.apple.com/us/app/processmaker/id992576284?ls=1&amp;mt=8" target="_blank">
								<img src="../themes/thecompany_responsive_theme/images/appstore.png">
							<a href="https://play.google.com/store/apps/details?id=com.colosa.processmaker" target="_blank">
								<img src="../themes/thecompany_responsive_theme/images/playstore.png">				
				</div>
			</div>
  </div>
  <!---end diego--->
<!----add diego----->    
		<div class="logo_processmaker"><a href="http://www.processmaker.com/">
		<img src="../themes/thecompany_responsive_theme/images/logo_processmaker.png"></div>
<!----end diego----->
<div id="footer">
  <div id="footer_wrapper">
      </div>

  <div class="social-media-wrapper">
         <div id="social-media-icons">
       <ul>
       	<div class="text_contact">Contact us</div>
				<div class="text_number">+1-617-340-3377</div>
        <!--<li><a class="rss" href="/rss.xml">rss</a></li> <!--edit diego-->
        <li><a class="facebook" href="http://facebook.com/processmaker/" target="_blank" rel="me">facebook</a></li>
        <li><a class="twitter" href="https://twitter.com/processmaker" target="_blank" rel="me">twitter</a></li>
        <li><a class="gplus" href="https://www.google.com/+ProcessMakerOpenSource" target="_blank" rel="me">Gplus</a></li>
        <li><a class="linkedin" href="https://www.linkedin.com/groups?mostRecent=&amp;gid=3970335&amp;trk=my_groups-tile-flipgrp" target="_blank" rel="me">Linked in</a></li>
        <!--<li><a class="dribbble" href="http://dribbble.com" target="_blank" rel="me">Dribbble</a></li>
        <li><a class="vimeo" href="http://vimeo.com" target="_blank" rel="me">Vimeo</a></li>-->
        <li><a class="youtube" href="https://www.youtube.com/user/processmaker" target="_blank" rel="me">Youtube</a></li>
       </ul>
      </div>
      </div>
  
  <div class="footer_credit">
    <div class="footer_inner_credit">
           <div id="foot"><div class="region region-footer">
  <div id="block-block-2" class="block block-block">

      
  <div class="content">
    <p><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">Automate your Workflow with Business Process Management<br>Software licensed under the <a 1px="" class="external text" href="http://www.gnu.org/licenses/agpl.html" rel="nofollow" style="padding-right: 13px; color:white;">GNU Affero General Public License version 3</a><br>Contact us:&nbsp;<a class="external free" href="mailto:community@processmaker.com" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">community@processmaker.com</a><br><a class="external free" href="https://www.processmaker.com/privacy-statement" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">Privacy Statement</a></font><br><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">© Copyright 2000-2024 ProcessMaker Inc. All rights reserved.</font></p>
  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
</div>
         
   <!-- <div id="copyright">
      <p class="copyright">Copyright &copy; 2024, Documentation@ProcessMaker </p>
      <!--<p class="credits"> Developed by  <a href="http://www.zymphonies.com">Zymphonies</a></p>
      <div class="clear"></div>
    </div>-->
  </div>
  
  </div>
</div>

</div>

<script type="text/javascript">
  /* <![CDATA[ */
  document.write (
    '<img src="https://marketing.processmaker.com/acton/bn/3812/visitor.gif?ts='+ new Date().getTime()+ '&ref='+escape(document.referrer) + '">'
  );
  /* ]]> */
</script>
  
</div>
    <style>
    .center-div{
        width: 100%;        
        margin: 0 auto;
        z-index:10000;
        position:fixed;
        bottom: 0px;
        cursor:pointer;
    }
    .round-popup{
        margin:0 auto;
        font-family: 'Montserrat', sans-serif;
        font-size: 15px;
        font-weight: lighter;
        width: 412px;
        height: 50px;
        padding-top: 7px;
        text-align: center;
        position:relative;
    }
    .round-popup-button{
        position:absolute;
        top: 11px;
        right: 15px;
        background: transparent;
        border:none;
        font-size:15px;
        font-weight:normal;
        line-height:20px;
        width:20px;
        height:20px;
        padding:0;
    }
    .round-background-blue{
        background: url('http://www.processmaker.com/uploads/blue.png')no-repeat;
        color:white;
        
    }
    #box-pm31-button-blue{
        color: rgba(255, 255, 255, 0.5);
    }
    
    #box-pm31-button-blue:active,#box-pm31-button-blue:focus{
        border:none;
        outline:none;
    }
    .round-background-blue a{
        color: white!important;
        text-decoration: none;
        font-size: 15px;
        line-height:45px;
        font-family:Montserrat, sans-serif;
    }
    .round-background-blue span{
        font-weight: bold;
    }
    /*WHITE background*/
    .round-background-white{
        background: url('http://www.processmaker.com/uploads/white.png')no-repeat;
        background-position-x: -9px;        
        color: #3397E1;
    }
    .round-background-white a:hover{
        color: #3397E1!important;
        text-decoration: none;
        font-size: 15px;
    }
    #box-pm31-button-white{
        color: rgba(51, 151, 225, 0.7);
    }
</style>
    <div id="box-pm31" class="center-div" style="display:none;">
        <div class="round-popup round-background-blue">
            <a onclick="ga('send', 'event', 'WikiBlueBanner','click','PM31Release');" href="http://www.processmaker.com/download-processmaker-landing-page">
                <span>ProcessMaker 3.1</span> is Here! Download Now <span style="font-size:20px;font-weigth:normal;">»</span>
            </a>
            <button id="box-pm31-button-blue" class="round-popup-button">&times;</button>
        </div>
    </div>
    <script>

function pmCreateCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function pmReadCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function pmEraseCookie(name) {
    createCookie(name,"",-1);
}



     jQuery(document).ready(function( $ ) {
        $('#box-pm31-button-blue').click(function(e){
                e.stopPropagation();
                $('#box-pm31').slideUp('fast');
                pmCreateCookie('ppcookie','val',10);
            });
        });
        jQuery(window).load(function() {
            if(pmReadCookie('ppcookie') !== 'val'){
                //jQuery('#box-pm31').delay( 2000 ).slideDown('slow');
            }
        });
    </script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">

<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
    // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
    // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.marinsm.com/serve/586a7ec3a2ae6b728400003d.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>

</body>

<!-- Mirrored from wiki.processmaker.com/node/660 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Feb 2024 10:01:37 GMT -->
</html>
