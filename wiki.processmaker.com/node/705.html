<!DOCTYPE html>

<!-- Mirrored from wiki.processmaker.com/node/705 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Feb 2024 09:30:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta name="keywords" content="BPM, business process management, workflow, processmaker, business, BPM Windows, BPM Linux, wiki, BPM documentation, BPM FAQ, task documentation, BPM PHP, BPM Open Source, BPM Variables, BPM Installation, BPM Programming, BPM Elements, BPM Concepts, BPM Frequently Asked Questions, BPM 3.0, BPM News, Release notes, DynaForms, BPM Community, BPM Enterprise, BPM Mobile, BPM Responsive Web Design, User Manual, BPM Resources" />
<link rel="alternate" hreflang="en" href="../index.html" />
<link rel="shortcut icon" href="../themes/thecompany_responsive_theme/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="description" content="ProcessMaker is commercial open source workflow and business process management software." />
<meta name="viewport" content="width=device-width" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="../Best_Practices/Advanced_Developer_Triggers.html" />
<link rel="shortlink" href="705.html" />
<title>3.2 - 3.7 - Best Practices - Advanced Developer - Triggers | Documentation@ProcessMaker</title>
<style type="text/css" media="all">
@import url("../modules/system/system.base2af9.css?s743n7");
@import url("../modules/system/system.menus2af9.css?s743n7");
@import url("../modules/system/system.messages2af9.css?s743n7");
@import url("../modules/system/system.theme2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../modules/aggregator/aggregator2af9.css?s743n7");
@import url("../modules/comment/comment2af9.css?s743n7");
@import url("../modules/field/theme/field2af9.css?s743n7");
@import url("../modules/node/node2af9.css?s743n7");
@import url("../modules/search/search2af9.css?s743n7");
@import url("../modules/toc_filter/toc_filter2af9.css?s743n7");
@import url("../modules/user/user2af9.css?s743n7");
@import url("../modules/views/css/views2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../sites/all/modules/colorbox/styles/default/colorbox_style2af9.css?s743n7");
@import url("../modules/ctools/css/ctools2af9.css?s743n7");
@import url("../sites/all/modules/geshifilter/geshifilter2af9.css?s743n7");
@import url("../modules/panels/css/panels2af9.css?s743n7");
@import url("../modules/nice_menus/css/nice_menus2af9.css?s743n7");
@import url("../modules/nice_menus/css/nice_menus_default2af9.css?s743n7");
@import url("../modules/fivestar/css/fivestar2af9.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("../themes/thecompany_responsive_theme/css/style2af9.css?s743n7");
@import url("../themes/thecompany_responsive_theme/css/media2af9.css?s743n7");
</style>
<script type="text/javascript" src="../modules/jquery_update/replace/jquery/1.9/jquery.min4b17.js?v=1.9.1"></script>
<script type="text/javascript" src="../misc/jquery.once7839.js?v=1.2"></script>
<script type="text/javascript" src="../misc/drupal2af9.js?s743n7"></script>
<script type="text/javascript" src="../modules/nice_menus/js/jquery.bgiframef195.js?v=2.1"></script>
<script type="text/javascript" src="../modules/nice_menus/js/jquery.hoverIntent1f6b.js?v=0.5"></script>
<script type="text/javascript" src="../modules/nice_menus/js/superfish099d.js?v=1.4.8"></script>
<script type="text/javascript" src="../modules/nice_menus/js/nice_menusc619.js?v=1.0"></script>
<script type="text/javascript" src="../modules/jquery_update/replace/ui/external/jquery.cookie1683.js?v=67fb34f6a866c40d0570"></script>
<script type="text/javascript" src="../modules/jquery_update/replace/misc/jquery.form.min97e5.js?v=2.69"></script>
<script type="text/javascript" src="../misc/ajax2347.js?v=7.34"></script>
<script type="text/javascript" src="../modules/jquery_update/js/jquery_update241d.js?v=0.0.1"></script>
<script type="text/javascript" src="../modules/toc_filter/toc_filter2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/js/colorbox2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/styles/default/colorbox_style2af9.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/google_analytics/googleanalytics2af9.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","../../www.google-analytics.com/analytics.js","ga");ga("create", "UA-3380652-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript" src="../misc/progress2347.js?v=7.34"></script>
<script type="text/javascript" src="../modules/fivestar/js/fivestar.ajax2af9.js?s743n7"></script>
<script type="text/javascript" src="../modules/fivestar/js/fivestar2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-1.10.2.min2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-ui2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/jquery-ui.min2af9.js?s743n7"></script>
<script type="text/javascript" src="../themes/thecompany_responsive_theme/js/custom2af9.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"thecompany_responsive_theme","theme_token":"92uE11RZY6OmwFWPb2mhM1qgkgIcd_Qc3B3IOyrvYlQ","jquery_version":"1.9","js":{"modules\/jquery_update\/replace\/jquery\/1.9\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"modules\/nice_menus\/js\/jquery.bgiframe.js":1,"modules\/nice_menus\/js\/jquery.hoverIntent.js":1,"modules\/nice_menus\/js\/superfish.js":1,"modules\/nice_menus\/js\/nice_menus.js":1,"modules\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"modules\/jquery_update\/replace\/misc\/jquery.form.min.js":1,"misc\/ajax.js":1,"modules\/jquery_update\/js\/jquery_update.js":1,"modules\/toc_filter\/toc_filter.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox.js":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"misc\/progress.js":1,"modules\/fivestar\/js\/fivestar.ajax.js":1,"modules\/fivestar\/js\/fivestar.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-1.10.2.min.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.min.js":1,"themes\/thecompany_responsive_theme\/js\/custom.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/toc_filter\/toc_filter.css":1,"modules\/user\/user.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"modules\/panels\/css\/panels.css":1,"modules\/nice_menus\/css\/nice_menus.css":1,"modules\/nice_menus\/css\/nice_menus_default.css":1,"modules\/fivestar\/css\/fivestar.css":1,"themes\/thecompany_responsive_theme\/css\/style.css":1,"themes\/thecompany_responsive_theme\/css\/media.css":1}},"colorbox":{"opacity":"0.85","current":"{current} of {total}","previous":"\u00ab Prev","next":"Next \u00bb","close":"Close","maxWidth":"98%","maxHeight":"98%","fixed":true,"mobiledetect":true,"mobiledevicewidth":"480px","specificPagesDefaultValue":"admin*\nimagebrowser*\nimg_assist*\nimce*\nnode\/add\/*\nnode\/*\/edit\nprint\/*\nprintpdf\/*\nsystem\/ajax\nsystem\/ajax\/*"},"toc_filter_smooth_scroll_duration":"","googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip","trackColorbox":1},"nice_menus_options":{"delay":"800","speed":"slow"},"ajax":{"edit-vote--2":{"callback":"fivestar_ajax_submit","event":"change","url":"\/system\/ajax","submit":{"_triggering_element_name":"vote"}}}});
//--><!]]>
</script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','../../connect.facebook.net/en_US/fbevents.js');
// Insert Your Facebook Pixel ID below.
fbq('init', '735235999992228');
fbq('track', 'PageView');
</script>
<!-- Insert Your Facebook Pixel ID below. -->
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=735235999992228&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-705 node-type-processmakerbpm">
    
<div class="wrap">

<div id="header_wrapper">
  <div id="inner_header_wrapper">

    <header id="header" role="banner">
      
      <div class="header_inner_wrapper">
        <div class="header_left">
                      <div id="logo">
              <a href="../index.html" title="Home"><img src="../sites/default/files/full-logo.png"/></a>
            </div>
                    	  <div class="menu_wrapper">
            <nav id="main-menu"  role="navigation">
              <a class="nav-toggle" href="#">Navigation</a>
              <div class="menu-navigation-container">
                <ul class="menu"><li class="first leaf"><a href="../PM_Classic.html" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="leaf"><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="leaf"><a href="../3.1/user_guide.html">User Guide</a></li>
<li class="leaf"><a href="../3.1/developer_info.html">Developer Info</a></li>
<li class="leaf"><a href="../3.2/sys_administration.html">Sys Administration</a></li>
<li class="leaf"><a href="../3.1/resources.html">Helpful Resources</a></li>
<li class="leaf"><a href="../Sitemap.html">Sitemap</a></li>
<li class="last leaf"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>              </div>
              <div class="clear"></div>
            </nav>
          </div>
                  <!--  <h1 id="site-title">
            <a href="/" title="Home">Documentation@ProcessMaker</a>
            <div id="site-description"></div>
          </h1> -->
            
        </div>
      </div>
      <div class="header_right">
          <div class="region region-search">
  <div id="block-search-form" class="block block-search">

        <h2 >_</h2>
    
  <div class="content">
    <form action="https://wiki.processmaker.com/node/705" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." placeholder="Search" type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-L__0Y6tUNK_3Hih9Ot2Q-kXnqDe9iHPodDduW100WXc" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
                  <h1 class="page-title">3.2 - 3.7 - Best Practices - Advanced Developer - Triggers</h1>                <p class="page-title-suffix"></p>
                 <div style="margin-top: 5px;"></div>
      </div>
    </header>
    <div class="region-version">
      <span>Version: </span><ul><li><a  class="active-version">3.8</a></li><li><a  class="active-version">3.7</a></li><li><a  class="active-version">3.6</a></li><li><a  class="active-version">3.5</a></li><li><a  class="active-version">3.4</a></li><li><a  class="active-version">3.3</a></li><li><a  class="active-version">3.2</a></li></ul>    </div>
  </div>
</div>
<!-- <ul class="nice-menu nice-menu-down nice-menu-main-menu" id="nice-menu-0"><li class="menu-506 menu-path-node-1078 first odd "><a href="/PM_Classic" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="menu-319 menu-path-processmakercom-tutorials  even "><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="menu-320 menu-path-node-571  odd "><a href="/3.1/user_guide">User Guide</a></li>
<li class="menu-1138 menu-path-node-572  even "><a href="/3.1/developer_info">Developer Info</a></li>
<li class="menu-1197 menu-path-node-876  odd "><a href="/3.2/sys_administration">Sys Administration</a></li>
<li class="menu-1140 menu-path-node-236  even "><a href="/3.1/resources">Helpful Resources</a></li>
<li class="menu-1141 menu-path-node-554  odd "><a href="/Sitemap">Sitemap</a></li>
<li class="menu-1213 menu-path-sprocessmakergitbookio-processmaker-  even last"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>
-->
  
  <div id="container">
    
    <div class="content-sidebar-wrap">

    <div id="content">

              <!-- <div id="breadcrumbs">
        <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="/">Home</a></div></div> -->
      
      <section id="post-content" role="main">
                                        <div class="region region-content">
  <div id="block-system-main" class="block block-system">

      
  <div class="content">
                          <span property="dc:title" content="3.2 - 3.7 - Best Practices - Advanced Developer - Triggers" class="rdf-meta element-hidden"></span>  
      
    
  <div class="content node-processmakerbpm">
    <div class="field field-name-field-how-useful-did-you-find-th field-type-fivestar field-label-above"><div class="field-label">Please rate how useful you found this document:&nbsp;</div><div class="field-items"><div class="field-item even"><form class="fivestar-widget" action="https://wiki.processmaker.com/node/705" method="post" id="fivestar-custom-widget" accept-charset="UTF-8"><div><div  class="clearfix fivestar-average-text fivestar-average-stars fivestar-form-item fivestar-default"><div class="form-item form-type-fivestar form-item-vote">
 <div class="form-item form-type-select form-item-vote">
 <select id="edit-vote--2" name="vote" class="form-select"><option value="-">Select rating</option><option value="20">Give 3.2 - 3.7 - Best Practices - Advanced Developer - Triggers 1/5</option><option value="40">Give 3.2 - 3.7 - Best Practices - Advanced Developer - Triggers 2/5</option><option value="60" selected="selected">Give 3.2 - 3.7 - Best Practices - Advanced Developer - Triggers 3/5</option><option value="80">Give 3.2 - 3.7 - Best Practices - Advanced Developer - Triggers 4/5</option><option value="100">Give 3.2 - 3.7 - Best Practices - Advanced Developer - Triggers 5/5</option></select>
<div class="description"><div class="fivestar-summary fivestar-summary-average-count"><span class="average-rating">Average: <span >2.8</span></span> <span class="total-votes">(<span >5</span> votes)</span></div></div>
</div>

</div>
</div><input class="fivestar-submit form-submit" type="submit" id="edit-fivestar-submit" name="op" value="Rate" /><input type="hidden" name="form_build_id" value="form-y7NuP9tWmbwLAFjN01j5qVSqScpCuGAwK41bVqxLJ1k" />
<input type="hidden" name="form_id" value="fivestar_custom_widget" />
</div></form></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><div class="getting-started-index">
    <ul>
        <li><a href="../Best_Practices/ProcessMaker_Installation.html">1. ProcessMaker Installation</a></li>
        <li><a href="../Best_Practices/ProcessMaker_Upgrade.html">2. ProcessMaker Upgrade</a></li>

        <li><a href="../Best_Practices/ProcessMaker_Administration.html">3. ProcessMaker Administration</a></li>

        <li><a href="../Best_Practices/User_Management.html">4. User Management</a></li>

        <li><a href="../Best_Practices/Process_Development.html">5. Process Development</a></li>
        <li><a href="../Best_Practices/Advanced_Developer_REST.html">6. Advanced Developer - REST</a></li>
        <li><a class="getting-started-index-active">7. Advanced Developer - Triggers</a></li>
        <li><a href="../Best_Practices/Advanced_Developer_Javascript.html">8. Advanced Developer - Javascript</a></li>
        <li><a href="../Best_Practices/ProcessMaker_End_User.html">9. ProcessMaker End User</a></li>
        <li><a href="../Best_Practices/ProcessMaker_Mobile.html">10. ProcessMaker Mobile</a></li>
    </ul>
</div>

<div class="getting-started-content">
    <div style="float: right; margin-left: 5px; background-color: #f9f9f9; border: 1px solid #aaaaaa; padding: 5px;"><center><strong>Contents:</strong> [<a href="#" onclick="var el = document.getElementById('toc');
        var txt = ('innerText' in el)? 'innerText' : 'textContent';
        if (el.style.display=='none') { 
           el.style.display = '';
           document.getElementById('hideLabel')[txt] = 'hide';
        }
        else {
	        el.style.display = 'none';
           document.getElementById('hideLabel')[txt] = 'show';
        }"><span id="hideLabel">hide</span></a>]</b></center><div id="toc" ><ol class="toc">
<li class="toc"><a href="#Triggers">Triggers</a></li>
<ol class="toc">
<li class="toc"><a href="#ProcessMaker_Functions">ProcessMaker Functions</a></li>
<li class="toc"><a href="#ProcessMaker_Database">ProcessMaker Database</a></li>
<li class="toc"><a href="#The_executeQuery_Function">The executeQuery() Function</a></li>
<li class="toc"><a href="#Query_Performance">Query Performance</a></li>
</ol>
</div></div>

    <h2><span id="Triggers">Triggers</span></h2>
    <ul>
        <li>It is recommended to write a descriptive title for the trigger so its function is immediately obvious, as well as a brief description of what it does.</li>
        <li>It is recommended to add comments to the code source that describe what each section of code does.</li>
        <li>UID stands for "unique identification", which is a string of 32 hexadecimal characters that identifies objects in ProcessMaker (read more <a href="../3.2/Triggers.html#System_Variables_in_Triggers">here</a>).</li>
        <li>Avoid using PHP global variables, such as ($_GET, $_POST, $_SESSION, etc). It is recommended to use case variables instead.</li>

        <li>Triggers are not executed after Dynaform steps if the Dynaform's data isn't saved (i.e., a submit button was not clicked). If the Next Step link is clicked, then the trigger after the Dynaform will not be fired. To work around this problem, set the trigger to fire before the next step (or before assignment if the last step in the task) (read more <a href="../3.2/Triggers.html#When_to_set_Triggers_to_Fire">here</a>).</li>

        <li>It is recommended to do not change the structure of the trigger while there are still cases running (read more <a href="../3.2/Triggers.html#Triggers_Management">here</a>).</li>
        <li>It is recommended to review the PHP trigger so as to avoid syntax that causes any type of fatal error. A fatal error stops case routing by interrupting the Laravel Jobs queue.</li>
    </ul>
    <h3><span id="ProcessMaker_Functions">ProcessMaker Functions</span></h3>
    <ul>
        <li>It is recommended to work with the ProcessMaker <a href="../3.2/ProcessMaker_Functions.html">native ProcessMaker functions</a> rather than create complicated custom functions inside triggers.</li>

        <li>Use the <a href="../3.2/ProcessMaker_Functions.html#formatDate.28.29">formatDate()</a> function of PHP for English. For other languages, use PHP's <a href="http://php.net/manual/en/function.strftime.php">strftime()</a> function.</li>
        <li>The <a href="../3.2/ProcessMaker_Functions.html#userInfo.28.29">userInfo()</a> in ProcessMaker 3.x is an alias for the <a href="../3.2/ProcessMaker_Functions.html#PMFInformationUser.28.29">PMFInformationUser()</a> function. Both functions return the same information about the user.</li>
    </ul>
    <h3><span id="ProcessMaker_Database">ProcessMaker Database</span></h3>
    <ul><li>It is helpful to be able to recognize the most common fields in the tables in the wf_workspace database.  Currently, there is not a page in our wiki with the complete description of a wf_workspace  database for ProcessMaker version 3. Nevertheless, refer to <a href="../3.2/ProcessMaker_Database_Model.html">this page</a> to learn about some of the most common and useful fields. Also, take into account that most of the descriptions of fields and tables are on different pages of the wiki, mostly when explaining code examples, describing the fields used, etc.</li></ul>

    <h3><span id="The_executeQuery_Function">The executeQuery() Function</span></h3>
    <p>If there are triggers that use executeQuery() to retrieve several registries from the database, it is recommended to optimize the tables with the correct indexes.  To learn how to work with indexes, see this useful <a href="https://dev.mysql.com/doc/refman/5.7/en/optimization-indexes.html">resource</a>.</p>
    <p>Take the following considerations when using the <a href="#">executeQuery()</a> function:<br>
<ul>
<li><p>ProcessMaker system and case variables can NOT be inserted into double quoted strings in the SQL statement, like this:</p>

    <div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">$result <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;SELECT * FROM USERS WHERE USR_UID='@@USER_LOGGED'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

    <p>Instead, ProcessMaker system and case variables need to first be assigned to normal PHP variables to be inserted inside a double quoted string, like this:</p>

    <div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">$uid <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">;</span> &nbsp; #assign to normal PHP variable to insert <span style="color: #000066; font-weight: bold;">in</span> string<br />
$result <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;SELECT * FROM USERS WHERE USR_UID='$uid'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

    <p>Also note that single quoted strings are treated as literal strings, so PHP variables can NOT be inserted into a single quoted string like this:</p>

    <div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">$result <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'SELECT * USERS WHERE USR_UID=<span style="color: #000099; font-weight: bold;">\'</span>$uid<span style="color: #000099; font-weight: bold;">\'</span>'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div> (read more <a href="../3.2/ProcessMaker_Functions.html#executeQuery.28.29">here</a>)</li>
    <li><p>String, date and datetime values in SQL queries should be enclosed within single quoted strings, and integer and floating-point values should NOT be enclosed within single quotes. To insert an apostrophe into a string, escape it with a backslash. For example:</p>
<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">$result <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;SELECT FIRSTNAME, LASTNAME FROM CLIENTS WHERE ID=8734 AND STATUS='Don<span style="color: #000099; font-weight: bold;">\'</span>t wait'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
    </li>
    <li><p>Some databases, like MySQL, will accept double quotation marks in place of single quotation marks around strings and dates, but it is not recommended because it is not part of the SQL standard.<p>
        <p>When using text input by a user in a database query, it is strongly recommended to pass that text through mysql_real_escape_string() if using a MySQL database, pg_escape_string() if using a PostgreSQL database, or addslashes() for other types of databases to avoid code injection attacks.</p>
        <p>For example, the following code uses text entered in a Dynaform field named "clientName" in the SQL query. Problematic characters are escaped with backslashes by using mysql_real_escape_string():</p>

<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">$db <span style="color: #339933;">=</span> <span style="color: #3366CC;">'89445967454f5d18dd694f4084525230'</span><span style="color: #339933;">;</span> <span style="color: #006600; font-style: italic;">//unique ID of database connection</span><br />
$client <span style="color: #339933;">=</span> mysql_real_escape_string<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>clientName<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
$result <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;SELECT * FROM CLIENTS WHERE CLIENT_NAME='$client'&quot;</span><span style="color: #339933;">,</span> $db<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>is_array<span style="color: #009900;">&#40;</span>$result<span style="color: #009900;">&#41;</span> and count<span style="color: #009900;">&#40;</span>$result<span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #CC0000;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>contractAmount <span style="color: #339933;">=</span> $result<span style="color: #009900;">&#91;</span><span style="color: #CC0000;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #3366CC;">'CONTRACT_AMOUNT'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

(read more <a href="../3.2/ProcessMaker_Functions.html#executeQuery.28.29">here</a>)</li>
    </ul>
    </p>

    <h3><span id="Query_Performance">Query Performance</span></h3>
    <p>
As of ProcessMaker 3.1, a new database schema was created to improve the performance of SQL queries that used the Content table to obtain element titles, UIDs, etc, and allow the user to retrieve this type of information directly from the element table. For more information about the new database schema, read more <a href="../3.2/ProcessMaker_Database_Model.html">here</a>. </p>

    <p>For example, the Department table now includes a DEP_TITLE column, so is not required to do a join with the content table to get the department title that a user ($userID) is assigned to. Therefore, a query that used the Content table in ProcessMaker 2.x to retrieve this information, like the one below:
    <div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> C<span style="color: #66cc66;">.</span>CON_VALUE <span style="color: #993333; font-weight: bold;">AS</span> DEPT <span style="color: #993333; font-weight: bold;">FROM</span> CONTENT C<span style="color: #66cc66;">,</span> USERS U <span style="color: #993333; font-weight: bold;">WHERE</span> U<span style="color: #66cc66;">.</span>USR_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'813656499595cec1550fbd1046224187'</span> <span style="color: #993333; font-weight: bold;">AND</span> U<span style="color: #66cc66;">.</span>DEP_UID <span style="color: #66cc66;">=</span> C<span style="color: #66cc66;">.</span>CON_ID <span style="color: #993333; font-weight: bold;">AND</span> C<span style="color: #66cc66;">.</span>CON_CATEGORY<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'DEPO_TITLE'</span></div></div>
    </p>

    <p>Can now use the DEPARTMENT table directly:</p>
    <div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> D<span style="color: #66cc66;">.</span>DEP_TITLE <span style="color: #993333; font-weight: bold;">AS</span> DEPT <span style="color: #993333; font-weight: bold;">FROM</span> DEPARTMENT D<span style="color: #66cc66;">,</span> USERS U <span style="color: #993333; font-weight: bold;">WHERE</span> U<span style="color: #66cc66;">.</span>USR_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'$userID'</span> <span style="color: #993333; font-weight: bold;">AND</span> U<span style="color: #66cc66;">.</span>DEP_UID <span style="color: #66cc66;">=</span> D<span style="color: #66cc66;">.</span>DEP_UID</div></div>

    <p><b><u>Other Examples</u></b></p>
    <p>To look up all the users in a group named "Accounting":<br>
    <div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> U<span style="color: #66cc66;">.</span>USR_FIRSTNAME <span style="color: #993333; font-weight: bold;">AS</span> NAME<span style="color: #66cc66;">,</span> U<span style="color: #66cc66;">.</span>USR_LASTNAME <span style="color: #993333; font-weight: bold;">AS</span> LASTNAME <span style="color: #993333; font-weight: bold;">FROM</span> USERS U<span style="color: #66cc66;">,</span> GROUPWF G<span style="color: #66cc66;">,</span> GROUP_USER GU<br />
<span style="color: #993333; font-weight: bold;">WHERE</span> U<span style="color: #66cc66;">.</span>USR_UID <span style="color: #66cc66;">=</span> GU<span style="color: #66cc66;">.</span>USR_UID <span style="color: #993333; font-weight: bold;">AND</span> G<span style="color: #66cc66;">.</span>GRP_TITLE <span style="color: #66cc66;">=</span> <span style="color: #ff0000;">'Accounting'</span>;</div></div>
</p>

    <p>To look up all the groups the user is assigned to:<br>
    <div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> &nbsp;G<span style="color: #66cc66;">.</span>GRP_TITLE <span style="color: #993333; font-weight: bold;">FROM</span> GROUPWF G<span style="color: #66cc66;">,</span> GROUP_USER GU <span style="color: #993333; font-weight: bold;">WHERE</span> G<span style="color: #66cc66;">.</span>GRP_UID <span style="color: #66cc66;">=</span> GU<span style="color: #66cc66;">.</span>GRP_UID <span style="color: #993333; font-weight: bold;">AND</span> GU<span style="color: #66cc66;">.</span>USR_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'$userID'</span></div></div></p>

    <p>To look up the name of a group using its group UID:<br>
    <div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> G<span style="color: #66cc66;">.</span>GRP_TITLE <span style="color: #993333; font-weight: bold;">FROM</span> GROUPWF G <span style="color: #993333; font-weight: bold;">WHERE</span> G<span style="color: #66cc66;">.</span>GRP_UID <span style="color: #66cc66;">=</span> <span style="color: #ff0000;">'$gprUID'</span></div></div>
    </p>
    <p>To get the process UID of a process named 'Expense Report Process':<br>
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> PRO_UID <span style="color: #993333; font-weight: bold;">FROM</span> PROCESS <span style="color: #993333; font-weight: bold;">WHERE</span> PRO_TITLE <span style="color: #66cc66;">=</span> <span style="color: #ff0000;">'Expense Report Process'</span></div></div>
</p>

    <p>To get the Dynaform UID of a Dynaform named 'Report Form':.<br>
        <div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> DYN_UID <span style="color: #993333; font-weight: bold;">FROM</span> DYNAFORM <span style="color: #993333; font-weight: bold;">WHERE</span> DYN_TITLE <span style="color: #66cc66;">=</span> <span style="color: #ff0000;">'Report Form'</span></div></div> </p>

    <p>To get all the files uploaded as input documents in a case:<br>
    <div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> APP_DOC_UID<span style="color: #66cc66;">,</span> DOC_VERSION<span style="color: #66cc66;">,</span> APP_DOC_FILENAME <span style="color: #993333; font-weight: bold;">AS</span> FILENAME <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'$caseUID'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'INPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span>;</div></div></p>
    <br>
    <br>
</div>
</div></div></div>  </div>

      <footer>
          </footer>
  
    </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
      </section>
    </div>
  
      
    </div>

      
</div>

 <!---add diego--->
  <div id="download-app-section" class="download-app mobile-none">
			<div class="row">
				<div class="col-md-12">
					<div class="text_app">Download our app</div>
							<a href="https://itunes.apple.com/us/app/processmaker/id992576284?ls=1&amp;mt=8" target="_blank">
								<img src="../themes/thecompany_responsive_theme/images/appstore.png">
							<a href="https://play.google.com/store/apps/details?id=com.colosa.processmaker" target="_blank">
								<img src="../themes/thecompany_responsive_theme/images/playstore.png">				
				</div>
			</div>
  </div>
  <!---end diego--->
<!----add diego----->    
		<div class="logo_processmaker"><a href="http://www.processmaker.com/">
		<img src="../themes/thecompany_responsive_theme/images/logo_processmaker.png"></div>
<!----end diego----->
<div id="footer">
  <div id="footer_wrapper">
      </div>

  <div class="social-media-wrapper">
         <div id="social-media-icons">
       <ul>
       	<div class="text_contact">Contact us</div>
				<div class="text_number">+1-617-340-3377</div>
        <!--<li><a class="rss" href="/rss.xml">rss</a></li> <!--edit diego-->
        <li><a class="facebook" href="http://facebook.com/processmaker/" target="_blank" rel="me">facebook</a></li>
        <li><a class="twitter" href="https://twitter.com/processmaker" target="_blank" rel="me">twitter</a></li>
        <li><a class="gplus" href="https://www.google.com/+ProcessMakerOpenSource" target="_blank" rel="me">Gplus</a></li>
        <li><a class="linkedin" href="https://www.linkedin.com/groups?mostRecent=&amp;gid=3970335&amp;trk=my_groups-tile-flipgrp" target="_blank" rel="me">Linked in</a></li>
        <!--<li><a class="dribbble" href="http://dribbble.com" target="_blank" rel="me">Dribbble</a></li>
        <li><a class="vimeo" href="http://vimeo.com" target="_blank" rel="me">Vimeo</a></li>-->
        <li><a class="youtube" href="https://www.youtube.com/user/processmaker" target="_blank" rel="me">Youtube</a></li>
       </ul>
      </div>
      </div>
  
  <div class="footer_credit">
    <div class="footer_inner_credit">
           <div id="foot"><div class="region region-footer">
  <div id="block-block-2" class="block block-block">

      
  <div class="content">
    <p><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">Automate your Workflow with Business Process Management<br>Software licensed under the <a 1px="" class="external text" href="http://www.gnu.org/licenses/agpl.html" rel="nofollow" style="padding-right: 13px; color:white;">GNU Affero General Public License version 3</a><br>Contact us:&nbsp;<a class="external free" href="mailto:community@processmaker.com" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">community@processmaker.com</a><br><a class="external free" href="https://www.processmaker.com/privacy-statement" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">Privacy Statement</a></font><br><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">© Copyright 2000-2024 ProcessMaker Inc. All rights reserved.</font></p>
  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
</div>
         
   <!-- <div id="copyright">
      <p class="copyright">Copyright &copy; 2024, Documentation@ProcessMaker </p>
      <!--<p class="credits"> Developed by  <a href="http://www.zymphonies.com">Zymphonies</a></p>
      <div class="clear"></div>
    </div>-->
  </div>
  
  </div>
</div>

</div>

<script type="text/javascript">
  /* <![CDATA[ */
  document.write (
    '<img src="https://marketing.processmaker.com/acton/bn/3812/visitor.gif?ts='+ new Date().getTime()+ '&ref='+escape(document.referrer) + '">'
  );
  /* ]]> */
</script>
  
</div>
    <style>
    .center-div{
        width: 100%;        
        margin: 0 auto;
        z-index:10000;
        position:fixed;
        bottom: 0px;
        cursor:pointer;
    }
    .round-popup{
        margin:0 auto;
        font-family: 'Montserrat', sans-serif;
        font-size: 15px;
        font-weight: lighter;
        width: 412px;
        height: 50px;
        padding-top: 7px;
        text-align: center;
        position:relative;
    }
    .round-popup-button{
        position:absolute;
        top: 11px;
        right: 15px;
        background: transparent;
        border:none;
        font-size:15px;
        font-weight:normal;
        line-height:20px;
        width:20px;
        height:20px;
        padding:0;
    }
    .round-background-blue{
        background: url('http://www.processmaker.com/uploads/blue.png')no-repeat;
        color:white;
        
    }
    #box-pm31-button-blue{
        color: rgba(255, 255, 255, 0.5);
    }
    
    #box-pm31-button-blue:active,#box-pm31-button-blue:focus{
        border:none;
        outline:none;
    }
    .round-background-blue a{
        color: white!important;
        text-decoration: none;
        font-size: 15px;
        line-height:45px;
        font-family:Montserrat, sans-serif;
    }
    .round-background-blue span{
        font-weight: bold;
    }
    /*WHITE background*/
    .round-background-white{
        background: url('http://www.processmaker.com/uploads/white.png')no-repeat;
        background-position-x: -9px;        
        color: #3397E1;
    }
    .round-background-white a:hover{
        color: #3397E1!important;
        text-decoration: none;
        font-size: 15px;
    }
    #box-pm31-button-white{
        color: rgba(51, 151, 225, 0.7);
    }
</style>
    <div id="box-pm31" class="center-div" style="display:none;">
        <div class="round-popup round-background-blue">
            <a onclick="ga('send', 'event', 'WikiBlueBanner','click','PM31Release');" href="http://www.processmaker.com/download-processmaker-landing-page">
                <span>ProcessMaker 3.1</span> is Here! Download Now <span style="font-size:20px;font-weigth:normal;">»</span>
            </a>
            <button id="box-pm31-button-blue" class="round-popup-button">&times;</button>
        </div>
    </div>
    <script>

function pmCreateCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function pmReadCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function pmEraseCookie(name) {
    createCookie(name,"",-1);
}



     jQuery(document).ready(function( $ ) {
        $('#box-pm31-button-blue').click(function(e){
                e.stopPropagation();
                $('#box-pm31').slideUp('fast');
                pmCreateCookie('ppcookie','val',10);
            });
        });
        jQuery(window).load(function() {
            if(pmReadCookie('ppcookie') !== 'val'){
                //jQuery('#box-pm31').delay( 2000 ).slideDown('slow');
            }
        });
    </script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">

<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
    // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
    // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.marinsm.com/serve/586a7ec3a2ae6b728400003d.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>

</body>

<!-- Mirrored from wiki.processmaker.com/node/705 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 08 Feb 2024 09:30:00 GMT -->
</html>
